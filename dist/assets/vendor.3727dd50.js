function k(){return function(){throw new Error("Unimplemented abstract method.")}()}var qo=0;function lt(n){return n.ol_uid||(n.ol_uid=String(++qo))}var Xo="6.9.0",Zo=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,r){i.__proto__=r}||function(i,r){for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(i[a]=r[a])},n(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");n(e,t);function i(){this.constructor=e}e.prototype=t===null?Object.create(t):(i.prototype=t.prototype,new i)}}(),Bo=function(n){Zo(e,n);function e(t){var i=this,r="v"+Xo.split("-")[0],a="Assertion failed. See https://openlayers.org/en/"+r+"/doc/errors/#"+t+" for details.";return i=n.call(this,a)||this,i.code=t,i.name="AssertionError",i.message=a,i}return e}(Error),dr=Bo,Vo=function(){function n(e){this.propagationStopped,this.defaultPrevented,this.type=e,this.target=null}return n.prototype.preventDefault=function(){this.defaultPrevented=!0},n.prototype.stopPropagation=function(){this.propagationStopped=!0},n}(),Yt=Vo,ce={PROPERTYCHANGE:"propertychange"},Wo=function(){function n(){this.disposed=!1}return n.prototype.dispose=function(){this.disposed||(this.disposed=!0,this.disposeInternal())},n.prototype.disposeInternal=function(){},n}(),oi=Wo;function si(n,e){return n>e?1:n<e?-1:0}function hi(n,e,t){var i=n.length;if(n[0]<=e)return 0;if(e<=n[i-1])return i-1;var r=void 0;if(t>0){for(r=1;r<i;++r)if(n[r]<e)return r-1}else if(t<0){for(r=1;r<i;++r)if(n[r]<=e)return r}else for(r=1;r<i;++r){if(n[r]==e)return r;if(n[r]<e)return typeof t=="function"?t(e,n[r-1],n[r])>0?r-1:r:n[r-1]-e<e-n[r]?r-1:r}return i-1}function Ho(n,e){for(var t=Array.isArray(e)?e:[e],i=t.length,r=0;r<i;r++)n[n.length]=t[r]}function pr(n,e){var t=n.length;if(t!==e.length)return!1;for(var i=0;i<t;i++)if(n[i]!==e[i])return!1;return!0}function Yo(n,e,t){var i=e||si;return n.every(function(r,a){if(a===0)return!0;var o=i(n[a-1],r);return!(o>0||t&&o===0)})}function $e(){return!0}function gn(){return!1}function ze(){}function Qo(n){var e=!1,t,i,r;return function(){var a=Array.prototype.slice.call(arguments);return(!e||this!==r||!pr(a,i))&&(e=!0,r=this,i=a,t=n.apply(this,arguments)),t}}var H=typeof Object.assign=="function"?Object.assign:function(n,e){if(n==null)throw new TypeError("Cannot convert undefined or null to object");for(var t=Object(n),i=1,r=arguments.length;i<r;++i){var a=arguments[i];if(a!=null)for(var o in a)a.hasOwnProperty(o)&&(t[o]=a[o])}return t};function mn(n){for(var e in n)delete n[e]}var Jo=typeof Object.values=="function"?Object.values:function(n){var e=[];for(var t in n)e.push(n[t]);return e};function ts(n){var e;for(e in n)return!1;return!e}var es=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,r){i.__proto__=r}||function(i,r){for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(i[a]=r[a])},n(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");n(e,t);function i(){this.constructor=e}e.prototype=t===null?Object.create(t):(i.prototype=t.prototype,new i)}}(),ns=function(n){es(e,n);function e(t){var i=n.call(this)||this;return i.eventTarget_=t,i.pendingRemovals_=null,i.dispatching_=null,i.listeners_=null,i}return e.prototype.addEventListener=function(t,i){if(!(!t||!i)){var r=this.listeners_||(this.listeners_={}),a=r[t]||(r[t]=[]);a.indexOf(i)===-1&&a.push(i)}},e.prototype.dispatchEvent=function(t){var i=typeof t=="string"?new Yt(t):t,r=i.type;i.target||(i.target=this.eventTarget_||this);var a=this.listeners_&&this.listeners_[r],o;if(a){var s=this.dispatching_||(this.dispatching_={}),h=this.pendingRemovals_||(this.pendingRemovals_={});r in s||(s[r]=0,h[r]=0),++s[r];for(var l=0,u=a.length;l<u;++l)if("handleEvent"in a[l]?o=a[l].handleEvent(i):o=a[l].call(this,i),o===!1||i.propagationStopped){o=!1;break}if(--s[r],s[r]===0){var f=h[r];for(delete h[r];f--;)this.removeEventListener(r,ze);delete s[r]}return o}},e.prototype.disposeInternal=function(){this.listeners_&&mn(this.listeners_)},e.prototype.getListeners=function(t){return this.listeners_&&this.listeners_[t]||void 0},e.prototype.hasListener=function(t){return this.listeners_?t?t in this.listeners_:Object.keys(this.listeners_).length>0:!1},e.prototype.removeEventListener=function(t,i){var r=this.listeners_&&this.listeners_[t];if(r){var a=r.indexOf(i);a!==-1&&(this.pendingRemovals_&&t in this.pendingRemovals_?(r[a]=ze,++this.pendingRemovals_[t]):(r.splice(a,1),r.length===0&&delete this.listeners_[t]))}},e}(oi),Ue=ns,S={CHANGE:"change",ERROR:"error",BLUR:"blur",CLEAR:"clear",CONTEXTMENU:"contextmenu",CLICK:"click",DBLCLICK:"dblclick",DRAGENTER:"dragenter",DRAGOVER:"dragover",DROP:"drop",FOCUS:"focus",KEYDOWN:"keydown",KEYPRESS:"keypress",LOAD:"load",RESIZE:"resize",TOUCHMOVE:"touchmove",WHEEL:"wheel"};function D(n,e,t,i,r){if(i&&i!==n&&(t=t.bind(i)),r){var a=t;t=function(){n.removeEventListener(e,t),a.apply(this,arguments)}}var o={target:n,type:e,listener:t};return n.addEventListener(e,t),o}function Mn(n,e,t,i){return D(n,e,t,i,!0)}function B(n){n&&n.target&&(n.target.removeEventListener(n.type,n.listener),mn(n))}var is=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,r){i.__proto__=r}||function(i,r){for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(i[a]=r[a])},n(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");n(e,t);function i(){this.constructor=e}e.prototype=t===null?Object.create(t):(i.prototype=t.prototype,new i)}}(),En=function(n){is(e,n);function e(){var t=n.call(this)||this;return t.on=t.onInternal,t.once=t.onceInternal,t.un=t.unInternal,t.revision_=0,t}return e.prototype.changed=function(){++this.revision_,this.dispatchEvent(S.CHANGE)},e.prototype.getRevision=function(){return this.revision_},e.prototype.onInternal=function(t,i){if(Array.isArray(t)){for(var r=t.length,a=new Array(r),o=0;o<r;++o)a[o]=D(this,t[o],i);return a}else return D(this,t,i)},e.prototype.onceInternal=function(t,i){var r;if(Array.isArray(t)){var a=t.length;r=new Array(a);for(var o=0;o<a;++o)r[o]=Mn(this,t[o],i)}else r=Mn(this,t,i);return i.ol_key=r,r},e.prototype.unInternal=function(t,i){var r=i.ol_key;if(r)rs(r);else if(Array.isArray(t))for(var a=0,o=t.length;a<o;++a)this.removeEventListener(t[a],i);else this.removeEventListener(t,i)},e}(Ue);En.prototype.on;En.prototype.once;En.prototype.un;function rs(n){if(Array.isArray(n))for(var e=0,t=n.length;e<t;++e)B(n[e]);else B(n)}var _r=En,yr=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,r){i.__proto__=r}||function(i,r){for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(i[a]=r[a])},n(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");n(e,t);function i(){this.constructor=e}e.prototype=t===null?Object.create(t):(i.prototype=t.prototype,new i)}}(),gr=function(n){yr(e,n);function e(t,i,r){var a=n.call(this,t)||this;return a.key=i,a.oldValue=r,a}return e}(Yt),as=function(n){yr(e,n);function e(t){var i=n.call(this)||this;return i.on,i.once,i.un,lt(i),i.values_=null,t!==void 0&&i.setProperties(t),i}return e.prototype.get=function(t){var i;return this.values_&&this.values_.hasOwnProperty(t)&&(i=this.values_[t]),i},e.prototype.getKeys=function(){return this.values_&&Object.keys(this.values_)||[]},e.prototype.getProperties=function(){return this.values_&&H({},this.values_)||{}},e.prototype.hasProperties=function(){return!!this.values_},e.prototype.notify=function(t,i){var r;r="change:"+t,this.dispatchEvent(new gr(r,t,i)),r=ce.PROPERTYCHANGE,this.dispatchEvent(new gr(r,t,i))},e.prototype.addChangeListener=function(t,i){this.addEventListener("change:"+t,i)},e.prototype.removeChangeListener=function(t,i){this.removeEventListener("change:"+t,i)},e.prototype.set=function(t,i,r){var a=this.values_||(this.values_={});if(r)a[t]=i;else{var o=a[t];a[t]=i,o!==i&&this.notify(t,o)}},e.prototype.setProperties=function(t,i){for(var r in t)this.set(r,t[r],i)},e.prototype.applyProperties=function(t){!t.values_||H(this.values_||(this.values_={}),t.values_)},e.prototype.unset=function(t,i){if(this.values_&&t in this.values_){var r=this.values_[t];delete this.values_[t],ts(this.values_)&&(this.values_=null),i||this.notify(t,r)}},e}(_r),yt=as,gt={ADD:"add",REMOVE:"remove"},mr=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,r){i.__proto__=r}||function(i,r){for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(i[a]=r[a])},n(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");n(e,t);function i(){this.constructor=e}e.prototype=t===null?Object.create(t):(i.prototype=t.prototype,new i)}}(),Mr={LENGTH:"length"},xn=function(n){mr(e,n);function e(t,i,r){var a=n.call(this,t)||this;return a.element=i,a.index=r,a}return e}(Yt),os=function(n){mr(e,n);function e(t,i){var r=n.call(this)||this;r.on,r.once,r.un;var a=i||{};if(r.unique_=!!a.unique,r.array_=t||[],r.unique_)for(var o=0,s=r.array_.length;o<s;++o)r.assertUnique_(r.array_[o],o);return r.updateLength_(),r}return e.prototype.clear=function(){for(;this.getLength()>0;)this.pop()},e.prototype.extend=function(t){for(var i=0,r=t.length;i<r;++i)this.push(t[i]);return this},e.prototype.forEach=function(t){for(var i=this.array_,r=0,a=i.length;r<a;++r)t(i[r],r,i)},e.prototype.getArray=function(){return this.array_},e.prototype.item=function(t){return this.array_[t]},e.prototype.getLength=function(){return this.get(Mr.LENGTH)},e.prototype.insertAt=function(t,i){this.unique_&&this.assertUnique_(i),this.array_.splice(t,0,i),this.updateLength_(),this.dispatchEvent(new xn(gt.ADD,i,t))},e.prototype.pop=function(){return this.removeAt(this.getLength()-1)},e.prototype.push=function(t){this.unique_&&this.assertUnique_(t);var i=this.getLength();return this.insertAt(i,t),this.getLength()},e.prototype.remove=function(t){for(var i=this.array_,r=0,a=i.length;r<a;++r)if(i[r]===t)return this.removeAt(r)},e.prototype.removeAt=function(t){var i=this.array_[t];return this.array_.splice(t,1),this.updateLength_(),this.dispatchEvent(new xn(gt.REMOVE,i,t)),i},e.prototype.setAt=function(t,i){var r=this.getLength();if(t<r){this.unique_&&this.assertUnique_(i,t);var a=this.array_[t];this.array_[t]=i,this.dispatchEvent(new xn(gt.REMOVE,a,t)),this.dispatchEvent(new xn(gt.ADD,i,t))}else{for(var o=r;o<t;++o)this.insertAt(o,void 0);this.insertAt(t,i)}},e.prototype.updateLength_=function(){this.set(Mr.LENGTH,this.array_.length)},e.prototype.assertUnique_=function(t,i){for(var r=0,a=this.array_.length;r<a;++r)if(this.array_[r]===t&&r!==i)throw new dr(58)},e}(yt),Ot=os;function $(n,e){if(!n)throw new dr(e)}var vt={XY:"XY",XYZ:"XYZ",XYM:"XYM",XYZM:"XYZM"},Tn={POINT:"Point",LINE_STRING:"LineString",LINEAR_RING:"LinearRing",POLYGON:"Polygon",MULTI_POINT:"MultiPoint",MULTI_LINE_STRING:"MultiLineString",MULTI_POLYGON:"MultiPolygon",GEOMETRY_COLLECTION:"GeometryCollection",CIRCLE:"Circle"},ve={RADIANS:"radians",DEGREES:"degrees",FEET:"ft",METERS:"m",PIXELS:"pixels",TILE_PIXELS:"tile-pixels",USFEET:"us-ft"},It={};It[ve.RADIANS]=6370997/(2*Math.PI);It[ve.DEGREES]=2*Math.PI*6370997/360;It[ve.FEET]=.3048;It[ve.METERS]=1;It[ve.USFEET]=1200/3937;var Ft=ve,de=typeof navigator!="undefined"&&typeof navigator.userAgent!="undefined"?navigator.userAgent.toLowerCase():"",ss=de.indexOf("firefox")!==-1;de.indexOf("safari")!==-1&&de.indexOf("chrom")==-1;var hs=de.indexOf("webkit")!==-1&&de.indexOf("edge")==-1,ls=de.indexOf("macintosh")!==-1,Er=typeof devicePixelRatio!="undefined"?devicePixelRatio:1,xr=typeof WorkerGlobalScope!="undefined"&&typeof OffscreenCanvas!="undefined"&&self instanceof WorkerGlobalScope,us=typeof Image!="undefined"&&Image.prototype.decode,Tr=function(){var n=!1;try{var e=Object.defineProperty({},"passive",{get:function(){n=!0}});window.addEventListener("_",null,e),window.removeEventListener("_",null,e)}catch(t){}return n}();new Array(6);function pe(){return[1,0,0,1,0,0]}function dt(n,e){var t=e[0],i=e[1];return e[0]=n[0]*t+n[2]*i+n[4],e[1]=n[1]*t+n[3]*i+n[5],e}function ke(n,e,t,i,r,a,o,s){var h=Math.sin(a),l=Math.cos(a);return n[0]=i*l,n[1]=r*h,n[2]=-i*h,n[3]=r*l,n[4]=o*i*l-s*i*h+e,n[5]=o*r*h+s*r*l+t,n}function Cr(n,e){var t=fs(e);$(t!==0,32);var i=e[0],r=e[1],a=e[2],o=e[3],s=e[4],h=e[5];return n[0]=o/t,n[1]=-r/t,n[2]=-a/t,n[3]=i/t,n[4]=(a*h-o*s)/t,n[5]=-(i*h-r*s)/t,n}function fs(n){return n[0]*n[3]-n[1]*n[2]}var Or;function cs(n){var e="matrix("+n.join(", ")+")";if(xr)return e;var t=Or||(Or=document.createElement("div"));return t.style.transform=e,t.style.transform}var Ke={BOTTOM_LEFT:"bottom-left",BOTTOM_RIGHT:"bottom-right",TOP_LEFT:"top-left",TOP_RIGHT:"top-right"},tt={UNKNOWN:0,INTERSECTING:1,ABOVE:2,RIGHT:4,BELOW:8,LEFT:16};function Rr(n){for(var e=Zt(),t=0,i=n.length;t<i;++t)On(e,n[t]);return e}function vs(n,e,t){var i=Math.min.apply(null,n),r=Math.min.apply(null,e),a=Math.max.apply(null,n),o=Math.max.apply(null,e);return Qt(i,r,a,o,t)}function Pr(n,e,t){return t?(t[0]=n[0]-e,t[1]=n[1]-e,t[2]=n[2]+e,t[3]=n[3]+e,t):[n[0]-e,n[1]-e,n[2]+e,n[3]+e]}function ds(n,e){return e?(e[0]=n[0],e[1]=n[1],e[2]=n[2],e[3]=n[3],e):n.slice()}function wr(n,e,t){var i,r;return e<n[0]?i=n[0]-e:n[2]<e?i=e-n[2]:i=0,t<n[1]?r=n[1]-t:n[3]<t?r=t-n[3]:r=0,i*i+r*r}function li(n,e){return Sr(n,e[0],e[1])}function Ir(n,e){return n[0]<=e[0]&&e[2]<=n[2]&&n[1]<=e[1]&&e[3]<=n[3]}function Sr(n,e,t){return n[0]<=e&&e<=n[2]&&n[1]<=t&&t<=n[3]}function Ar(n,e){var t=n[0],i=n[1],r=n[2],a=n[3],o=e[0],s=e[1],h=tt.UNKNOWN;return o<t?h=h|tt.LEFT:o>r&&(h=h|tt.RIGHT),s<i?h=h|tt.BELOW:s>a&&(h=h|tt.ABOVE),h===tt.UNKNOWN&&(h=tt.INTERSECTING),h}function Zt(){return[1/0,1/0,-1/0,-1/0]}function Qt(n,e,t,i,r){return r?(r[0]=n,r[1]=e,r[2]=t,r[3]=i,r):[n,e,t,i]}function Cn(n){return Qt(1/0,1/0,-1/0,-1/0,n)}function ps(n,e){var t=n[0],i=n[1];return Qt(t,i,t,i,e)}function _s(n,e,t,i,r){var a=Cn(r);return Lr(a,n,e,t,i)}function ui(n,e){return n[0]==e[0]&&n[2]==e[2]&&n[1]==e[1]&&n[3]==e[3]}function ys(n,e){return e[0]<n[0]&&(n[0]=e[0]),e[2]>n[2]&&(n[2]=e[2]),e[1]<n[1]&&(n[1]=e[1]),e[3]>n[3]&&(n[3]=e[3]),n}function On(n,e){e[0]<n[0]&&(n[0]=e[0]),e[0]>n[2]&&(n[2]=e[0]),e[1]<n[1]&&(n[1]=e[1]),e[1]>n[3]&&(n[3]=e[1])}function Lr(n,e,t,i,r){for(;t<i;t+=r)gs(n,e[t],e[t+1]);return n}function gs(n,e,t){n[0]=Math.min(n[0],e),n[1]=Math.min(n[1],t),n[2]=Math.max(n[2],e),n[3]=Math.max(n[3],t)}function Nr(n,e){var t;return t=e(Rn(n)),t||(t=e(Pn(n)),t)||(t=e(wn(n)),t)||(t=e(Jt(n)),t)?t:!1}function fi(n){var e=0;return di(n)||(e=Y(n)*Rt(n)),e}function Rn(n){return[n[0],n[1]]}function Pn(n){return[n[2],n[1]]}function qe(n){return[(n[0]+n[2])/2,(n[1]+n[3])/2]}function ms(n,e){var t;return e===Ke.BOTTOM_LEFT?t=Rn(n):e===Ke.BOTTOM_RIGHT?t=Pn(n):e===Ke.TOP_LEFT?t=Jt(n):e===Ke.TOP_RIGHT?t=wn(n):$(!1,13),t}function ci(n,e,t,i,r){var a=e*i[0]/2,o=e*i[1]/2,s=Math.cos(t),h=Math.sin(t),l=a*s,u=a*h,f=o*s,c=o*h,v=n[0],d=n[1],p=v-l+c,_=v-l-c,y=v+l-c,m=v+l+c,g=d-u-f,M=d-u+f,x=d+u+f,P=d+u-f;return Qt(Math.min(p,_,y,m),Math.min(g,M,x,P),Math.max(p,_,y,m),Math.max(g,M,x,P),r)}function Rt(n){return n[3]-n[1]}function Xe(n,e,t){var i=t||Zt();return vi(n,e)?(n[0]>e[0]?i[0]=n[0]:i[0]=e[0],n[1]>e[1]?i[1]=n[1]:i[1]=e[1],n[2]<e[2]?i[2]=n[2]:i[2]=e[2],n[3]<e[3]?i[3]=n[3]:i[3]=e[3]):Cn(i),i}function Jt(n){return[n[0],n[3]]}function wn(n){return[n[2],n[3]]}function Y(n){return n[2]-n[0]}function vi(n,e){return n[0]<=e[2]&&n[2]>=e[0]&&n[1]<=e[3]&&n[3]>=e[1]}function di(n){return n[2]<n[0]||n[3]<n[1]}function Ms(n,e){return e?(e[0]=n[0],e[1]=n[1],e[2]=n[2],e[3]=n[3],e):n}function Es(n,e,t){var i=!1,r=Ar(n,e),a=Ar(n,t);if(r===tt.INTERSECTING||a===tt.INTERSECTING)i=!0;else{var o=n[0],s=n[1],h=n[2],l=n[3],u=e[0],f=e[1],c=t[0],v=t[1],d=(v-f)/(c-u),p=void 0,_=void 0;!!(a&tt.ABOVE)&&!(r&tt.ABOVE)&&(p=c-(v-l)/d,i=p>=o&&p<=h),!i&&!!(a&tt.RIGHT)&&!(r&tt.RIGHT)&&(_=v-(c-h)*d,i=_>=s&&_<=l),!i&&!!(a&tt.BELOW)&&!(r&tt.BELOW)&&(p=c-(v-s)/d,i=p>=o&&p<=h),!i&&!!(a&tt.LEFT)&&!(r&tt.LEFT)&&(_=v-(c-o)*d,i=_>=s&&_<=l)}return i}function xs(n,e,t,i){var r=[];if(i>1)for(var a=n[2]-n[0],o=n[3]-n[1],s=0;s<i;++s)r.push(n[0]+a*s/i,n[1],n[2],n[1]+o*s/i,n[2]-a*s/i,n[3],n[0],n[3]-o*s/i);else r=[n[0],n[1],n[2],n[1],n[2],n[3],n[0],n[3]];e(r,r,2);for(var h=[],l=[],s=0,u=r.length;s<u;s+=2)h.push(r[s]),l.push(r[s+1]);return vs(h,l,t)}var Ts=function(){function n(e){this.code_=e.code,this.units_=e.units,this.extent_=e.extent!==void 0?e.extent:null,this.worldExtent_=e.worldExtent!==void 0?e.worldExtent:null,this.axisOrientation_=e.axisOrientation!==void 0?e.axisOrientation:"enu",this.global_=e.global!==void 0?e.global:!1,this.canWrapX_=!!(this.global_&&this.extent_),this.getPointResolutionFunc_=e.getPointResolution,this.defaultTileGrid_=null,this.metersPerUnit_=e.metersPerUnit}return n.prototype.canWrapX=function(){return this.canWrapX_},n.prototype.getCode=function(){return this.code_},n.prototype.getExtent=function(){return this.extent_},n.prototype.getUnits=function(){return this.units_},n.prototype.getMetersPerUnit=function(){return this.metersPerUnit_||It[this.units_]},n.prototype.getWorldExtent=function(){return this.worldExtent_},n.prototype.getAxisOrientation=function(){return this.axisOrientation_},n.prototype.isGlobal=function(){return this.global_},n.prototype.setGlobal=function(e){this.global_=e,this.canWrapX_=!!(e&&this.extent_)},n.prototype.getDefaultTileGrid=function(){return this.defaultTileGrid_},n.prototype.setDefaultTileGrid=function(e){this.defaultTileGrid_=e},n.prototype.setExtent=function(e){this.extent_=e,this.canWrapX_=!!(this.global_&&e)},n.prototype.setWorldExtent=function(e){this.worldExtent_=e},n.prototype.setGetPointResolution=function(e){this.getPointResolutionFunc_=e},n.prototype.getPointResolutionFunc=function(){return this.getPointResolutionFunc_},n}(),pi=Ts;function nt(n,e,t){return Math.min(Math.max(n,e),t)}var Cs=function(){var n;return"cosh"in Math?n=Math.cosh:n=function(e){var t=Math.exp(e);return(t+1/t)/2},n}(),Os=function(){var n;return"log2"in Math?n=Math.log2:n=function(e){return Math.log(e)*Math.LOG2E},n}();function Rs(n,e,t,i,r,a){var o=r-t,s=a-i;if(o!==0||s!==0){var h=((n-t)*o+(e-i)*s)/(o*o+s*s);h>1?(t=r,i=a):h>0&&(t+=o*h,i+=s*h)}return _e(n,e,t,i)}function _e(n,e,t,i){var r=t-n,a=i-e;return r*r+a*a}function Ps(n){for(var e=n.length,t=0;t<e;t++){for(var i=t,r=Math.abs(n[t][t]),a=t+1;a<e;a++){var o=Math.abs(n[a][t]);o>r&&(r=o,i=a)}if(r===0)return null;var s=n[i];n[i]=n[t],n[t]=s;for(var h=t+1;h<e;h++)for(var l=-n[h][t]/n[t][t],u=t;u<e+1;u++)t==u?n[h][u]=0:n[h][u]+=l*n[t][u]}for(var f=new Array(e),c=e-1;c>=0;c--){f[c]=n[c][e]/n[c][c];for(var v=c-1;v>=0;v--)n[v][e]-=n[v][c]*f[c]}return f}function In(n){return n*Math.PI/180}function te(n,e){var t=n%e;return t*e<0?t+e:t}function ws(n,e,t){return n+t*(e-n)}var Is=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,r){i.__proto__=r}||function(i,r){for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(i[a]=r[a])},n(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");n(e,t);function i(){this.constructor=e}e.prototype=t===null?Object.create(t):(i.prototype=t.prototype,new i)}}(),Ze=6378137,ye=Math.PI*Ze,Ss=[-ye,-ye,ye,ye],As=[-180,-85,180,85],Sn=Ze*Math.log(Math.tan(Math.PI/2)),ge=function(n){Is(e,n);function e(t){return n.call(this,{code:t,units:Ft.METERS,extent:Ss,global:!0,worldExtent:As,getPointResolution:function(i,r){return i/Cs(r[1]/Ze)}})||this}return e}(pi),br=[new ge("EPSG:3857"),new ge("EPSG:102100"),new ge("EPSG:102113"),new ge("EPSG:900913"),new ge("http://www.opengis.net/def/crs/EPSG/0/3857"),new ge("http://www.opengis.net/gml/srs/epsg.xml#3857")];function Ls(n,e,t){var i=n.length,r=t>1?t:2,a=e;a===void 0&&(r>2?a=n.slice():a=new Array(i));for(var o=0;o<i;o+=r){a[o]=ye*n[o]/180;var s=Ze*Math.log(Math.tan(Math.PI*(+n[o+1]+90)/360));s>Sn?s=Sn:s<-Sn&&(s=-Sn),a[o+1]=s}return a}function Ns(n,e,t){var i=n.length,r=t>1?t:2,a=e;a===void 0&&(r>2?a=n.slice():a=new Array(i));for(var o=0;o<i;o+=r)a[o]=180*n[o]/ye,a[o+1]=360*Math.atan(Math.exp(n[o+1]/Ze))/Math.PI-90;return a}var bs=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,r){i.__proto__=r}||function(i,r){for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(i[a]=r[a])},n(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");n(e,t);function i(){this.constructor=e}e.prototype=t===null?Object.create(t):(i.prototype=t.prototype,new i)}}(),Ds=6378137,Dr=[-180,-90,180,90],Fs=Math.PI*Ds/180,ee=function(n){bs(e,n);function e(t,i){return n.call(this,{code:t,units:Ft.DEGREES,extent:Dr,axisOrientation:i,global:!0,metersPerUnit:Fs,worldExtent:Dr})||this}return e}(pi),Fr=[new ee("CRS:84"),new ee("EPSG:4326","neu"),new ee("urn:ogc:def:crs:OGC:1.3:CRS84"),new ee("urn:ogc:def:crs:OGC:2:84"),new ee("http://www.opengis.net/def/crs/OGC/1.3/CRS84","neu"),new ee("http://www.opengis.net/gml/srs/epsg.xml#4326","neu"),new ee("http://www.opengis.net/def/crs/EPSG/0/4326","neu")],_i={};function Gs(n){return _i[n]||_i[n.replace(/urn:(x-)?ogc:def:crs:EPSG:(.*:)?(\w+)$/,"EPSG:$3")]||null}function js(n,e){_i[n]=e}var me={};function Me(n,e,t){var i=n.getCode(),r=e.getCode();i in me||(me[i]={}),me[i][r]=t}function Gr(n,e){var t;return n in me&&e in me[n]&&(t=me[n][e]),t}var $s=63710088e-1;function jr(n,e,t){var i=t||$s,r=In(n[1]),a=In(e[1]),o=(a-r)/2,s=In(e[0]-n[0])/2,h=Math.sin(o)*Math.sin(o)+Math.sin(s)*Math.sin(s)*Math.cos(r)*Math.cos(a);return 2*i*Math.atan2(Math.sqrt(h),Math.sqrt(1-h))}function zs(n,e){for(var t=(""+n).split("."),i=(""+e).split("."),r=0;r<Math.max(t.length,i.length);r++){var a=parseInt(t[r]||"0",10),o=parseInt(i[r]||"0",10);if(a>o)return 1;if(o>a)return-1}return 0}function Us(n,e){return n[0]+=+e[0],n[1]+=+e[1],n}function Lp(n,e,t){return n?e.replace("{x}",n[0].toFixed(t)).replace("{y}",n[1].toFixed(t)):""}function yi(n,e){for(var t=!0,i=n.length-1;i>=0;--i)if(n[i]!=e[i]){t=!1;break}return t}function gi(n,e){var t=Math.cos(e),i=Math.sin(e),r=n[0]*t-n[1]*i,a=n[1]*t+n[0]*i;return n[0]=r,n[1]=a,n}function ks(n,e){return n[0]*=e,n[1]*=e,n}function Ks(n,e){if(e.canWrapX()){var t=Y(e.getExtent()),i=$r(n,e,t);i&&(n[0]-=i*t)}return n}function $r(n,e,t){var i=e.getExtent(),r=0;if(e.canWrapX()&&(n[0]<i[0]||n[0]>i[2])){var a=t||Y(i);r=Math.floor((n[0]-i[0])/a)}return r}function mi(n,e,t){var i;if(e!==void 0){for(var r=0,a=n.length;r<a;++r)e[r]=n[r];i=e}else i=n.slice();return i}function Mi(n,e,t){if(e!==void 0&&n!==e){for(var i=0,r=n.length;i<r;++i)e[i]=n[i];n=e}return n}function zr(n){js(n.getCode(),n),Me(n,n,mi)}function qs(n){n.forEach(zr)}function Q(n){return typeof n=="string"?Gs(n):n||null}function Ur(n,e,t,i){n=Q(n);var r,a=n.getPointResolutionFunc();if(a){if(r=a(e,t),i&&i!==n.getUnits()){var o=n.getMetersPerUnit();o&&(r=r*o/It[i])}}else{var s=n.getUnits();if(s==Ft.DEGREES&&!i||i==Ft.DEGREES)r=e;else{var h=Be(n,Q("EPSG:4326"));if(h===Mi&&s!==Ft.DEGREES)r=e*n.getMetersPerUnit();else{var l=[t[0]-e/2,t[1],t[0]+e/2,t[1],t[0],t[1]-e/2,t[0],t[1]+e/2];l=h(l,l,2);var u=jr(l.slice(0,2),l.slice(2,4)),f=jr(l.slice(4,6),l.slice(6,8));r=(u+f)/2}var o=i?It[i]:n.getMetersPerUnit();o!==void 0&&(r/=o)}}return r}function Ei(n){qs(n),n.forEach(function(e){n.forEach(function(t){e!==t&&Me(e,t,mi)})})}function Xs(n,e,t,i){n.forEach(function(r){e.forEach(function(a){Me(r,a,t),Me(a,r,i)})})}function xi(n,e){return n?typeof n=="string"?Q(n):n:Q(e)}function kr(n){return function(e,t,i){for(var r=e.length,a=i!==void 0?i:2,o=t!==void 0?t:new Array(r),s=0;s<r;s+=a){var h=n([e[s],e[s+1]]);o[s]=h[0],o[s+1]=h[1];for(var l=a-1;l>=2;--l)o[s+l]=e[s+l]}return o}}function Zs(n,e,t,i){var r=Q(n),a=Q(e);Me(r,a,kr(t)),Me(a,r,kr(i))}function Ee(n,e){if(n===e)return!0;var t=n.getUnits()===e.getUnits();if(n.getCode()===e.getCode())return t;var i=Be(n,e);return i===mi&&t}function Be(n,e){var t=n.getCode(),i=e.getCode(),r=Gr(t,i);return r||(r=Mi),r}function Ve(n,e){var t=Q(n),i=Q(e);return Be(t,i)}function Kr(n,e,t){var i=Ve(e,t);return i(n,void 0,n.length)}function Bs(n,e,t,i){var r=Ve(e,t);return xs(n,r,void 0,i)}var Vs=null;function qr(){return Vs}function Ti(n,e){return n}function Gt(n,e){return n}function Ws(n,e){return n}function xe(n,e){return n}function Xr(n,e,t){return function(i){var r=i[0],a=i[1],o,s;if(n.canWrapX()){var h=n.getExtent(),l=Y(h);s=$r(i,n,l),s&&(r=r-s*l),r=nt(r,h[0],h[2]),a=nt(a,h[1],h[3]),o=t([r,a])}else o=t(i);return s&&e.canWrapX()&&(o[0]+=s*Y(e.getExtent())),o}}function Hs(){Ei(br),Ei(Fr),Xs(Fr,br,Ls,Ns)}Hs();function Ys(n,e,t,i,r,a){for(var o=a||[],s=0,h=e;h<t;h+=i){var l=n[h],u=n[h+1];o[s++]=r[0]*l+r[2]*u+r[4],o[s++]=r[1]*l+r[3]*u+r[5]}return a&&o.length!=s&&(o.length=s),o}function Qs(n,e,t,i,r,a,o){for(var s=o||[],h=Math.cos(r),l=Math.sin(r),u=a[0],f=a[1],c=0,v=e;v<t;v+=i){var d=n[v]-u,p=n[v+1]-f;s[c++]=u+d*h-p*l,s[c++]=f+d*l+p*h;for(var _=v+2;_<v+i;++_)s[c++]=n[_]}return o&&s.length!=c&&(s.length=c),s}function Js(n,e,t,i,r,a,o,s){for(var h=s||[],l=o[0],u=o[1],f=0,c=e;c<t;c+=i){var v=n[c]-l,d=n[c+1]-u;h[f++]=l+r*v,h[f++]=u+a*d;for(var p=c+2;p<c+i;++p)h[f++]=n[p]}return s&&h.length!=f&&(h.length=f),h}function th(n,e,t,i,r,a,o){for(var s=o||[],h=0,l=e;l<t;l+=i){s[h++]=n[l]+r,s[h++]=n[l+1]+a;for(var u=l+2;u<l+i;++u)s[h++]=n[u]}return o&&s.length!=h&&(s.length=h),s}var eh=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,r){i.__proto__=r}||function(i,r){for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(i[a]=r[a])},n(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");n(e,t);function i(){this.constructor=e}e.prototype=t===null?Object.create(t):(i.prototype=t.prototype,new i)}}(),Zr=pe(),nh=function(n){eh(e,n);function e(){var t=n.call(this)||this;return t.extent_=Zt(),t.extentRevision_=-1,t.simplifiedGeometryMaxMinSquaredTolerance=0,t.simplifiedGeometryRevision=0,t.simplifyTransformedInternal=Qo(function(i,r,a){if(!a)return this.getSimplifiedGeometry(r);var o=this.clone();return o.applyTransform(a),o.getSimplifiedGeometry(r)}),t}return e.prototype.simplifyTransformed=function(t,i){return this.simplifyTransformedInternal(this.getRevision(),t,i)},e.prototype.clone=function(){return k()},e.prototype.closestPointXY=function(t,i,r,a){return k()},e.prototype.containsXY=function(t,i){var r=this.getClosestPoint([t,i]);return r[0]===t&&r[1]===i},e.prototype.getClosestPoint=function(t,i){var r=i||[NaN,NaN];return this.closestPointXY(t[0],t[1],r,1/0),r},e.prototype.intersectsCoordinate=function(t){return this.containsXY(t[0],t[1])},e.prototype.computeExtent=function(t){return k()},e.prototype.getExtent=function(t){if(this.extentRevision_!=this.getRevision()){var i=this.computeExtent(this.extent_);(isNaN(i[0])||isNaN(i[1]))&&Cn(i),this.extentRevision_=this.getRevision()}return Ms(this.extent_,t)},e.prototype.rotate=function(t,i){k()},e.prototype.scale=function(t,i,r){k()},e.prototype.simplify=function(t){return this.getSimplifiedGeometry(t*t)},e.prototype.getSimplifiedGeometry=function(t){return k()},e.prototype.getType=function(){return k()},e.prototype.applyTransform=function(t){k()},e.prototype.intersectsExtent=function(t){return k()},e.prototype.translate=function(t,i){k()},e.prototype.transform=function(t,i){var r=Q(t),a=r.getUnits()==Ft.TILE_PIXELS?function(o,s,h){var l=r.getExtent(),u=r.getWorldExtent(),f=Rt(u)/Rt(l);return ke(Zr,u[0],u[3],f,-f,0,0,0),Ys(o,0,o.length,h,Zr,s),Ve(r,i)(o,s,h)}:Ve(r,i);return this.applyTransform(a),this},e}(yt),ih=nh,rh=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,r){i.__proto__=r}||function(i,r){for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(i[a]=r[a])},n(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");n(e,t);function i(){this.constructor=e}e.prototype=t===null?Object.create(t):(i.prototype=t.prototype,new i)}}(),ah=function(n){rh(e,n);function e(){var t=n.call(this)||this;return t.layout=vt.XY,t.stride=2,t.flatCoordinates=null,t}return e.prototype.computeExtent=function(t){return _s(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t)},e.prototype.getCoordinates=function(){return k()},e.prototype.getFirstCoordinate=function(){return this.flatCoordinates.slice(0,this.stride)},e.prototype.getFlatCoordinates=function(){return this.flatCoordinates},e.prototype.getLastCoordinate=function(){return this.flatCoordinates.slice(this.flatCoordinates.length-this.stride)},e.prototype.getLayout=function(){return this.layout},e.prototype.getSimplifiedGeometry=function(t){if(this.simplifiedGeometryRevision!==this.getRevision()&&(this.simplifiedGeometryMaxMinSquaredTolerance=0,this.simplifiedGeometryRevision=this.getRevision()),t<0||this.simplifiedGeometryMaxMinSquaredTolerance!==0&&t<=this.simplifiedGeometryMaxMinSquaredTolerance)return this;var i=this.getSimplifiedGeometryInternal(t),r=i.getFlatCoordinates();return r.length<this.flatCoordinates.length?i:(this.simplifiedGeometryMaxMinSquaredTolerance=t,this)},e.prototype.getSimplifiedGeometryInternal=function(t){return this},e.prototype.getStride=function(){return this.stride},e.prototype.setFlatCoordinates=function(t,i){this.stride=Br(t),this.layout=t,this.flatCoordinates=i},e.prototype.setCoordinates=function(t,i){k()},e.prototype.setLayout=function(t,i,r){var a;if(t)a=Br(t);else{for(var o=0;o<r;++o)if(i.length===0){this.layout=vt.XY,this.stride=2;return}else i=i[0];a=i.length,t=oh(a)}this.layout=t,this.stride=a},e.prototype.applyTransform=function(t){this.flatCoordinates&&(t(this.flatCoordinates,this.flatCoordinates,this.stride),this.changed())},e.prototype.rotate=function(t,i){var r=this.getFlatCoordinates();if(r){var a=this.getStride();Qs(r,0,r.length,a,t,i,r),this.changed()}},e.prototype.scale=function(t,i,r){var a=i;a===void 0&&(a=t);var o=r;o||(o=qe(this.getExtent()));var s=this.getFlatCoordinates();if(s){var h=this.getStride();Js(s,0,s.length,h,t,a,o,s),this.changed()}},e.prototype.translate=function(t,i){var r=this.getFlatCoordinates();if(r){var a=this.getStride();th(r,0,r.length,a,t,i,r),this.changed()}},e}(ih);function oh(n){var e;return n==2?e=vt.XY:n==3?e=vt.XYZ:n==4&&(e=vt.XYZM),e}function Br(n){var e;return n==vt.XY?e=2:n==vt.XYZ||n==vt.XYM?e=3:n==vt.XYZM&&(e=4),e}var Ci=ah;function Vr(n,e,t,i,r,a,o){var s=n[e],h=n[e+1],l=n[t]-s,u=n[t+1]-h,f;if(l===0&&u===0)f=e;else{var c=((r-s)*l+(a-h)*u)/(l*l+u*u);if(c>1)f=t;else if(c>0){for(var v=0;v<i;++v)o[v]=ws(n[e+v],n[t+v],c);o.length=i;return}else f=e}for(var v=0;v<i;++v)o[v]=n[f+v];o.length=i}function Wr(n,e,t,i,r){var a=n[e],o=n[e+1];for(e+=i;e<t;e+=i){var s=n[e],h=n[e+1],l=_e(a,o,s,h);l>r&&(r=l),a=s,o=h}return r}function sh(n,e,t,i,r){for(var a=0,o=t.length;a<o;++a){var s=t[a];r=Wr(n,e,s,i,r),e=s}return r}function Hr(n,e,t,i,r,a,o,s,h,l,u){if(e==t)return l;var f,c;if(r===0)if(c=_e(o,s,n[e],n[e+1]),c<l){for(f=0;f<i;++f)h[f]=n[e+f];return h.length=i,c}else return l;for(var v=u||[NaN,NaN],d=e+i;d<t;)if(Vr(n,d-i,d,i,o,s,v),c=_e(o,s,v[0],v[1]),c<l){for(l=c,f=0;f<i;++f)h[f]=v[f];h.length=i,d+=i}else d+=i*Math.max((Math.sqrt(c)-Math.sqrt(l))/r|0,1);if(a&&(Vr(n,t-i,e,i,o,s,v),c=_e(o,s,v[0],v[1]),c<l)){for(l=c,f=0;f<i;++f)h[f]=v[f];h.length=i}return l}function hh(n,e,t,i,r,a,o,s,h,l,u){for(var f=u||[NaN,NaN],c=0,v=t.length;c<v;++c){var d=t[c];l=Hr(n,e,d,i,r,a,o,s,h,l,f),e=d}return l}function lh(n,e,t,i){for(var r=0,a=t.length;r<a;++r)n[e++]=t[r];return e}function Yr(n,e,t,i){for(var r=0,a=t.length;r<a;++r)for(var o=t[r],s=0;s<i;++s)n[e++]=o[s];return e}function uh(n,e,t,i,r){for(var a=r||[],o=0,s=0,h=t.length;s<h;++s){var l=Yr(n,e,t[s],i);a[o++]=l,e=l}return a.length=o,a}function fh(n,e,t,i,r,a,o){var s=(t-e)/i;if(s<3){for(;e<t;e+=i)a[o++]=n[e],a[o++]=n[e+1];return o}var h=new Array(s);h[0]=1,h[s-1]=1;for(var l=[e,t-i],u=0;l.length>0;){for(var f=l.pop(),c=l.pop(),v=0,d=n[c],p=n[c+1],_=n[f],y=n[f+1],m=c+i;m<f;m+=i){var g=n[m],M=n[m+1],x=Rs(g,M,d,p,_,y);x>v&&(u=m,v=x)}v>r&&(h[(u-e)/i]=1,c+i<u&&l.push(c,u),u+i<f&&l.push(u,f))}for(var m=0;m<s;++m)h[m]&&(a[o++]=n[e+m*i],a[o++]=n[e+m*i+1]);return o}function Te(n,e){return e*Math.round(n/e)}function ch(n,e,t,i,r,a,o){if(e==t)return o;var s=Te(n[e],r),h=Te(n[e+1],r);e+=i,a[o++]=s,a[o++]=h;var l,u;do if(l=Te(n[e],r),u=Te(n[e+1],r),e+=i,e==t)return a[o++]=l,a[o++]=u,o;while(l==s&&u==h);for(;e<t;){var f=Te(n[e],r),c=Te(n[e+1],r);if(e+=i,!(f==l&&c==u)){var v=l-s,d=u-h,p=f-s,_=c-h;if(v*_==d*p&&(v<0&&p<v||v==p||v>0&&p>v)&&(d<0&&_<d||d==_||d>0&&_>d)){l=f,u=c;continue}a[o++]=l,a[o++]=u,s=l,h=u,l=f,u=c}}return a[o++]=l,a[o++]=u,o}function vh(n,e,t,i,r,a,o,s){for(var h=0,l=t.length;h<l;++h){var u=t[h];o=ch(n,e,u,i,r,a,o),s.push(o),e=u}return o}function Qr(n,e,t,i,r){for(var a=r!==void 0?r:[],o=0,s=e;s<t;s+=i)a[o++]=n.slice(s,s+i);return a.length=o,a}function dh(n,e,t,i,r){for(var a=r!==void 0?r:[],o=0,s=0,h=t.length;s<h;++s){var l=t[s];a[o++]=Qr(n,e,l,i,a[o]),e=l}return a.length=o,a}function Jr(n,e,t,i){for(var r=0,a=n[t-i],o=n[t-i+1];e<t;e+=i){var s=n[e],h=n[e+1];r+=o*s-a*h,a=s,o=h}return r/2}function ph(n,e,t,i){for(var r=0,a=0,o=t.length;a<o;++a){var s=t[a];r+=Jr(n,e,s,i),e=s}return r}var _h=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,r){i.__proto__=r}||function(i,r){for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(i[a]=r[a])},n(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");n(e,t);function i(){this.constructor=e}e.prototype=t===null?Object.create(t):(i.prototype=t.prototype,new i)}}(),yh=function(n){_h(e,n);function e(t,i){var r=n.call(this)||this;return r.maxDelta_=-1,r.maxDeltaRevision_=-1,i!==void 0&&!Array.isArray(t[0])?r.setFlatCoordinates(i,t):r.setCoordinates(t,i),r}return e.prototype.clone=function(){return new e(this.flatCoordinates.slice(),this.layout)},e.prototype.closestPointXY=function(t,i,r,a){return a<wr(this.getExtent(),t,i)?a:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(Wr(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),Hr(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,this.maxDelta_,!0,t,i,r,a))},e.prototype.getArea=function(){return Jr(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)},e.prototype.getCoordinates=function(){return Qr(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)},e.prototype.getSimplifiedGeometryInternal=function(t){var i=[];return i.length=fh(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t,i,0),new e(i,vt.XY)},e.prototype.getType=function(){return Tn.LINEAR_RING},e.prototype.intersectsExtent=function(t){return!1},e.prototype.setCoordinates=function(t,i){this.setLayout(i,t,1),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=Yr(this.flatCoordinates,0,t,this.stride),this.changed()},e}(Ci),ta=yh,gh=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,r){i.__proto__=r}||function(i,r){for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(i[a]=r[a])},n(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");n(e,t);function i(){this.constructor=e}e.prototype=t===null?Object.create(t):(i.prototype=t.prototype,new i)}}(),mh=function(n){gh(e,n);function e(t,i){var r=n.call(this)||this;return r.setCoordinates(t,i),r}return e.prototype.clone=function(){var t=new e(this.flatCoordinates.slice(),this.layout);return t.applyProperties(this),t},e.prototype.closestPointXY=function(t,i,r,a){var o=this.flatCoordinates,s=_e(t,i,o[0],o[1]);if(s<a){for(var h=this.stride,l=0;l<h;++l)r[l]=o[l];return r.length=h,s}else return a},e.prototype.getCoordinates=function(){return this.flatCoordinates?this.flatCoordinates.slice():[]},e.prototype.computeExtent=function(t){return ps(this.flatCoordinates,t)},e.prototype.getType=function(){return Tn.POINT},e.prototype.intersectsExtent=function(t){return Sr(t,this.flatCoordinates[0],this.flatCoordinates[1])},e.prototype.setCoordinates=function(t,i){this.setLayout(i,t,0),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=lh(this.flatCoordinates,0,t,this.stride),this.changed()},e}(Ci),Mh=mh;function Eh(n,e,t,i,r){var a=Nr(r,function(o){return!ne(n,e,t,i,o[0],o[1])});return!a}function ne(n,e,t,i,r,a){for(var o=0,s=n[t-i],h=n[t-i+1];e<t;e+=i){var l=n[e],u=n[e+1];h<=a?u>a&&(l-s)*(a-h)-(r-s)*(u-h)>0&&o++:u<=a&&(l-s)*(a-h)-(r-s)*(u-h)<0&&o--,s=l,h=u}return o!==0}function ea(n,e,t,i,r,a){if(t.length===0||!ne(n,e,t[0],i,r,a))return!1;for(var o=1,s=t.length;o<s;++o)if(ne(n,t[o-1],t[o],i,r,a))return!1;return!0}function xh(n,e,t,i,r,a,o){for(var s,h,l,u,f,c,v,d=r[a+1],p=[],_=0,y=t.length;_<y;++_){var m=t[_];for(u=n[m-i],c=n[m-i+1],s=e;s<m;s+=i)f=n[s],v=n[s+1],(d<=c&&v<=d||c<=d&&d<=v)&&(l=(d-c)/(v-c)*(f-u)+u,p.push(l)),u=f,c=v}var g=NaN,M=-1/0;for(p.sort(si),u=p[0],s=1,h=p.length;s<h;++s){f=p[s];var x=Math.abs(f-u);x>M&&(l=(u+f)/2,ea(n,e,t,i,l,d)&&(g=l,M=x)),u=f}return isNaN(g)&&(g=r[a]),o?(o.push(g,d,M),o):[g,d,M]}function Th(n,e,t,i,r){var a;for(e+=i;e<t;e+=i)if(a=r(n.slice(e-i,e),n.slice(e,e+i)),a)return a;return!1}function na(n,e,t,i,r){var a=Lr(Zt(),n,e,t,i);return vi(r,a)?Ir(r,a)||a[0]>=r[0]&&a[2]<=r[2]||a[1]>=r[1]&&a[3]<=r[3]?!0:Th(n,e,t,i,function(o,s){return Es(r,o,s)}):!1}function Ch(n,e,t,i,r){return!!(na(n,e,t,i,r)||ne(n,e,t,i,r[0],r[1])||ne(n,e,t,i,r[0],r[3])||ne(n,e,t,i,r[2],r[1])||ne(n,e,t,i,r[2],r[3]))}function Oh(n,e,t,i,r){if(!Ch(n,e,t[0],i,r))return!1;if(t.length===1)return!0;for(var a=1,o=t.length;a<o;++a)if(Eh(n,t[a-1],t[a],i,r)&&!na(n,t[a-1],t[a],i,r))return!1;return!0}function Rh(n,e,t,i){for(;e<t-i;){for(var r=0;r<i;++r){var a=n[e+r];n[e+r]=n[t-i+r],n[t-i+r]=a}e+=i,t-=i}}function ia(n,e,t,i){for(var r=0,a=n[t-i],o=n[t-i+1];e<t;e+=i){var s=n[e],h=n[e+1];r+=(s-a)*(h+o),a=s,o=h}return r===0?void 0:r>0}function Ph(n,e,t,i,r){for(var a=r!==void 0?r:!1,o=0,s=t.length;o<s;++o){var h=t[o],l=ia(n,e,h,i);if(o===0){if(a&&l||!a&&!l)return!1}else if(a&&!l||!a&&l)return!1;e=h}return!0}function ra(n,e,t,i,r){for(var a=r!==void 0?r:!1,o=0,s=t.length;o<s;++o){var h=t[o],l=ia(n,e,h,i),u=o===0?a&&l||!a&&!l:a&&!l||!a&&l;u&&Rh(n,e,h,i),e=h}return e}var wh=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,r){i.__proto__=r}||function(i,r){for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(i[a]=r[a])},n(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");n(e,t);function i(){this.constructor=e}e.prototype=t===null?Object.create(t):(i.prototype=t.prototype,new i)}}(),aa=function(n){wh(e,n);function e(t,i,r){var a=n.call(this)||this;return a.ends_=[],a.flatInteriorPointRevision_=-1,a.flatInteriorPoint_=null,a.maxDelta_=-1,a.maxDeltaRevision_=-1,a.orientedRevision_=-1,a.orientedFlatCoordinates_=null,i!==void 0&&r?(a.setFlatCoordinates(i,t),a.ends_=r):a.setCoordinates(t,i),a}return e.prototype.appendLinearRing=function(t){this.flatCoordinates?Ho(this.flatCoordinates,t.getFlatCoordinates()):this.flatCoordinates=t.getFlatCoordinates().slice(),this.ends_.push(this.flatCoordinates.length),this.changed()},e.prototype.clone=function(){var t=new e(this.flatCoordinates.slice(),this.layout,this.ends_.slice());return t.applyProperties(this),t},e.prototype.closestPointXY=function(t,i,r,a){return a<wr(this.getExtent(),t,i)?a:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(sh(this.flatCoordinates,0,this.ends_,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),hh(this.flatCoordinates,0,this.ends_,this.stride,this.maxDelta_,!0,t,i,r,a))},e.prototype.containsXY=function(t,i){return ea(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride,t,i)},e.prototype.getArea=function(){return ph(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride)},e.prototype.getCoordinates=function(t){var i;return t!==void 0?(i=this.getOrientedFlatCoordinates().slice(),ra(i,0,this.ends_,this.stride,t)):i=this.flatCoordinates,dh(i,0,this.ends_,this.stride)},e.prototype.getEnds=function(){return this.ends_},e.prototype.getFlatInteriorPoint=function(){if(this.flatInteriorPointRevision_!=this.getRevision()){var t=qe(this.getExtent());this.flatInteriorPoint_=xh(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride,t,0),this.flatInteriorPointRevision_=this.getRevision()}return this.flatInteriorPoint_},e.prototype.getInteriorPoint=function(){return new Mh(this.getFlatInteriorPoint(),vt.XYM)},e.prototype.getLinearRingCount=function(){return this.ends_.length},e.prototype.getLinearRing=function(t){return t<0||this.ends_.length<=t?null:new ta(this.flatCoordinates.slice(t===0?0:this.ends_[t-1],this.ends_[t]),this.layout)},e.prototype.getLinearRings=function(){for(var t=this.layout,i=this.flatCoordinates,r=this.ends_,a=[],o=0,s=0,h=r.length;s<h;++s){var l=r[s],u=new ta(i.slice(o,l),t);a.push(u),o=l}return a},e.prototype.getOrientedFlatCoordinates=function(){if(this.orientedRevision_!=this.getRevision()){var t=this.flatCoordinates;Ph(t,0,this.ends_,this.stride)?this.orientedFlatCoordinates_=t:(this.orientedFlatCoordinates_=t.slice(),this.orientedFlatCoordinates_.length=ra(this.orientedFlatCoordinates_,0,this.ends_,this.stride)),this.orientedRevision_=this.getRevision()}return this.orientedFlatCoordinates_},e.prototype.getSimplifiedGeometryInternal=function(t){var i=[],r=[];return i.length=vh(this.flatCoordinates,0,this.ends_,this.stride,Math.sqrt(t),i,0,r),new e(i,vt.XY,r)},e.prototype.getType=function(){return Tn.POLYGON},e.prototype.intersectsExtent=function(t){return Oh(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride,t)},e.prototype.setCoordinates=function(t,i){this.setLayout(i,t,2),this.flatCoordinates||(this.flatCoordinates=[]);var r=uh(this.flatCoordinates,0,t,this.stride,this.ends_);this.flatCoordinates.length=r.length===0?0:r[r.length-1],this.changed()},e}(Ci);function oa(n){var e=n[0],t=n[1],i=n[2],r=n[3],a=[e,t,e,r,i,r,i,t,e,t];return new aa(a,vt.XY,[a.length])}var ie={PRERENDER:"prerender",POSTRENDER:"postrender",PRECOMPOSE:"precompose",POSTCOMPOSE:"postcompose",RENDERCOMPLETE:"rendercomplete"},mt={IDLE:0,LOADING:1,LOADED:2,ERROR:3,EMPTY:4};function sa(n,e,t){return t===void 0&&(t=[0,0]),t[0]=n[0]+2*e,t[1]=n[1]+2*e,t}function ha(n){return n[0]>0&&n[1]>0}function la(n,e,t){return t===void 0&&(t=[0,0]),t[0]=n[0]*e+.5|0,t[1]=n[1]*e+.5|0,t}function St(n,e){return Array.isArray(n)?n:(e===void 0?e=[n,n]:(e[0]=n,e[1]=n),e)}function Ih(n){return typeof n=="string"?n:Sh(n)}function Sh(n){var e=n[0];e!=(e|0)&&(e=e+.5|0);var t=n[1];t!=(t|0)&&(t=t+.5|0);var i=n[2];i!=(i|0)&&(i=i+.5|0);var r=n[3]===void 0?1:n[3];return"rgba("+e+","+t+","+i+","+r+")"}function An(n,e,t,i){var r;return t&&t.length?r=t.shift():xr?r=new OffscreenCanvas(n||300,e||300):(r=document.createElement("canvas"),r.style.all="unset"),n&&(r.width=n),e&&(r.height=e),r.getContext("2d",i)}function Ah(n){var e=n.offsetWidth,t=getComputedStyle(n);return e+=parseInt(t.marginLeft,10)+parseInt(t.marginRight,10),e}function Lh(n){var e=n.offsetHeight,t=getComputedStyle(n);return e+=parseInt(t.marginTop,10)+parseInt(t.marginBottom,10),e}function ua(n,e){var t=e.parentNode;t&&t.replaceChild(n,e)}function Ln(n){return n&&n.parentNode?n.parentNode.removeChild(n):null}function fa(n){for(;n.lastChild;)n.removeChild(n.lastChild)}function Nh(n,e){for(var t=n.childNodes,i=0;;++i){var r=t[i],a=e[i];if(!r&&!a)break;if(r!==a){if(!r){n.appendChild(a);continue}if(!a){n.removeChild(r),--i;continue}n.insertBefore(a,r)}}}var Nn="ol-hidden",bh="ol-selectable",bn="ol-unselectable",Oi="ol-control",ca="ol-collapsed";function va(n){return n===1?"":String(Math.round(n*100)/100)}var Dh=new yt,Fh=new Ue;Fh.setSize=function(){console.warn("labelCache is deprecated.")};var z={OPACITY:"opacity",VISIBLE:"visible",EXTENT:"extent",Z_INDEX:"zIndex",MAX_RESOLUTION:"maxResolution",MIN_RESOLUTION:"minResolution",MAX_ZOOM:"maxZoom",MIN_ZOOM:"minZoom",SOURCE:"source"},Gh=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,r){i.__proto__=r}||function(i,r){for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(i[a]=r[a])},n(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");n(e,t);function i(){this.constructor=e}e.prototype=t===null?Object.create(t):(i.prototype=t.prototype,new i)}}(),jh=function(n){Gh(e,n);function e(t){var i=n.call(this)||this;i.on,i.once,i.un;var r=H({},t);return typeof t.properties=="object"&&(delete r.properties,H(r,t.properties)),r[z.OPACITY]=t.opacity!==void 0?t.opacity:1,$(typeof r[z.OPACITY]=="number",64),r[z.VISIBLE]=t.visible!==void 0?t.visible:!0,r[z.Z_INDEX]=t.zIndex,r[z.MAX_RESOLUTION]=t.maxResolution!==void 0?t.maxResolution:1/0,r[z.MIN_RESOLUTION]=t.minResolution!==void 0?t.minResolution:0,r[z.MIN_ZOOM]=t.minZoom!==void 0?t.minZoom:-1/0,r[z.MAX_ZOOM]=t.maxZoom!==void 0?t.maxZoom:1/0,i.className_=r.className!==void 0?t.className:"ol-layer",delete r.className,i.setProperties(r),i.state_=null,i}return e.prototype.getClassName=function(){return this.className_},e.prototype.getLayerState=function(t){var i=this.state_||{layer:this,managed:t===void 0?!0:t},r=this.getZIndex();return i.opacity=nt(Math.round(this.getOpacity()*100)/100,0,1),i.sourceState=this.getSourceState(),i.visible=this.getVisible(),i.extent=this.getExtent(),i.zIndex=r===void 0&&!i.managed?1/0:r,i.maxResolution=this.getMaxResolution(),i.minResolution=Math.max(this.getMinResolution(),0),i.minZoom=this.getMinZoom(),i.maxZoom=this.getMaxZoom(),this.state_=i,i},e.prototype.getLayersArray=function(t){return k()},e.prototype.getLayerStatesArray=function(t){return k()},e.prototype.getExtent=function(){return this.get(z.EXTENT)},e.prototype.getMaxResolution=function(){return this.get(z.MAX_RESOLUTION)},e.prototype.getMinResolution=function(){return this.get(z.MIN_RESOLUTION)},e.prototype.getMinZoom=function(){return this.get(z.MIN_ZOOM)},e.prototype.getMaxZoom=function(){return this.get(z.MAX_ZOOM)},e.prototype.getOpacity=function(){return this.get(z.OPACITY)},e.prototype.getSourceState=function(){return k()},e.prototype.getVisible=function(){return this.get(z.VISIBLE)},e.prototype.getZIndex=function(){return this.get(z.Z_INDEX)},e.prototype.setExtent=function(t){this.set(z.EXTENT,t)},e.prototype.setMaxResolution=function(t){this.set(z.MAX_RESOLUTION,t)},e.prototype.setMinResolution=function(t){this.set(z.MIN_RESOLUTION,t)},e.prototype.setMaxZoom=function(t){this.set(z.MAX_ZOOM,t)},e.prototype.setMinZoom=function(t){this.set(z.MIN_ZOOM,t)},e.prototype.setOpacity=function(t){$(typeof t=="number",64),this.set(z.OPACITY,t)},e.prototype.setVisible=function(t){this.set(z.VISIBLE,t)},e.prototype.setZIndex=function(t){this.set(z.Z_INDEX,t)},e.prototype.disposeInternal=function(){this.state_&&(this.state_.layer=null,this.state_=null),n.prototype.disposeInternal.call(this)},e}(yt),da=jh,Ce={UNDEFINED:"undefined",LOADING:"loading",READY:"ready",ERROR:"error"},$h=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,r){i.__proto__=r}||function(i,r){for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(i[a]=r[a])},n(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");n(e,t);function i(){this.constructor=e}e.prototype=t===null?Object.create(t):(i.prototype=t.prototype,new i)}}(),zh=function(n){$h(e,n);function e(t){var i=this,r=H({},t);delete r.source,i=n.call(this,r)||this,i.on,i.once,i.un,i.mapPrecomposeKey_=null,i.mapRenderKey_=null,i.sourceChangeKey_=null,i.renderer_=null,t.render&&(i.render=t.render),t.map&&i.setMap(t.map),i.addChangeListener(z.SOURCE,i.handleSourcePropertyChange_);var a=t.source?t.source:null;return i.setSource(a),i}return e.prototype.getLayersArray=function(t){var i=t||[];return i.push(this),i},e.prototype.getLayerStatesArray=function(t){var i=t||[];return i.push(this.getLayerState()),i},e.prototype.getSource=function(){return this.get(z.SOURCE)||null},e.prototype.getSourceState=function(){var t=this.getSource();return t?t.getState():Ce.UNDEFINED},e.prototype.handleSourceChange_=function(){this.changed()},e.prototype.handleSourcePropertyChange_=function(){this.sourceChangeKey_&&(B(this.sourceChangeKey_),this.sourceChangeKey_=null);var t=this.getSource();t&&(this.sourceChangeKey_=D(t,S.CHANGE,this.handleSourceChange_,this)),this.changed()},e.prototype.getFeatures=function(t){return this.renderer_?this.renderer_.getFeatures(t):new Promise(function(i){return i([])})},e.prototype.render=function(t,i){var r=this.getRenderer();if(r.prepareFrame(t))return r.renderFrame(t,i)},e.prototype.setMap=function(t){this.mapPrecomposeKey_&&(B(this.mapPrecomposeKey_),this.mapPrecomposeKey_=null),t||this.changed(),this.mapRenderKey_&&(B(this.mapRenderKey_),this.mapRenderKey_=null),t&&(this.mapPrecomposeKey_=D(t,ie.PRECOMPOSE,function(i){var r=i,a=r.frameState.layerStatesArray,o=this.getLayerState(!1);$(!a.some(function(s){return s.layer===o.layer}),67),a.push(o)},this),this.mapRenderKey_=D(this,S.CHANGE,t.render,t),this.changed())},e.prototype.setSource=function(t){this.set(z.SOURCE,t)},e.prototype.getRenderer=function(){return this.renderer_||(this.renderer_=this.createRenderer()),this.renderer_},e.prototype.hasRenderer=function(){return!!this.renderer_},e.prototype.createRenderer=function(){return null},e.prototype.disposeInternal=function(){this.renderer_&&(this.renderer_.dispose(),delete this.renderer_),this.setSource(null),n.prototype.disposeInternal.call(this)},e}(da);function Dn(n,e){if(!n.visible)return!1;var t=e.resolution;if(t<n.minResolution||t>=n.maxResolution)return!1;var i=e.zoom;return i>n.minZoom&&i<=n.maxZoom}var Uh=zh,kh=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,r){i.__proto__=r}||function(i,r){for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(i[a]=r[a])},n(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");n(e,t);function i(){this.constructor=e}e.prototype=t===null?Object.create(t):(i.prototype=t.prototype,new i)}}(),Kh=function(n){kh(e,n);function e(t){var i=n.call(this)||this;return i.boundHandleImageChange_=i.handleImageChange_.bind(i),i.layer_=t,i.declutterExecutorGroup=null,i}return e.prototype.getFeatures=function(t){return k()},e.prototype.prepareFrame=function(t){return k()},e.prototype.renderFrame=function(t,i){return k()},e.prototype.loadedTileCallback=function(t,i,r){t[i]||(t[i]={}),t[i][r.tileCoord.toString()]=r},e.prototype.createLoadedTileFinder=function(t,i,r){return function(a,o){var s=this.loadedTileCallback.bind(this,r,a);return t.forEachLoadedTile(i,a,o,s)}.bind(this)},e.prototype.forEachFeatureAtCoordinate=function(t,i,r,a,o){},e.prototype.getDataAtPixel=function(t,i,r){return null},e.prototype.getLayer=function(){return this.layer_},e.prototype.handleFontsChanged=function(){},e.prototype.handleImageChange_=function(t){var i=t.target;i.getState()===mt.LOADED&&this.renderIfReadyAndVisible()},e.prototype.loadImage=function(t){var i=t.getState();return i!=mt.LOADED&&i!=mt.ERROR&&t.addEventListener(S.CHANGE,this.boundHandleImageChange_),i==mt.IDLE&&(t.load(),i=t.getState()),i==mt.LOADED},e.prototype.renderIfReadyAndVisible=function(){var t=this.getLayer();t.getVisible()&&t.getSourceState()==Ce.READY&&t.changed()},e}(_r),qh=Kh,Xh=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,r){i.__proto__=r}||function(i,r){for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(i[a]=r[a])},n(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");n(e,t);function i(){this.constructor=e}e.prototype=t===null?Object.create(t):(i.prototype=t.prototype,new i)}}(),Zh=function(n){Xh(e,n);function e(t,i,r,a){var o=n.call(this,t)||this;return o.inversePixelTransform=i,o.frameState=r,o.context=a,o}return e}(Yt),pa=Zh,Bh=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,r){i.__proto__=r}||function(i,r){for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(i[a]=r[a])},n(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");n(e,t);function i(){this.constructor=e}e.prototype=t===null?Object.create(t):(i.prototype=t.prototype,new i)}}(),Vh=function(n){Bh(e,n);function e(t){var i=n.call(this,t)||this;return i.container=null,i.renderedResolution,i.tempTransform=pe(),i.pixelTransform=pe(),i.inversePixelTransform=pe(),i.context=null,i.containerReused=!1,i}return e.prototype.useContainer=function(t,i,r){var a=this.getLayer().getClassName(),o,s;if(t&&t.style.opacity===va(r)&&t.className===a){var h=t.firstElementChild;h instanceof HTMLCanvasElement&&(s=h.getContext("2d"))}if(s&&s.canvas.style.transform===i?(this.container=t,this.context=s,this.containerReused=!0):this.containerReused&&(this.container=null,this.context=null,this.containerReused=!1),!this.container){o=document.createElement("div"),o.className=a;var l=o.style;l.position="absolute",l.width="100%",l.height="100%",s=An();var h=s.canvas;o.appendChild(h),l=h.style,l.position="absolute",l.left="0",l.transformOrigin="top left",this.container=o,this.context=s}},e.prototype.clipUnrotated=function(t,i,r){var a=Jt(r),o=wn(r),s=Pn(r),h=Rn(r);dt(i.coordinateToPixelTransform,a),dt(i.coordinateToPixelTransform,o),dt(i.coordinateToPixelTransform,s),dt(i.coordinateToPixelTransform,h);var l=this.inversePixelTransform;dt(l,a),dt(l,o),dt(l,s),dt(l,h),t.save(),t.beginPath(),t.moveTo(Math.round(a[0]),Math.round(a[1])),t.lineTo(Math.round(o[0]),Math.round(o[1])),t.lineTo(Math.round(s[0]),Math.round(s[1])),t.lineTo(Math.round(h[0]),Math.round(h[1])),t.clip()},e.prototype.dispatchRenderEvent_=function(t,i,r){var a=this.getLayer();if(a.hasListener(t)){var o=new pa(t,this.inversePixelTransform,r,i);a.dispatchEvent(o)}},e.prototype.preRender=function(t,i){this.dispatchRenderEvent_(ie.PRERENDER,t,i)},e.prototype.postRender=function(t,i){this.dispatchRenderEvent_(ie.POSTRENDER,t,i)},e.prototype.getRenderTransform=function(t,i,r,a,o,s,h){var l=o/2,u=s/2,f=a/i,c=-f,v=-t[0]+h,d=-t[1];return ke(this.tempTransform,l,u,f,c,-r,v,d)},e.prototype.getDataAtPixel=function(t,i,r){var a=dt(this.inversePixelTransform,t.slice()),o=this.context,s=this.getLayer(),h=s.getExtent();if(h){var l=dt(i.pixelToCoordinateTransform,t.slice());if(!li(h,l))return null}var u;try{var f=Math.round(a[0]),c=Math.round(a[1]),v=document.createElement("canvas"),d=v.getContext("2d");v.width=1,v.height=1,d.clearRect(0,0,1,1),d.drawImage(o.canvas,f,c,1,1,0,0,1,1),u=d.getImageData(0,0,1,1).data}catch(p){return p.name==="SecurityError"?new Uint8Array:u}return u[3]===0?null:u},e}(qh),Wh=Vh,Mt={ANIMATING:0,INTERACTING:1},Hh=function(){function n(){this.cache_={},this.cacheSize_=0,this.maxCacheSize_=32}return n.prototype.clear=function(){this.cache_={},this.cacheSize_=0},n.prototype.canExpireCache=function(){return this.cacheSize_>this.maxCacheSize_},n.prototype.expire=function(){if(this.canExpireCache()){var e=0;for(var t in this.cache_){var i=this.cache_[t];(e++&3)==0&&!i.hasListener()&&(delete this.cache_[t],--this.cacheSize_)}}},n.prototype.get=function(e,t,i){var r=_a(e,t,i);return r in this.cache_?this.cache_[r]:null},n.prototype.set=function(e,t,i,r){var a=_a(e,t,i);this.cache_[a]=r,++this.cacheSize_},n.prototype.setSize=function(e){this.maxCacheSize_=e,this.expire()},n}();function _a(n,e,t){var i=t?Ih(t):"null";return e+":"+n+":"+i}var ya=new Hh,Yh=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,r){i.__proto__=r}||function(i,r){for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(i[a]=r[a])},n(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");n(e,t);function i(){this.constructor=e}e.prototype=t===null?Object.create(t):(i.prototype=t.prototype,new i)}}(),Qh=function(n){Yh(e,n);function e(t,i,r,a){var o=n.call(this)||this;return o.extent=t,o.pixelRatio_=r,o.resolution=i,o.state=a,o}return e.prototype.changed=function(){this.dispatchEvent(S.CHANGE)},e.prototype.getExtent=function(){return this.extent},e.prototype.getImage=function(){return k()},e.prototype.getPixelRatio=function(){return this.pixelRatio_},e.prototype.getResolution=function(){return this.resolution},e.prototype.getState=function(){return this.state},e.prototype.load=function(){k()},e}(Ue),Jh=Qh,tl=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,r){i.__proto__=r}||function(i,r){for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(i[a]=r[a])},n(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");n(e,t);function i(){this.constructor=e}e.prototype=t===null?Object.create(t):(i.prototype=t.prototype,new i)}}();(function(n){tl(e,n);function e(t,i,r,a,o,s){var h=n.call(this,t,i,r,mt.IDLE)||this;return h.src_=a,h.image_=new Image,o!==null&&(h.image_.crossOrigin=o),h.unlisten_=null,h.state=mt.IDLE,h.imageLoadFunction_=s,h}return e.prototype.getImage=function(){return this.image_},e.prototype.handleImageError_=function(){this.state=mt.ERROR,this.unlistenImage_(),this.changed()},e.prototype.handleImageLoad_=function(){this.resolution===void 0&&(this.resolution=Rt(this.extent)/this.image_.height),this.state=mt.LOADED,this.unlistenImage_(),this.changed()},e.prototype.load=function(){(this.state==mt.IDLE||this.state==mt.ERROR)&&(this.state=mt.LOADING,this.changed(),this.imageLoadFunction_(this,this.src_),this.unlisten_=ga(this.image_,this.handleImageLoad_.bind(this),this.handleImageError_.bind(this)))},e.prototype.setImage=function(t){this.image_=t,this.resolution=Rt(this.extent)/this.image_.height},e.prototype.unlistenImage_=function(){this.unlisten_&&(this.unlisten_(),this.unlisten_=null)},e})(Jh);function ga(n,e,t){var i=n;if(i.src&&us){var r=i.decode(),a=!0,o=function(){a=!1};return r.then(function(){a&&e()}).catch(function(h){a&&(h.name==="EncodingError"&&h.message==="Invalid image type."?e():t())}),o}var s=[Mn(i,S.LOAD,e),Mn(i,S.ERROR,t)];return function(){s.forEach(B)}}var el=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,r){i.__proto__=r}||function(i,r){for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(i[a]=r[a])},n(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");n(e,t);function i(){this.constructor=e}e.prototype=t===null?Object.create(t):(i.prototype=t.prototype,new i)}}(),nl=function(n){el(e,n);function e(t){var i=n.call(this)||this;i.projection=Q(t.projection),i.attributions_=ma(t.attributions),i.attributionsCollapsible_=t.attributionsCollapsible!==void 0?t.attributionsCollapsible:!0,i.loading=!1,i.state_=t.state!==void 0?t.state:Ce.READY,i.wrapX_=t.wrapX!==void 0?t.wrapX:!1,i.viewResolver=null,i.viewRejector=null;var r=i;return i.viewPromise_=new Promise(function(a,o){r.viewResolver=a,r.viewRejector=o}),i}return e.prototype.getAttributions=function(){return this.attributions_},e.prototype.getAttributionsCollapsible=function(){return this.attributionsCollapsible_},e.prototype.getProjection=function(){return this.projection},e.prototype.getResolutions=function(){return k()},e.prototype.getView=function(){return this.viewPromise_},e.prototype.getState=function(){return this.state_},e.prototype.getWrapX=function(){return this.wrapX_},e.prototype.getContextOptions=function(){},e.prototype.refresh=function(){this.changed()},e.prototype.setAttributions=function(t){this.attributions_=ma(t),this.changed()},e.prototype.setState=function(t){this.state_=t,this.changed()},e}(yt);function ma(n){return n?Array.isArray(n)?function(e){return n}:typeof n=="function"?n:function(e){return[n]}:null}var il=nl,w={IDLE:0,LOADING:1,LOADED:2,ERROR:3,EMPTY:4};function Ma(n){return Math.pow(n,3)}function Oe(n){return 1-Ma(1-n)}function rl(n){return 3*n*n-2*n*n*n}function al(n){return n}var sl=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,r){i.__proto__=r}||function(i,r){for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(i[a]=r[a])},n(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");n(e,t);function i(){this.constructor=e}e.prototype=t===null?Object.create(t):(i.prototype=t.prototype,new i)}}(),hl=function(n){sl(e,n);function e(t,i,r){var a=n.call(this)||this,o=r||{};return a.tileCoord=t,a.state=i,a.interimTile=null,a.key="",a.transition_=o.transition===void 0?250:o.transition,a.transitionStarts_={},a}return e.prototype.changed=function(){this.dispatchEvent(S.CHANGE)},e.prototype.release=function(){},e.prototype.getKey=function(){return this.key+"/"+this.tileCoord},e.prototype.getInterimTile=function(){if(!this.interimTile)return this;var t=this.interimTile;do{if(t.getState()==w.LOADED)return this.transition_=0,t;t=t.interimTile}while(t);return this},e.prototype.refreshInterimChain=function(){if(!!this.interimTile){var t=this.interimTile,i=this;do{if(t.getState()==w.LOADED){t.interimTile=null;break}else t.getState()==w.LOADING?i=t:t.getState()==w.IDLE?i.interimTile=t.interimTile:i=t;t=i.interimTile}while(t)}},e.prototype.getTileCoord=function(){return this.tileCoord},e.prototype.getState=function(){return this.state},e.prototype.setState=function(t){if(this.state!==w.ERROR&&this.state>t)throw new Error("Tile load sequence violation");this.state=t,this.changed()},e.prototype.load=function(){k()},e.prototype.getAlpha=function(t,i){if(!this.transition_)return 1;var r=this.transitionStarts_[t];if(!r)r=i,this.transitionStarts_[t]=r;else if(r===-1)return 1;var a=i-r+1e3/60;return a>=this.transition_?1:Ma(a/this.transition_)},e.prototype.inTransition=function(t){return this.transition_?this.transitionStarts_[t]!==-1:!1},e.prototype.endTransition=function(t){this.transition_&&(this.transitionStarts_[t]=-1)},e}(Ue),Ea=hl,ll=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,r){i.__proto__=r}||function(i,r){for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(i[a]=r[a])},n(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");n(e,t);function i(){this.constructor=e}e.prototype=t===null?Object.create(t):(i.prototype=t.prototype,new i)}}(),ul=function(n){ll(e,n);function e(t,i,r,a,o,s){var h=n.call(this,t,i,s)||this;return h.crossOrigin_=a,h.src_=r,h.key=r,h.image_=new Image,a!==null&&(h.image_.crossOrigin=a),h.unlisten_=null,h.tileLoadFunction_=o,h}return e.prototype.getImage=function(){return this.image_},e.prototype.setImage=function(t){this.image_=t,this.state=w.LOADED,this.unlistenImage_(),this.changed()},e.prototype.handleImageError_=function(){this.state=w.ERROR,this.unlistenImage_(),this.image_=fl(),this.changed()},e.prototype.handleImageLoad_=function(){var t=this.image_;t.naturalWidth&&t.naturalHeight?this.state=w.LOADED:this.state=w.EMPTY,this.unlistenImage_(),this.changed()},e.prototype.load=function(){this.state==w.ERROR&&(this.state=w.IDLE,this.image_=new Image,this.crossOrigin_!==null&&(this.image_.crossOrigin=this.crossOrigin_)),this.state==w.IDLE&&(this.state=w.LOADING,this.changed(),this.tileLoadFunction_(this,this.src_),this.unlisten_=ga(this.image_,this.handleImageLoad_.bind(this),this.handleImageError_.bind(this)))},e.prototype.unlistenImage_=function(){this.unlisten_&&(this.unlisten_(),this.unlisten_=null)},e}(Ea);function fl(){var n=An(1,1);return n.fillStyle="rgba(0,0,0,0)",n.fillRect(0,0,1,1),n.canvas}var cl=ul,vl=function(){function n(e,t,i){this.decay_=e,this.minVelocity_=t,this.delay_=i,this.points_=[],this.angle_=0,this.initialVelocity_=0}return n.prototype.begin=function(){this.points_.length=0,this.angle_=0,this.initialVelocity_=0},n.prototype.update=function(e,t){this.points_.push(e,t,Date.now())},n.prototype.end=function(){if(this.points_.length<6)return!1;var e=Date.now()-this.delay_,t=this.points_.length-3;if(this.points_[t+2]<e)return!1;for(var i=t-3;i>0&&this.points_[i+2]>e;)i-=3;var r=this.points_[t+2]-this.points_[i+2];if(r<1e3/60)return!1;var a=this.points_[t]-this.points_[i],o=this.points_[t+1]-this.points_[i+1];return this.angle_=Math.atan2(o,a),this.initialVelocity_=Math.sqrt(a*a+o*o)/r,this.initialVelocity_>this.minVelocity_},n.prototype.getDistance=function(){return(this.minVelocity_-this.initialVelocity_)/this.decay_},n.prototype.getAngle=function(){return this.angle_},n}(),dl=vl,pl=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,r){i.__proto__=r}||function(i,r){for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(i[a]=r[a])},n(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");n(e,t);function i(){this.constructor=e}e.prototype=t===null?Object.create(t):(i.prototype=t.prototype,new i)}}(),_l=function(n){pl(e,n);function e(t){var i=n.call(this)||this;return i.map_=t,i}return e.prototype.dispatchRenderEvent=function(t,i){k()},e.prototype.calculateMatrices2D=function(t){var i=t.viewState,r=t.coordinateToPixelTransform,a=t.pixelToCoordinateTransform;ke(r,t.size[0]/2,t.size[1]/2,1/i.resolution,-1/i.resolution,-i.rotation,-i.center[0],-i.center[1]),Cr(a,r)},e.prototype.forEachFeatureAtCoordinate=function(t,i,r,a,o,s,h,l){var u,f=i.viewState;function c(N,X,K,Tt){return o.call(s,X,N?K:null,Tt)}var v=f.projection,d=Ks(t.slice(),v),p=[[0,0]];if(v.canWrapX()&&a){var _=v.getExtent(),y=Y(_);p.push([-y,0],[y,0])}for(var m=i.layerStatesArray,g=m.length,M=[],x=[],P=0;P<p.length;P++)for(var T=g-1;T>=0;--T){var O=m[T],L=O.layer;if(L.hasRenderer()&&Dn(O,f)&&h.call(l,L)){var b=L.getRenderer(),j=L.getSource();if(b&&j){var W=j.getWrapX()?d:t,ot=c.bind(null,O.managed);x[0]=W[0]+p[P][0],x[1]=W[1]+p[P][1],u=b.forEachFeatureAtCoordinate(x,i,r,ot,M)}if(u)return u}}if(M.length!==0){var _t=1/M.length;return M.forEach(function(N,X){return N.distanceSq+=X*_t}),M.sort(function(N,X){return N.distanceSq-X.distanceSq}),M.some(function(N){return u=N.callback(N.feature,N.layer,N.geometry)}),u}},e.prototype.forEachLayerAtPixel=function(t,i,r,a,o){return k()},e.prototype.hasFeatureAtCoordinate=function(t,i,r,a,o,s){var h=this.forEachFeatureAtCoordinate(t,i,r,a,$e,this,o,s);return h!==void 0},e.prototype.getMap=function(){return this.map_},e.prototype.renderFrame=function(t){k()},e.prototype.scheduleExpireIconCache=function(t){ya.canExpireCache()&&t.postRenderFunctions.push(yl)},e}(oi);function yl(n,e){ya.expire()}var gl=_l,ml=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,r){i.__proto__=r}||function(i,r){for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(i[a]=r[a])},n(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");n(e,t);function i(){this.constructor=e}e.prototype=t===null?Object.create(t):(i.prototype=t.prototype,new i)}}(),Ml=function(n){ml(e,n);function e(t){var i=n.call(this,t)||this;i.fontChangeListenerKey_=D(Dh,ce.PROPERTYCHANGE,t.redrawText.bind(t)),i.element_=document.createElement("div");var r=i.element_.style;r.position="absolute",r.width="100%",r.height="100%",r.zIndex="0",i.element_.className=bn+" ol-layers";var a=t.getViewport();return a.insertBefore(i.element_,a.firstChild||null),i.children_=[],i.renderedVisible_=!0,i}return e.prototype.dispatchRenderEvent=function(t,i){var r=this.getMap();if(r.hasListener(t)){var a=new pa(t,void 0,i);r.dispatchEvent(a)}},e.prototype.disposeInternal=function(){B(this.fontChangeListenerKey_),this.element_.parentNode.removeChild(this.element_),n.prototype.disposeInternal.call(this)},e.prototype.renderFrame=function(t){if(!t){this.renderedVisible_&&(this.element_.style.display="none",this.renderedVisible_=!1);return}this.calculateMatrices2D(t),this.dispatchRenderEvent(ie.PRECOMPOSE,t);var i=t.layerStatesArray.sort(function(c,v){return c.zIndex-v.zIndex}),r=t.viewState;this.children_.length=0;for(var a=[],o=null,s=0,h=i.length;s<h;++s){var l=i[s];if(t.layerIndex=s,!(!Dn(l,r)||l.sourceState!=Ce.READY&&l.sourceState!=Ce.UNDEFINED)){var u=l.layer,f=u.render(t,o);!f||(f!==o&&(this.children_.push(f),o=f),"getDeclutter"in u&&a.push(u))}}for(var s=a.length-1;s>=0;--s)a[s].renderDeclutter(t);Nh(this.element_,this.children_),this.dispatchRenderEvent(ie.POSTCOMPOSE,t),this.renderedVisible_||(this.element_.style.display="",this.renderedVisible_=!0),this.scheduleExpireIconCache(t)},e.prototype.forEachLayerAtPixel=function(t,i,r,a,o){for(var s=i.viewState,h=i.layerStatesArray,l=h.length,u=l-1;u>=0;--u){var f=h[u],c=f.layer;if(c.hasRenderer()&&Dn(f,s)&&o(c)){var v=c.getRenderer(),d=v.getDataAtPixel(t,i,r);if(d){var p=a(c,d);if(p)return p}}}},e}(gl),El=Ml,xl=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,r){i.__proto__=r}||function(i,r){for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(i[a]=r[a])},n(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");n(e,t);function i(){this.constructor=e}e.prototype=t===null?Object.create(t):(i.prototype=t.prototype,new i)}}(),Ri={LAYERS:"layers"},Tl=function(n){xl(e,n);function e(t){var i=this,r=t||{},a=H({},r);delete a.layers;var o=r.layers;return i=n.call(this,a)||this,i.on,i.once,i.un,i.layersListenerKeys_=[],i.listenerKeys_={},i.addChangeListener(Ri.LAYERS,i.handleLayersChanged_),o?Array.isArray(o)?o=new Ot(o.slice(),{unique:!0}):$(typeof o.getArray=="function",43):o=new Ot(void 0,{unique:!0}),i.setLayers(o),i}return e.prototype.handleLayerChange_=function(){this.changed()},e.prototype.handleLayersChanged_=function(){this.layersListenerKeys_.forEach(B),this.layersListenerKeys_.length=0;var t=this.getLayers();this.layersListenerKeys_.push(D(t,gt.ADD,this.handleLayersAdd_,this),D(t,gt.REMOVE,this.handleLayersRemove_,this));for(var i in this.listenerKeys_)this.listenerKeys_[i].forEach(B);mn(this.listenerKeys_);for(var r=t.getArray(),a=0,o=r.length;a<o;a++){var s=r[a];this.listenerKeys_[lt(s)]=[D(s,ce.PROPERTYCHANGE,this.handleLayerChange_,this),D(s,S.CHANGE,this.handleLayerChange_,this)]}this.changed()},e.prototype.handleLayersAdd_=function(t){var i=t.element;this.listenerKeys_[lt(i)]=[D(i,ce.PROPERTYCHANGE,this.handleLayerChange_,this),D(i,S.CHANGE,this.handleLayerChange_,this)],this.changed()},e.prototype.handleLayersRemove_=function(t){var i=t.element,r=lt(i);this.listenerKeys_[r].forEach(B),delete this.listenerKeys_[r],this.changed()},e.prototype.getLayers=function(){return this.get(Ri.LAYERS)},e.prototype.setLayers=function(t){this.set(Ri.LAYERS,t)},e.prototype.getLayersArray=function(t){var i=t!==void 0?t:[];return this.getLayers().forEach(function(r){r.getLayersArray(i)}),i},e.prototype.getLayerStatesArray=function(t){var i=t!==void 0?t:[],r=i.length;this.getLayers().forEach(function(u){u.getLayerStatesArray(i)});var a=this.getLayerState(),o=a.zIndex;!t&&a.zIndex===void 0&&(o=0);for(var s=r,h=i.length;s<h;s++){var l=i[s];l.opacity*=a.opacity,l.visible=l.visible&&a.visible,l.maxResolution=Math.min(l.maxResolution,a.maxResolution),l.minResolution=Math.max(l.minResolution,a.minResolution),l.minZoom=Math.max(l.minZoom,a.minZoom),l.maxZoom=Math.min(l.maxZoom,a.maxZoom),a.extent!==void 0&&(l.extent!==void 0?l.extent=Xe(l.extent,a.extent):l.extent=a.extent),l.zIndex===void 0&&(l.zIndex=o)}return i},e.prototype.getSourceState=function(){return Ce.READY},e}(da),Cl=Tl,Ol=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,r){i.__proto__=r}||function(i,r){for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(i[a]=r[a])},n(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");n(e,t);function i(){this.constructor=e}e.prototype=t===null?Object.create(t):(i.prototype=t.prototype,new i)}}(),Rl=function(n){Ol(e,n);function e(t,i,r){var a=n.call(this,t)||this;return a.map=i,a.frameState=r!==void 0?r:null,a}return e}(Yt),Fn=Rl,Pl=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,r){i.__proto__=r}||function(i,r){for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(i[a]=r[a])},n(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");n(e,t);function i(){this.constructor=e}e.prototype=t===null?Object.create(t):(i.prototype=t.prototype,new i)}}(),wl=function(n){Pl(e,n);function e(t,i,r,a,o){var s=n.call(this,t,i,o)||this;return s.originalEvent=r,s.pixel_=null,s.coordinate_=null,s.dragging=a!==void 0?a:!1,s}return Object.defineProperty(e.prototype,"pixel",{get:function(){return this.pixel_||(this.pixel_=this.map.getEventPixel(this.originalEvent)),this.pixel_},set:function(t){this.pixel_=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"coordinate",{get:function(){return this.coordinate_||(this.coordinate_=this.map.getCoordinateFromPixel(this.pixel)),this.coordinate_},set:function(t){this.coordinate_=t},enumerable:!1,configurable:!0}),e.prototype.preventDefault=function(){n.prototype.preventDefault.call(this),"preventDefault"in this.originalEvent&&this.originalEvent.preventDefault()},e.prototype.stopPropagation=function(){n.prototype.stopPropagation.call(this),"stopPropagation"in this.originalEvent&&this.originalEvent.stopPropagation()},e}(Fn),Bt=wl,q={SINGLECLICK:"singleclick",CLICK:S.CLICK,DBLCLICK:S.DBLCLICK,POINTERDRAG:"pointerdrag",POINTERMOVE:"pointermove",POINTERDOWN:"pointerdown",POINTERUP:"pointerup",POINTEROVER:"pointerover",POINTEROUT:"pointerout",POINTERENTER:"pointerenter",POINTERLEAVE:"pointerleave",POINTERCANCEL:"pointercancel"},We={POINTERMOVE:"pointermove",POINTERDOWN:"pointerdown",POINTERUP:"pointerup",POINTEROVER:"pointerover",POINTEROUT:"pointerout",POINTERENTER:"pointerenter",POINTERLEAVE:"pointerleave",POINTERCANCEL:"pointercancel"},Il=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,r){i.__proto__=r}||function(i,r){for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(i[a]=r[a])},n(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");n(e,t);function i(){this.constructor=e}e.prototype=t===null?Object.create(t):(i.prototype=t.prototype,new i)}}(),Sl=function(n){Il(e,n);function e(t,i){var r=n.call(this,t)||this;r.map_=t,r.clickTimeoutId_,r.emulateClicks_=!1,r.dragging_=!1,r.dragListenerKeys_=[],r.moveTolerance_=i===void 0?1:i,r.down_=null;var a=r.map_.getViewport();return r.activePointers_=0,r.trackedTouches_={},r.element_=a,r.pointerdownListenerKey_=D(a,We.POINTERDOWN,r.handlePointerDown_,r),r.originalPointerMoveEvent_,r.relayedListenerKey_=D(a,We.POINTERMOVE,r.relayEvent_,r),r.boundHandleTouchMove_=r.handleTouchMove_.bind(r),r.element_.addEventListener(S.TOUCHMOVE,r.boundHandleTouchMove_,Tr?{passive:!1}:!1),r}return e.prototype.emulateClick_=function(t){var i=new Bt(q.CLICK,this.map_,t);this.dispatchEvent(i),this.clickTimeoutId_!==void 0?(clearTimeout(this.clickTimeoutId_),this.clickTimeoutId_=void 0,i=new Bt(q.DBLCLICK,this.map_,t),this.dispatchEvent(i)):this.clickTimeoutId_=setTimeout(function(){this.clickTimeoutId_=void 0;var r=new Bt(q.SINGLECLICK,this.map_,t);this.dispatchEvent(r)}.bind(this),250)},e.prototype.updateActivePointers_=function(t){var i=t;i.type==q.POINTERUP||i.type==q.POINTERCANCEL?delete this.trackedTouches_[i.pointerId]:i.type==q.POINTERDOWN&&(this.trackedTouches_[i.pointerId]=!0),this.activePointers_=Object.keys(this.trackedTouches_).length},e.prototype.handlePointerUp_=function(t){this.updateActivePointers_(t);var i=new Bt(q.POINTERUP,this.map_,t);this.dispatchEvent(i),this.emulateClicks_&&!i.defaultPrevented&&!this.dragging_&&this.isMouseActionButton_(t)&&this.emulateClick_(this.down_),this.activePointers_===0&&(this.dragListenerKeys_.forEach(B),this.dragListenerKeys_.length=0,this.dragging_=!1,this.down_=null)},e.prototype.isMouseActionButton_=function(t){return t.button===0},e.prototype.handlePointerDown_=function(t){this.emulateClicks_=this.activePointers_===0,this.updateActivePointers_(t);var i=new Bt(q.POINTERDOWN,this.map_,t);this.dispatchEvent(i),this.down_={};for(var r in t){var a=t[r];this.down_[r]=typeof a=="function"?ze:a}if(this.dragListenerKeys_.length===0){var o=this.map_.getOwnerDocument();this.dragListenerKeys_.push(D(o,q.POINTERMOVE,this.handlePointerMove_,this),D(o,q.POINTERUP,this.handlePointerUp_,this),D(this.element_,q.POINTERCANCEL,this.handlePointerUp_,this)),this.element_.getRootNode&&this.element_.getRootNode()!==o&&this.dragListenerKeys_.push(D(this.element_.getRootNode(),q.POINTERUP,this.handlePointerUp_,this))}},e.prototype.handlePointerMove_=function(t){if(this.isMoving_(t)){this.dragging_=!0;var i=new Bt(q.POINTERDRAG,this.map_,t,this.dragging_);this.dispatchEvent(i)}},e.prototype.relayEvent_=function(t){this.originalPointerMoveEvent_=t;var i=!!(this.down_&&this.isMoving_(t));this.dispatchEvent(new Bt(t.type,this.map_,t,i))},e.prototype.handleTouchMove_=function(t){var i=this.originalPointerMoveEvent_;(!i||i.defaultPrevented)&&(typeof t.cancelable!="boolean"||t.cancelable===!0)&&t.preventDefault()},e.prototype.isMoving_=function(t){return this.dragging_||Math.abs(t.clientX-this.down_.clientX)>this.moveTolerance_||Math.abs(t.clientY-this.down_.clientY)>this.moveTolerance_},e.prototype.disposeInternal=function(){this.relayedListenerKey_&&(B(this.relayedListenerKey_),this.relayedListenerKey_=null),this.element_.removeEventListener(S.TOUCHMOVE,this.boundHandleTouchMove_),this.pointerdownListenerKey_&&(B(this.pointerdownListenerKey_),this.pointerdownListenerKey_=null),this.dragListenerKeys_.forEach(B),this.dragListenerKeys_.length=0,this.element_=null,n.prototype.disposeInternal.call(this)},e}(Ue),Al=Sl,He={POSTRENDER:"postrender",MOVESTART:"movestart",MOVEEND:"moveend"},it={LAYERGROUP:"layergroup",SIZE:"size",TARGET:"target",VIEW:"view"},Gn=1/0,Ll=function(){function n(e,t){this.priorityFunction_=e,this.keyFunction_=t,this.elements_=[],this.priorities_=[],this.queuedElements_={}}return n.prototype.clear=function(){this.elements_.length=0,this.priorities_.length=0,mn(this.queuedElements_)},n.prototype.dequeue=function(){var e=this.elements_,t=this.priorities_,i=e[0];e.length==1?(e.length=0,t.length=0):(e[0]=e.pop(),t[0]=t.pop(),this.siftUp_(0));var r=this.keyFunction_(i);return delete this.queuedElements_[r],i},n.prototype.enqueue=function(e){$(!(this.keyFunction_(e)in this.queuedElements_),31);var t=this.priorityFunction_(e);return t!=Gn?(this.elements_.push(e),this.priorities_.push(t),this.queuedElements_[this.keyFunction_(e)]=!0,this.siftDown_(0,this.elements_.length-1),!0):!1},n.prototype.getCount=function(){return this.elements_.length},n.prototype.getLeftChildIndex_=function(e){return e*2+1},n.prototype.getRightChildIndex_=function(e){return e*2+2},n.prototype.getParentIndex_=function(e){return e-1>>1},n.prototype.heapify_=function(){var e;for(e=(this.elements_.length>>1)-1;e>=0;e--)this.siftUp_(e)},n.prototype.isEmpty=function(){return this.elements_.length===0},n.prototype.isKeyQueued=function(e){return e in this.queuedElements_},n.prototype.isQueued=function(e){return this.isKeyQueued(this.keyFunction_(e))},n.prototype.siftUp_=function(e){for(var t=this.elements_,i=this.priorities_,r=t.length,a=t[e],o=i[e],s=e;e<r>>1;){var h=this.getLeftChildIndex_(e),l=this.getRightChildIndex_(e),u=l<r&&i[l]<i[h]?l:h;t[e]=t[u],i[e]=i[u],e=u}t[e]=a,i[e]=o,this.siftDown_(s,e)},n.prototype.siftDown_=function(e,t){for(var i=this.elements_,r=this.priorities_,a=i[t],o=r[t];t>e;){var s=this.getParentIndex_(t);if(r[s]>o)i[t]=i[s],r[t]=r[s],t=s;else break}i[t]=a,r[t]=o},n.prototype.reprioritize=function(){var e=this.priorityFunction_,t=this.elements_,i=this.priorities_,r=0,a=t.length,o,s,h;for(s=0;s<a;++s)o=t[s],h=e(o),h==Gn?delete this.queuedElements_[this.keyFunction_(o)]:(i[r]=h,t[r++]=o);t.length=r,i.length=r,this.heapify_()},n}(),Nl=Ll,bl=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,r){i.__proto__=r}||function(i,r){for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(i[a]=r[a])},n(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");n(e,t);function i(){this.constructor=e}e.prototype=t===null?Object.create(t):(i.prototype=t.prototype,new i)}}(),Dl=function(n){bl(e,n);function e(t,i){var r=n.call(this,function(a){return t.apply(null,a)},function(a){return a[0].getKey()})||this;return r.boundHandleTileChange_=r.handleTileChange.bind(r),r.tileChangeCallback_=i,r.tilesLoading_=0,r.tilesLoadingKeys_={},r}return e.prototype.enqueue=function(t){var i=n.prototype.enqueue.call(this,t);if(i){var r=t[0];r.addEventListener(S.CHANGE,this.boundHandleTileChange_)}return i},e.prototype.getTilesLoading=function(){return this.tilesLoading_},e.prototype.handleTileChange=function(t){var i=t.target,r=i.getState();if(r===w.LOADED||r===w.ERROR||r===w.EMPTY){i.removeEventListener(S.CHANGE,this.boundHandleTileChange_);var a=i.getKey();a in this.tilesLoadingKeys_&&(delete this.tilesLoadingKeys_[a],--this.tilesLoading_),this.tileChangeCallback_()}},e.prototype.loadMoreTiles=function(t,i){for(var r=0,a,o,s;this.tilesLoading_<t&&r<i&&this.getCount()>0;)o=this.dequeue()[0],s=o.getKey(),a=o.getState(),a===w.IDLE&&!(s in this.tilesLoadingKeys_)&&(this.tilesLoadingKeys_[s]=!0,++this.tilesLoading_,++r,o.load())},e}(Nl),Fl=Dl;function Gl(n,e,t,i,r){if(!n||!(t in n.wantedTiles)||!n.wantedTiles[t][e.getKey()])return Gn;var a=n.viewState.center,o=i[0]-a[0],s=i[1]-a[1];return 65536*Math.log(r)+Math.sqrt(o*o+s*s)/r}var At={CENTER:"center",RESOLUTION:"resolution",ROTATION:"rotation"},jl=42,Pi=256;function xa(n,e,t){return function(i,r,a,o,s){if(i){var h=e?0:a[0]*r,l=e?0:a[1]*r,u=s?s[0]:0,f=s?s[1]:0,c=n[0]+h/2+u,v=n[2]-h/2+u,d=n[1]+l/2+f,p=n[3]-l/2+f;c>v&&(c=(v+c)/2,v=c),d>p&&(d=(p+d)/2,p=d);var _=nt(i[0],c,v),y=nt(i[1],d,p),m=30*r;return o&&t&&(_+=-m*Math.log(1+Math.max(0,c-i[0])/m)+m*Math.log(1+Math.max(0,i[0]-v)/m),y+=-m*Math.log(1+Math.max(0,d-i[1])/m)+m*Math.log(1+Math.max(0,i[1]-p)/m)),[_,y]}else return}}function $l(n){return n}function wi(n,e,t,i){var r=Y(e)/t[0],a=Rt(e)/t[1];return i?Math.min(n,Math.max(r,a)):Math.min(n,Math.min(r,a))}function Ii(n,e,t){var i=Math.min(n,e),r=50;return i*=Math.log(1+r*Math.max(0,n/e-1))/r+1,t&&(i=Math.max(i,t),i/=Math.log(1+r*Math.max(0,t/n-1))/r+1),nt(i,t/2,e*2)}function zl(n,e,t,i){return function(r,a,o,s){if(r!==void 0){var h=n[0],l=n[n.length-1],u=t?wi(h,t,o,i):h;if(s){var f=e!==void 0?e:!0;return f?Ii(r,u,l):nt(r,l,u)}var c=Math.min(u,r),v=Math.floor(hi(n,c,a));return n[v]>u&&v<n.length-1?n[v+1]:n[v]}else return}}function Ul(n,e,t,i,r,a){return function(o,s,h,l){if(o!==void 0){var u=r?wi(e,r,h,a):e,f=t!==void 0?t:0;if(l){var c=i!==void 0?i:!0;return c?Ii(o,u,f):nt(o,f,u)}var v=1e-9,d=Math.ceil(Math.log(e/u)/Math.log(n)-v),p=-s*(.5-v)+.5,_=Math.min(u,o),y=Math.floor(Math.log(e/_)/Math.log(n)+p),m=Math.max(d,y),g=e/Math.pow(n,m);return nt(g,f,u)}else return}}function Ta(n,e,t,i,r){return function(a,o,s,h){if(a!==void 0){var l=i?wi(n,i,s,r):n,u=t!==void 0?t:!0;return!u||!h?nt(a,e,l):Ii(a,l,e)}else return}}function Si(n){if(n!==void 0)return 0}function Ca(n){if(n!==void 0)return n}function kl(n){var e=2*Math.PI/n;return function(t,i){if(i)return t;if(t!==void 0)return t=Math.floor(t/e+.5)*e,t}}function Kl(n){var e=n||In(5);return function(t,i){if(i)return t;if(t!==void 0)return Math.abs(t)<=e?0:t}}var ql=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,r){i.__proto__=r}||function(i,r){for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(i[a]=r[a])},n(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");n(e,t);function i(){this.constructor=e}e.prototype=t===null?Object.create(t):(i.prototype=t.prototype,new i)}}(),Ai=0,Xl=function(n){ql(e,n);function e(t){var i=n.call(this)||this;i.on,i.once,i.un;var r=H({},t);return i.hints_=[0,0],i.animations_=[],i.updateAnimationKey_,i.projection_=xi(r.projection,"EPSG:3857"),i.viewportSize_=[100,100],i.targetCenter_=null,i.targetResolution_,i.targetRotation_,i.nextCenter_=null,i.nextResolution_,i.nextRotation_,i.cancelAnchor_=void 0,r.center&&(r.center=Gt(r.center,i.projection_)),r.extent&&(r.extent=xe(r.extent,i.projection_)),i.applyOptions_(r),i}return e.prototype.applyOptions_=function(t){var i={},r=Bl(t);this.maxResolution_=r.maxResolution,this.minResolution_=r.minResolution,this.zoomFactor_=r.zoomFactor,this.resolutions_=t.resolutions,this.padding_=t.padding,this.minZoom_=r.minZoom;var a=Zl(t),o=r.constraint,s=Vl(t);this.constraints_={center:a,resolution:o,rotation:s},this.setRotation(t.rotation!==void 0?t.rotation:0),this.setCenterInternal(t.center!==void 0?t.center:null),t.resolution!==void 0?this.setResolution(t.resolution):t.zoom!==void 0&&this.setZoom(t.zoom),this.setProperties(i),this.options_=t},Object.defineProperty(e.prototype,"padding",{get:function(){return this.padding_},set:function(t){var i=this.padding_;this.padding_=t;var r=this.getCenter();if(r){var a=t||[0,0,0,0];i=i||[0,0,0,0];var o=this.getResolution(),s=o/2*(a[3]-i[3]+i[1]-a[1]),h=o/2*(a[0]-i[0]+i[2]-a[2]);this.setCenterInternal([r[0]+s,r[1]-h])}},enumerable:!1,configurable:!0}),e.prototype.getUpdatedOptions_=function(t){var i=H({},this.options_);return i.resolution!==void 0?i.resolution=this.getResolution():i.zoom=this.getZoom(),i.center=this.getCenterInternal(),i.rotation=this.getRotation(),H({},i,t)},e.prototype.animate=function(t){this.isDef()&&!this.getAnimating()&&this.resolveConstraints(0);for(var i=new Array(arguments.length),r=0;r<i.length;++r){var a=arguments[r];a.center&&(a=H({},a),a.center=Gt(a.center,this.getProjection())),a.anchor&&(a=H({},a),a.anchor=Gt(a.anchor,this.getProjection())),i[r]=a}this.animateInternal.apply(this,i)},e.prototype.animateInternal=function(t){var i=arguments.length,r;i>1&&typeof arguments[i-1]=="function"&&(r=arguments[i-1],--i);for(var a=0;a<i&&!this.isDef();++a){var o=arguments[a];o.center&&this.setCenterInternal(o.center),o.zoom!==void 0?this.setZoom(o.zoom):o.resolution&&this.setResolution(o.resolution),o.rotation!==void 0&&this.setRotation(o.rotation)}if(a===i){r&&jn(r,!0);return}for(var s=Date.now(),h=this.targetCenter_.slice(),l=this.targetResolution_,u=this.targetRotation_,f=[];a<i;++a){var c=arguments[a],v={start:s,complete:!1,anchor:c.anchor,duration:c.duration!==void 0?c.duration:1e3,easing:c.easing||rl,callback:r};if(c.center&&(v.sourceCenter=h,v.targetCenter=c.center.slice(),h=v.targetCenter),c.zoom!==void 0?(v.sourceResolution=l,v.targetResolution=this.getResolutionForZoom(c.zoom),l=v.targetResolution):c.resolution&&(v.sourceResolution=l,v.targetResolution=c.resolution,l=v.targetResolution),c.rotation!==void 0){v.sourceRotation=u;var d=te(c.rotation-u+Math.PI,2*Math.PI)-Math.PI;v.targetRotation=u+d,u=v.targetRotation}Wl(v)?v.complete=!0:s+=v.duration,f.push(v)}this.animations_.push(f),this.setHint(Mt.ANIMATING,1),this.updateAnimations_()},e.prototype.getAnimating=function(){return this.hints_[Mt.ANIMATING]>0},e.prototype.getInteracting=function(){return this.hints_[Mt.INTERACTING]>0},e.prototype.cancelAnimations=function(){this.setHint(Mt.ANIMATING,-this.hints_[Mt.ANIMATING]);for(var t,i=0,r=this.animations_.length;i<r;++i){var a=this.animations_[i];if(a[0].callback&&jn(a[0].callback,!1),!t)for(var o=0,s=a.length;o<s;++o){var h=a[o];if(!h.complete){t=h.anchor;break}}}this.animations_.length=0,this.cancelAnchor_=t,this.nextCenter_=null,this.nextResolution_=NaN,this.nextRotation_=NaN},e.prototype.updateAnimations_=function(){if(this.updateAnimationKey_!==void 0&&(cancelAnimationFrame(this.updateAnimationKey_),this.updateAnimationKey_=void 0),!!this.getAnimating()){for(var t=Date.now(),i=!1,r=this.animations_.length-1;r>=0;--r){for(var a=this.animations_[r],o=!0,s=0,h=a.length;s<h;++s){var l=a[s];if(!l.complete){var u=t-l.start,f=l.duration>0?u/l.duration:1;f>=1?(l.complete=!0,f=1):o=!1;var c=l.easing(f);if(l.sourceCenter){var v=l.sourceCenter[0],d=l.sourceCenter[1],p=l.targetCenter[0],_=l.targetCenter[1];this.nextCenter_=l.targetCenter;var y=v+c*(p-v),m=d+c*(_-d);this.targetCenter_=[y,m]}if(l.sourceResolution&&l.targetResolution){var g=c===1?l.targetResolution:l.sourceResolution+c*(l.targetResolution-l.sourceResolution);if(l.anchor){var M=this.getViewportSize_(this.getRotation()),x=this.constraints_.resolution(g,0,M,!0);this.targetCenter_=this.calculateCenterZoom(x,l.anchor)}this.nextResolution_=l.targetResolution,this.targetResolution_=g,this.applyTargetState_(!0)}if(l.sourceRotation!==void 0&&l.targetRotation!==void 0){var P=c===1?te(l.targetRotation+Math.PI,2*Math.PI)-Math.PI:l.sourceRotation+c*(l.targetRotation-l.sourceRotation);if(l.anchor){var T=this.constraints_.rotation(P,!0);this.targetCenter_=this.calculateCenterRotate(T,l.anchor)}this.nextRotation_=l.targetRotation,this.targetRotation_=P}if(this.applyTargetState_(!0),i=!0,!l.complete)break}}if(o){this.animations_[r]=null,this.setHint(Mt.ANIMATING,-1),this.nextCenter_=null,this.nextResolution_=NaN,this.nextRotation_=NaN;var O=a[0].callback;O&&jn(O,!0)}}this.animations_=this.animations_.filter(Boolean),i&&this.updateAnimationKey_===void 0&&(this.updateAnimationKey_=requestAnimationFrame(this.updateAnimations_.bind(this)))}},e.prototype.calculateCenterRotate=function(t,i){var r,a=this.getCenterInternal();return a!==void 0&&(r=[a[0]-i[0],a[1]-i[1]],gi(r,t-this.getRotation()),Us(r,i)),r},e.prototype.calculateCenterZoom=function(t,i){var r,a=this.getCenterInternal(),o=this.getResolution();if(a!==void 0&&o!==void 0){var s=i[0]-t*(i[0]-a[0])/o,h=i[1]-t*(i[1]-a[1])/o;r=[s,h]}return r},e.prototype.getViewportSize_=function(t){var i=this.viewportSize_;if(t){var r=i[0],a=i[1];return[Math.abs(r*Math.cos(t))+Math.abs(a*Math.sin(t)),Math.abs(r*Math.sin(t))+Math.abs(a*Math.cos(t))]}else return i},e.prototype.setViewportSize=function(t){this.viewportSize_=Array.isArray(t)?t.slice():[100,100],this.getAnimating()||this.resolveConstraints(0)},e.prototype.getCenter=function(){var t=this.getCenterInternal();return t&&Ti(t,this.getProjection())},e.prototype.getCenterInternal=function(){return this.get(At.CENTER)},e.prototype.getConstraints=function(){return this.constraints_},e.prototype.getConstrainResolution=function(){return this.options_.constrainResolution},e.prototype.getHints=function(t){return t!==void 0?(t[0]=this.hints_[0],t[1]=this.hints_[1],t):this.hints_.slice()},e.prototype.calculateExtent=function(t){var i=this.calculateExtentInternal(t);return Ws(i,this.getProjection())},e.prototype.calculateExtentInternal=function(t){var i=t||this.getViewportSizeMinusPadding_(),r=this.getCenterInternal();$(r,1);var a=this.getResolution();$(a!==void 0,2);var o=this.getRotation();return $(o!==void 0,3),ci(r,a,o,i)},e.prototype.getMaxResolution=function(){return this.maxResolution_},e.prototype.getMinResolution=function(){return this.minResolution_},e.prototype.getMaxZoom=function(){return this.getZoomForResolution(this.minResolution_)},e.prototype.setMaxZoom=function(t){this.applyOptions_(this.getUpdatedOptions_({maxZoom:t}))},e.prototype.getMinZoom=function(){return this.getZoomForResolution(this.maxResolution_)},e.prototype.setMinZoom=function(t){this.applyOptions_(this.getUpdatedOptions_({minZoom:t}))},e.prototype.setConstrainResolution=function(t){this.applyOptions_(this.getUpdatedOptions_({constrainResolution:t}))},e.prototype.getProjection=function(){return this.projection_},e.prototype.getResolution=function(){return this.get(At.RESOLUTION)},e.prototype.getResolutions=function(){return this.resolutions_},e.prototype.getResolutionForExtent=function(t,i){return this.getResolutionForExtentInternal(xe(t,this.getProjection()),i)},e.prototype.getResolutionForExtentInternal=function(t,i){var r=i||this.getViewportSizeMinusPadding_(),a=Y(t)/r[0],o=Rt(t)/r[1];return Math.max(a,o)},e.prototype.getResolutionForValueFunction=function(t){var i=t||2,r=this.getConstrainedResolution(this.maxResolution_),a=this.minResolution_,o=Math.log(r/a)/Math.log(i);return function(s){var h=r/Math.pow(i,s*o);return h}},e.prototype.getRotation=function(){return this.get(At.ROTATION)},e.prototype.getValueForResolutionFunction=function(t){var i=Math.log(t||2),r=this.getConstrainedResolution(this.maxResolution_),a=this.minResolution_,o=Math.log(r/a)/i;return function(s){var h=Math.log(r/s)/i/o;return h}},e.prototype.getViewportSizeMinusPadding_=function(t){var i=this.getViewportSize_(t),r=this.padding_;return r&&(i=[i[0]-r[1]-r[3],i[1]-r[0]-r[2]]),i},e.prototype.getState=function(){var t=this.getProjection(),i=this.getResolution(),r=this.getRotation(),a=this.getCenterInternal(),o=this.padding_;if(o){var s=this.getViewportSizeMinusPadding_();a=Li(a,this.getViewportSize_(),[s[0]/2+o[3],s[1]/2+o[0]],i,r)}return{center:a.slice(0),projection:t!==void 0?t:null,resolution:i,nextCenter:this.nextCenter_,nextResolution:this.nextResolution_,nextRotation:this.nextRotation_,rotation:r,zoom:this.getZoom()}},e.prototype.getZoom=function(){var t,i=this.getResolution();return i!==void 0&&(t=this.getZoomForResolution(i)),t},e.prototype.getZoomForResolution=function(t){var i=this.minZoom_||0,r,a;if(this.resolutions_){var o=hi(this.resolutions_,t,1);i=o,r=this.resolutions_[o],o==this.resolutions_.length-1?a=2:a=r/this.resolutions_[o+1]}else r=this.maxResolution_,a=this.zoomFactor_;return i+Math.log(r/t)/Math.log(a)},e.prototype.getResolutionForZoom=function(t){if(this.resolutions_){if(this.resolutions_.length<=1)return 0;var i=nt(Math.floor(t),0,this.resolutions_.length-2),r=this.resolutions_[i]/this.resolutions_[i+1];return this.resolutions_[i]/Math.pow(r,nt(t-i,0,1))}else return this.maxResolution_/Math.pow(this.zoomFactor_,t-this.minZoom_)},e.prototype.fit=function(t,i){var r;if($(Array.isArray(t)||typeof t.getSimplifiedGeometry=="function",24),Array.isArray(t)){$(!di(t),25);var a=xe(t,this.getProjection());r=oa(a)}else if(t.getType()===Tn.CIRCLE){var a=xe(t.getExtent(),this.getProjection());r=oa(a),r.rotate(this.getRotation(),qe(a))}else{var o=qr();o?r=t.clone().transform(o,this.getProjection()):r=t}this.fitInternal(r,i)},e.prototype.rotatedExtentForGeometry=function(t){for(var i=this.getRotation(),r=Math.cos(i),a=Math.sin(-i),o=t.getFlatCoordinates(),s=t.getStride(),h=1/0,l=1/0,u=-1/0,f=-1/0,c=0,v=o.length;c<v;c+=s){var d=o[c]*r-o[c+1]*a,p=o[c]*a+o[c+1]*r;h=Math.min(h,d),l=Math.min(l,p),u=Math.max(u,d),f=Math.max(f,p)}return[h,l,u,f]},e.prototype.fitInternal=function(t,i){var r=i||{},a=r.size;a||(a=this.getViewportSizeMinusPadding_());var o=r.padding!==void 0?r.padding:[0,0,0,0],s=r.nearest!==void 0?r.nearest:!1,h;r.minResolution!==void 0?h=r.minResolution:r.maxZoom!==void 0?h=this.getResolutionForZoom(r.maxZoom):h=0;var l=this.rotatedExtentForGeometry(t),u=this.getResolutionForExtentInternal(l,[a[0]-o[1]-o[3],a[1]-o[0]-o[2]]);u=isNaN(u)?h:Math.max(u,h),u=this.getConstrainedResolution(u,s?0:1);var f=this.getRotation(),c=Math.sin(f),v=Math.cos(f),d=qe(l);d[0]+=(o[1]-o[3])/2*u,d[1]+=(o[0]-o[2])/2*u;var p=d[0]*v-d[1]*c,_=d[1]*v+d[0]*c,y=this.getConstrainedCenter([p,_],u),m=r.callback?r.callback:ze;r.duration!==void 0?this.animateInternal({resolution:u,center:y,duration:r.duration,easing:r.easing},m):(this.targetResolution_=u,this.targetCenter_=y,this.applyTargetState_(!1,!0),jn(m,!0))},e.prototype.centerOn=function(t,i,r){this.centerOnInternal(Gt(t,this.getProjection()),i,r)},e.prototype.centerOnInternal=function(t,i,r){this.setCenterInternal(Li(t,i,r,this.getResolution(),this.getRotation()))},e.prototype.calculateCenterShift=function(t,i,r,a){var o,s=this.padding_;if(s&&t){var h=this.getViewportSizeMinusPadding_(-r),l=Li(t,a,[h[0]/2+s[3],h[1]/2+s[0]],i,r);o=[t[0]-l[0],t[1]-l[1]]}return o},e.prototype.isDef=function(){return!!this.getCenterInternal()&&this.getResolution()!==void 0},e.prototype.adjustCenter=function(t){var i=Ti(this.targetCenter_,this.getProjection());this.setCenter([i[0]+t[0],i[1]+t[1]])},e.prototype.adjustCenterInternal=function(t){var i=this.targetCenter_;this.setCenterInternal([i[0]+t[0],i[1]+t[1]])},e.prototype.adjustResolution=function(t,i){var r=i&&Gt(i,this.getProjection());this.adjustResolutionInternal(t,r)},e.prototype.adjustResolutionInternal=function(t,i){var r=this.getAnimating()||this.getInteracting(),a=this.getViewportSize_(this.getRotation()),o=this.constraints_.resolution(this.targetResolution_*t,0,a,r);i&&(this.targetCenter_=this.calculateCenterZoom(o,i)),this.targetResolution_*=t,this.applyTargetState_()},e.prototype.adjustZoom=function(t,i){this.adjustResolution(Math.pow(this.zoomFactor_,-t),i)},e.prototype.adjustRotation=function(t,i){i&&(i=Gt(i,this.getProjection())),this.adjustRotationInternal(t,i)},e.prototype.adjustRotationInternal=function(t,i){var r=this.getAnimating()||this.getInteracting(),a=this.constraints_.rotation(this.targetRotation_+t,r);i&&(this.targetCenter_=this.calculateCenterRotate(a,i)),this.targetRotation_+=t,this.applyTargetState_()},e.prototype.setCenter=function(t){this.setCenterInternal(Gt(t,this.getProjection()))},e.prototype.setCenterInternal=function(t){this.targetCenter_=t,this.applyTargetState_()},e.prototype.setHint=function(t,i){return this.hints_[t]+=i,this.changed(),this.hints_[t]},e.prototype.setResolution=function(t){this.targetResolution_=t,this.applyTargetState_()},e.prototype.setRotation=function(t){this.targetRotation_=t,this.applyTargetState_()},e.prototype.setZoom=function(t){this.setResolution(this.getResolutionForZoom(t))},e.prototype.applyTargetState_=function(t,i){var r=this.getAnimating()||this.getInteracting()||i,a=this.constraints_.rotation(this.targetRotation_,r),o=this.getViewportSize_(a),s=this.constraints_.resolution(this.targetResolution_,0,o,r),h=this.constraints_.center(this.targetCenter_,s,o,r,this.calculateCenterShift(this.targetCenter_,s,a,o));this.get(At.ROTATION)!==a&&this.set(At.ROTATION,a),this.get(At.RESOLUTION)!==s&&this.set(At.RESOLUTION,s),(!this.get(At.CENTER)||!yi(this.get(At.CENTER),h))&&this.set(At.CENTER,h),this.getAnimating()&&!t&&this.cancelAnimations(),this.cancelAnchor_=void 0},e.prototype.resolveConstraints=function(t,i,r){var a=t!==void 0?t:200,o=i||0,s=this.constraints_.rotation(this.targetRotation_),h=this.getViewportSize_(s),l=this.constraints_.resolution(this.targetResolution_,o,h),u=this.constraints_.center(this.targetCenter_,l,h,!1,this.calculateCenterShift(this.targetCenter_,l,s,h));if(a===0&&!this.cancelAnchor_){this.targetResolution_=l,this.targetRotation_=s,this.targetCenter_=u,this.applyTargetState_();return}var f=r||(a===0?this.cancelAnchor_:void 0);this.cancelAnchor_=void 0,(this.getResolution()!==l||this.getRotation()!==s||!this.getCenterInternal()||!yi(this.getCenterInternal(),u))&&(this.getAnimating()&&this.cancelAnimations(),this.animateInternal({rotation:s,center:u,resolution:l,duration:a,easing:Oe,anchor:f}))},e.prototype.beginInteraction=function(){this.resolveConstraints(0),this.setHint(Mt.INTERACTING,1)},e.prototype.endInteraction=function(t,i,r){var a=r&&Gt(r,this.getProjection());this.endInteractionInternal(t,i,a)},e.prototype.endInteractionInternal=function(t,i,r){this.setHint(Mt.INTERACTING,-1),this.resolveConstraints(t,i,r)},e.prototype.getConstrainedCenter=function(t,i){var r=this.getViewportSize_(this.getRotation());return this.constraints_.center(t,i||this.getResolution(),r)},e.prototype.getConstrainedZoom=function(t,i){var r=this.getResolutionForZoom(t);return this.getZoomForResolution(this.getConstrainedResolution(r,i))},e.prototype.getConstrainedResolution=function(t,i){var r=i||0,a=this.getViewportSize_(this.getRotation());return this.constraints_.resolution(t,r,a)},e}(yt);function jn(n,e){setTimeout(function(){n(e)},0)}function Zl(n){if(n.extent!==void 0){var e=n.smoothExtentConstraint!==void 0?n.smoothExtentConstraint:!0;return xa(n.extent,n.constrainOnlyCenter,e)}var t=xi(n.projection,"EPSG:3857");if(n.multiWorld!==!0&&t.isGlobal()){var i=t.getExtent().slice();return i[0]=-1/0,i[2]=1/0,xa(i,!1,!1)}return $l}function Bl(n){var e,t,i,r=28,a=2,o=n.minZoom!==void 0?n.minZoom:Ai,s=n.maxZoom!==void 0?n.maxZoom:r,h=n.zoomFactor!==void 0?n.zoomFactor:a,l=n.multiWorld!==void 0?n.multiWorld:!1,u=n.smoothResolutionConstraint!==void 0?n.smoothResolutionConstraint:!0,f=n.showFullExtent!==void 0?n.showFullExtent:!1,c=xi(n.projection,"EPSG:3857"),v=c.getExtent(),d=n.constrainOnlyCenter,p=n.extent;if(!l&&!p&&c.isGlobal()&&(d=!1,p=v),n.resolutions!==void 0){var _=n.resolutions;t=_[o],i=_[s]!==void 0?_[s]:_[_.length-1],n.constrainResolution?e=zl(_,u,!d&&p,f):e=Ta(t,i,u,!d&&p,f)}else{var y=v?Math.max(Y(v),Rt(v)):360*It[Ft.DEGREES]/c.getMetersPerUnit(),m=y/Pi/Math.pow(a,Ai),g=m/Math.pow(a,r-Ai);t=n.maxResolution,t!==void 0?o=0:t=m/Math.pow(h,o),i=n.minResolution,i===void 0&&(n.maxZoom!==void 0?n.maxResolution!==void 0?i=t/Math.pow(h,s):i=m/Math.pow(h,s):i=g),s=o+Math.floor(Math.log(t/i)/Math.log(h)),i=t/Math.pow(h,s-o),n.constrainResolution?e=Ul(h,t,i,u,!d&&p,f):e=Ta(t,i,u,!d&&p,f)}return{constraint:e,maxResolution:t,minResolution:i,minZoom:o,zoomFactor:h}}function Vl(n){var e=n.enableRotation!==void 0?n.enableRotation:!0;if(e){var t=n.constrainRotation;return t===void 0||t===!0?Kl():t===!1?Ca:typeof t=="number"?kl(t):Ca}else return Si}function Wl(n){return!(n.sourceCenter&&n.targetCenter&&!yi(n.sourceCenter,n.targetCenter)||n.sourceResolution!==n.targetResolution||n.sourceRotation!==n.targetRotation)}function Li(n,e,t,i,r){var a=Math.cos(-r),o=Math.sin(-r),s=n[0]*a-n[1]*o,h=n[1]*a+n[0]*o;s+=(e[0]/2-t[0])*i,h+=(t[1]-e[1]/2)*i,o=-o;var l=s*a-h*o,u=h*a+s*o;return[l,u]}var re=Xl,Hl=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,r){i.__proto__=r}||function(i,r){for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(i[a]=r[a])},n(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");n(e,t);function i(){this.constructor=e}e.prototype=t===null?Object.create(t):(i.prototype=t.prototype,new i)}}(),Yl=function(n){Hl(e,n);function e(t){var i=n.call(this)||this;i.on,i.once,i.un;var r=Ql(t);i.boundHandleBrowserEvent_=i.handleBrowserEvent.bind(i),i.maxTilesLoading_=t.maxTilesLoading!==void 0?t.maxTilesLoading:16,i.pixelRatio_=t.pixelRatio!==void 0?t.pixelRatio:Er,i.postRenderTimeoutHandle_,i.animationDelayKey_,i.animationDelay_=function(){this.animationDelayKey_=void 0,this.renderFrame_(Date.now())}.bind(i),i.coordinateToPixelTransform_=pe(),i.pixelToCoordinateTransform_=pe(),i.frameIndex_=0,i.frameState_=null,i.previousExtent_=null,i.viewPropertyListenerKey_=null,i.viewChangeListenerKey_=null,i.layerGroupPropertyListenerKeys_=null,i.viewport_=document.createElement("div"),i.viewport_.className="ol-viewport"+("ontouchstart"in window?" ol-touch":""),i.viewport_.style.position="relative",i.viewport_.style.overflow="hidden",i.viewport_.style.width="100%",i.viewport_.style.height="100%",i.overlayContainer_=document.createElement("div"),i.overlayContainer_.style.position="absolute",i.overlayContainer_.style.zIndex="0",i.overlayContainer_.style.width="100%",i.overlayContainer_.style.height="100%",i.overlayContainer_.style.pointerEvents="none",i.overlayContainer_.className="ol-overlaycontainer",i.viewport_.appendChild(i.overlayContainer_),i.overlayContainerStopEvent_=document.createElement("div"),i.overlayContainerStopEvent_.style.position="absolute",i.overlayContainerStopEvent_.style.zIndex="0",i.overlayContainerStopEvent_.style.width="100%",i.overlayContainerStopEvent_.style.height="100%",i.overlayContainerStopEvent_.style.pointerEvents="none",i.overlayContainerStopEvent_.className="ol-overlaycontainer-stopevent",i.viewport_.appendChild(i.overlayContainerStopEvent_),i.mapBrowserEventHandler_=null,i.moveTolerance_=t.moveTolerance,i.keyboardEventTarget_=r.keyboardEventTarget,i.keyHandlerKeys_=null,i.controls=r.controls||new Ot,i.interactions=r.interactions||new Ot,i.overlays_=r.overlays,i.overlayIdIndex_={},i.renderer_=null,i.handleResize_,i.postRenderFunctions_=[],i.tileQueue_=new Fl(i.getTilePriority.bind(i),i.handleTileChange_.bind(i)),i.addChangeListener(it.LAYERGROUP,i.handleLayerGroupChanged_),i.addChangeListener(it.VIEW,i.handleViewChanged_),i.addChangeListener(it.SIZE,i.handleSizeChanged_),i.addChangeListener(it.TARGET,i.handleTargetChanged_),i.setProperties(r.values);var a=i;return t.view&&!(t.view instanceof re)&&t.view.then(function(o){a.setView(new re(o))}),i.controls.addEventListener(gt.ADD,function(o){o.element.setMap(this)}.bind(i)),i.controls.addEventListener(gt.REMOVE,function(o){o.element.setMap(null)}.bind(i)),i.interactions.addEventListener(gt.ADD,function(o){o.element.setMap(this)}.bind(i)),i.interactions.addEventListener(gt.REMOVE,function(o){o.element.setMap(null)}.bind(i)),i.overlays_.addEventListener(gt.ADD,function(o){this.addOverlayInternal_(o.element)}.bind(i)),i.overlays_.addEventListener(gt.REMOVE,function(o){var s=o.element,h=s.getId();h!==void 0&&delete this.overlayIdIndex_[h.toString()],o.element.setMap(null)}.bind(i)),i.controls.forEach(function(o){o.setMap(this)}.bind(i)),i.interactions.forEach(function(o){o.setMap(this)}.bind(i)),i.overlays_.forEach(i.addOverlayInternal_.bind(i)),i}return e.prototype.createRenderer=function(){throw new Error("Use a map type that has a createRenderer method")},e.prototype.addControl=function(t){this.getControls().push(t)},e.prototype.addInteraction=function(t){this.getInteractions().push(t)},e.prototype.addLayer=function(t){var i=this.getLayerGroup().getLayers();i.push(t)},e.prototype.addOverlay=function(t){this.getOverlays().push(t)},e.prototype.addOverlayInternal_=function(t){var i=t.getId();i!==void 0&&(this.overlayIdIndex_[i.toString()]=t),t.setMap(this)},e.prototype.disposeInternal=function(){this.setTarget(null),n.prototype.disposeInternal.call(this)},e.prototype.forEachFeatureAtPixel=function(t,i,r){if(!!this.frameState_){var a=this.getCoordinateFromPixelInternal(t);r=r!==void 0?r:{};var o=r.hitTolerance!==void 0?r.hitTolerance:0,s=r.layerFilter!==void 0?r.layerFilter:$e,h=r.checkWrapped!==!1;return this.renderer_.forEachFeatureAtCoordinate(a,this.frameState_,o,h,i,null,s,null)}},e.prototype.getFeaturesAtPixel=function(t,i){var r=[];return this.forEachFeatureAtPixel(t,function(a){r.push(a)},i),r},e.prototype.forEachLayerAtPixel=function(t,i,r){if(!!this.frameState_){var a=r||{},o=a.hitTolerance!==void 0?a.hitTolerance:0,s=a.layerFilter||$e;return this.renderer_.forEachLayerAtPixel(t,this.frameState_,o,i,s)}},e.prototype.hasFeatureAtPixel=function(t,i){if(!this.frameState_)return!1;var r=this.getCoordinateFromPixelInternal(t);i=i!==void 0?i:{};var a=i.layerFilter!==void 0?i.layerFilter:$e,o=i.hitTolerance!==void 0?i.hitTolerance:0,s=i.checkWrapped!==!1;return this.renderer_.hasFeatureAtCoordinate(r,this.frameState_,o,s,a,null)},e.prototype.getEventCoordinate=function(t){return this.getCoordinateFromPixel(this.getEventPixel(t))},e.prototype.getEventCoordinateInternal=function(t){return this.getCoordinateFromPixelInternal(this.getEventPixel(t))},e.prototype.getEventPixel=function(t){var i=this.viewport_.getBoundingClientRect(),r="changedTouches"in t?t.changedTouches[0]:t;return[r.clientX-i.left,r.clientY-i.top]},e.prototype.getTarget=function(){return this.get(it.TARGET)},e.prototype.getTargetElement=function(){var t=this.getTarget();return t!==void 0?typeof t=="string"?document.getElementById(t):t:null},e.prototype.getCoordinateFromPixel=function(t){return Ti(this.getCoordinateFromPixelInternal(t),this.getView().getProjection())},e.prototype.getCoordinateFromPixelInternal=function(t){var i=this.frameState_;return i?dt(i.pixelToCoordinateTransform,t.slice()):null},e.prototype.getControls=function(){return this.controls},e.prototype.getOverlays=function(){return this.overlays_},e.prototype.getOverlayById=function(t){var i=this.overlayIdIndex_[t.toString()];return i!==void 0?i:null},e.prototype.getInteractions=function(){return this.interactions},e.prototype.getLayerGroup=function(){return this.get(it.LAYERGROUP)},e.prototype.setLayers=function(t){var i=this.getLayerGroup();if(t instanceof Ot){i.setLayers(t);return}var r=i.getLayers();r.clear(),r.extend(t)},e.prototype.getLayers=function(){var t=this.getLayerGroup().getLayers();return t},e.prototype.getLoading=function(){for(var t=this.getLayerGroup().getLayerStatesArray(),i=0,r=t.length;i<r;++i){var a=t[i].layer,o=a.getSource();if(o&&o.loading)return!0}return!1},e.prototype.getPixelFromCoordinate=function(t){var i=Gt(t,this.getView().getProjection());return this.getPixelFromCoordinateInternal(i)},e.prototype.getPixelFromCoordinateInternal=function(t){var i=this.frameState_;return i?dt(i.coordinateToPixelTransform,t.slice(0,2)):null},e.prototype.getRenderer=function(){return this.renderer_},e.prototype.getSize=function(){return this.get(it.SIZE)},e.prototype.getView=function(){return this.get(it.VIEW)},e.prototype.getViewport=function(){return this.viewport_},e.prototype.getOverlayContainer=function(){return this.overlayContainer_},e.prototype.getOverlayContainerStopEvent=function(){return this.overlayContainerStopEvent_},e.prototype.getOwnerDocument=function(){var t=this.getTargetElement();return t?t.ownerDocument:document},e.prototype.getTilePriority=function(t,i,r,a){return Gl(this.frameState_,t,i,r,a)},e.prototype.handleBrowserEvent=function(t,i){var r=i||t.type,a=new Bt(r,this,t);this.handleMapBrowserEvent(a)},e.prototype.handleMapBrowserEvent=function(t){if(!!this.frameState_){var i=t.originalEvent,r=i.type;if(r===We.POINTERDOWN||r===S.WHEEL||r===S.KEYDOWN){var a=this.getOwnerDocument(),o=this.viewport_.getRootNode?this.viewport_.getRootNode():a,s=i.target;if(this.overlayContainerStopEvent_.contains(s)||!(o===a?a.documentElement:o).contains(s))return}if(t.frameState=this.frameState_,this.dispatchEvent(t)!==!1)for(var h=this.getInteractions().getArray().slice(),l=h.length-1;l>=0;l--){var u=h[l];if(!(u.getMap()!==this||!u.getActive()||!this.getTargetElement())){var f=u.handleEvent(t);if(!f||t.propagationStopped)break}}}},e.prototype.handlePostRender=function(){var t=this.frameState_,i=this.tileQueue_;if(!i.isEmpty()){var r=this.maxTilesLoading_,a=r;if(t){var o=t.viewHints;if(o[Mt.ANIMATING]||o[Mt.INTERACTING]){var s=Date.now()-t.time>8;r=s?0:8,a=s?0:2}}i.getTilesLoading()<r&&(i.reprioritize(),i.loadMoreTiles(r,a))}t&&this.hasListener(ie.RENDERCOMPLETE)&&!t.animate&&!this.tileQueue_.getTilesLoading()&&!this.getLoading()&&this.renderer_.dispatchRenderEvent(ie.RENDERCOMPLETE,t);for(var h=this.postRenderFunctions_,l=0,u=h.length;l<u;++l)h[l](this,t);h.length=0},e.prototype.handleSizeChanged_=function(){this.getView()&&!this.getView().getAnimating()&&this.getView().resolveConstraints(0),this.render()},e.prototype.handleTargetChanged_=function(){var t;if(this.getTarget()&&(t=this.getTargetElement()),this.mapBrowserEventHandler_){for(var i=0,r=this.keyHandlerKeys_.length;i<r;++i)B(this.keyHandlerKeys_[i]);this.keyHandlerKeys_=null,this.viewport_.removeEventListener(S.CONTEXTMENU,this.boundHandleBrowserEvent_),this.viewport_.removeEventListener(S.WHEEL,this.boundHandleBrowserEvent_),this.handleResize_!==void 0&&(removeEventListener(S.RESIZE,this.handleResize_,!1),this.handleResize_=void 0),this.mapBrowserEventHandler_.dispose(),this.mapBrowserEventHandler_=null,Ln(this.viewport_)}if(!t)this.renderer_&&(clearTimeout(this.postRenderTimeoutHandle_),this.postRenderTimeoutHandle_=void 0,this.postRenderFunctions_.length=0,this.renderer_.dispose(),this.renderer_=null),this.animationDelayKey_&&(cancelAnimationFrame(this.animationDelayKey_),this.animationDelayKey_=void 0);else{t.appendChild(this.viewport_),this.renderer_||(this.renderer_=this.createRenderer()),this.mapBrowserEventHandler_=new Al(this,this.moveTolerance_);for(var a in q)this.mapBrowserEventHandler_.addEventListener(q[a],this.handleMapBrowserEvent.bind(this));this.viewport_.addEventListener(S.CONTEXTMENU,this.boundHandleBrowserEvent_,!1),this.viewport_.addEventListener(S.WHEEL,this.boundHandleBrowserEvent_,Tr?{passive:!1}:!1);var o=this.keyboardEventTarget_?this.keyboardEventTarget_:t;this.keyHandlerKeys_=[D(o,S.KEYDOWN,this.handleBrowserEvent,this),D(o,S.KEYPRESS,this.handleBrowserEvent,this)],this.handleResize_||(this.handleResize_=this.updateSize.bind(this),window.addEventListener(S.RESIZE,this.handleResize_,!1))}this.updateSize()},e.prototype.handleTileChange_=function(){this.render()},e.prototype.handleViewPropertyChanged_=function(){this.render()},e.prototype.handleViewChanged_=function(){this.viewPropertyListenerKey_&&(B(this.viewPropertyListenerKey_),this.viewPropertyListenerKey_=null),this.viewChangeListenerKey_&&(B(this.viewChangeListenerKey_),this.viewChangeListenerKey_=null);var t=this.getView();t&&(this.updateViewportSize_(),this.viewPropertyListenerKey_=D(t,ce.PROPERTYCHANGE,this.handleViewPropertyChanged_,this),this.viewChangeListenerKey_=D(t,S.CHANGE,this.handleViewPropertyChanged_,this),t.resolveConstraints(0)),this.render()},e.prototype.handleLayerGroupChanged_=function(){this.layerGroupPropertyListenerKeys_&&(this.layerGroupPropertyListenerKeys_.forEach(B),this.layerGroupPropertyListenerKeys_=null);var t=this.getLayerGroup();t&&(this.layerGroupPropertyListenerKeys_=[D(t,ce.PROPERTYCHANGE,this.render,this),D(t,S.CHANGE,this.render,this)]),this.render()},e.prototype.isRendered=function(){return!!this.frameState_},e.prototype.renderSync=function(){this.animationDelayKey_&&cancelAnimationFrame(this.animationDelayKey_),this.animationDelay_()},e.prototype.redrawText=function(){for(var t=this.getLayerGroup().getLayerStatesArray(),i=0,r=t.length;i<r;++i){var a=t[i].layer;a.hasRenderer()&&a.getRenderer().handleFontsChanged()}},e.prototype.render=function(){this.renderer_&&this.animationDelayKey_===void 0&&(this.animationDelayKey_=requestAnimationFrame(this.animationDelay_))},e.prototype.removeControl=function(t){return this.getControls().remove(t)},e.prototype.removeInteraction=function(t){return this.getInteractions().remove(t)},e.prototype.removeLayer=function(t){var i=this.getLayerGroup().getLayers();return i.remove(t)},e.prototype.removeOverlay=function(t){return this.getOverlays().remove(t)},e.prototype.renderFrame_=function(t){var i=this,r=this.getSize(),a=this.getView(),o=this.frameState_,s=null;if(r!==void 0&&ha(r)&&a&&a.isDef()){var h=a.getHints(this.frameState_?this.frameState_.viewHints:void 0),l=a.getState();if(s={animate:!1,coordinateToPixelTransform:this.coordinateToPixelTransform_,declutterTree:null,extent:ci(l.center,l.resolution,l.rotation,r),index:this.frameIndex_++,layerIndex:0,layerStatesArray:this.getLayerGroup().getLayerStatesArray(),pixelRatio:this.pixelRatio_,pixelToCoordinateTransform:this.pixelToCoordinateTransform_,postRenderFunctions:[],size:r,tileQueue:this.tileQueue_,time:t,usedTiles:{},viewState:l,viewHints:h,wantedTiles:{}},l.nextCenter&&l.nextResolution){var u=isNaN(l.nextRotation)?l.rotation:l.nextRotation;s.nextExtent=ci(l.nextCenter,l.nextResolution,u,r)}}if(this.frameState_=s,this.renderer_.renderFrame(s),s){if(s.animate&&this.render(),Array.prototype.push.apply(this.postRenderFunctions_,s.postRenderFunctions),o){var f=!this.previousExtent_||!di(this.previousExtent_)&&!ui(s.extent,this.previousExtent_);f&&(this.dispatchEvent(new Fn(He.MOVESTART,this,o)),this.previousExtent_=Cn(this.previousExtent_))}var c=this.previousExtent_&&!s.viewHints[Mt.ANIMATING]&&!s.viewHints[Mt.INTERACTING]&&!ui(s.extent,this.previousExtent_);c&&(this.dispatchEvent(new Fn(He.MOVEEND,this,s)),ds(s.extent,this.previousExtent_))}this.dispatchEvent(new Fn(He.POSTRENDER,this,s)),this.postRenderTimeoutHandle_||(this.postRenderTimeoutHandle_=setTimeout(function(){i.postRenderTimeoutHandle_=void 0,i.handlePostRender()},0))},e.prototype.setLayerGroup=function(t){this.set(it.LAYERGROUP,t)},e.prototype.setSize=function(t){this.set(it.SIZE,t)},e.prototype.setTarget=function(t){this.set(it.TARGET,t)},e.prototype.setView=function(t){if(!t||t instanceof re){this.set(it.VIEW,t);return}this.set(it.VIEW,new re);var i=this;t.then(function(r){i.setView(new re(r))})},e.prototype.updateSize=function(){var t=this.getTargetElement(),i=void 0;if(t){var r=getComputedStyle(t),a=t.offsetWidth-parseFloat(r.borderLeftWidth)-parseFloat(r.paddingLeft)-parseFloat(r.paddingRight)-parseFloat(r.borderRightWidth),o=t.offsetHeight-parseFloat(r.borderTopWidth)-parseFloat(r.paddingTop)-parseFloat(r.paddingBottom)-parseFloat(r.borderBottomWidth);!isNaN(a)&&!isNaN(o)&&(i=[a,o],!ha(i)&&!!(t.offsetWidth||t.offsetHeight||t.getClientRects().length)&&console.warn("No map visible because the map container's width or height are 0."))}this.setSize(i),this.updateViewportSize_()},e.prototype.updateViewportSize_=function(){var t=this.getView();if(t){var i=void 0,r=getComputedStyle(this.viewport_);r.width&&r.height&&(i=[parseInt(r.width,10),parseInt(r.height,10)]),t.setViewportSize(i)}},e}(yt);function Ql(n){var e=null;n.keyboardEventTarget!==void 0&&(e=typeof n.keyboardEventTarget=="string"?document.getElementById(n.keyboardEventTarget):n.keyboardEventTarget);var t={},i=n.layers&&typeof n.layers.getLayers=="function"?n.layers:new Cl({layers:n.layers});t[it.LAYERGROUP]=i,t[it.TARGET]=n.target,t[it.VIEW]=n.view instanceof re?n.view:new re;var r;n.controls!==void 0&&(Array.isArray(n.controls)?r=new Ot(n.controls.slice()):($(typeof n.controls.getArray=="function",47),r=n.controls));var a;n.interactions!==void 0&&(Array.isArray(n.interactions)?a=new Ot(n.interactions.slice()):($(typeof n.interactions.getArray=="function",48),a=n.interactions));var o;return n.overlays!==void 0?Array.isArray(n.overlays)?o=new Ot(n.overlays.slice()):($(typeof n.overlays.getArray=="function",49),o=n.overlays):o=new Ot,{controls:r,interactions:a,keyboardEventTarget:e,overlays:o,values:t}}var Jl=Yl,tu=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,r){i.__proto__=r}||function(i,r){for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(i[a]=r[a])},n(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");n(e,t);function i(){this.constructor=e}e.prototype=t===null?Object.create(t):(i.prototype=t.prototype,new i)}}(),eu=function(n){tu(e,n);function e(t){var i=n.call(this)||this,r=t.element;return r&&!t.target&&!r.style.pointerEvents&&(r.style.pointerEvents="auto"),i.element=r||null,i.target_=null,i.map_=null,i.listenerKeys=[],t.render&&(i.render=t.render),t.target&&i.setTarget(t.target),i}return e.prototype.disposeInternal=function(){Ln(this.element),n.prototype.disposeInternal.call(this)},e.prototype.getMap=function(){return this.map_},e.prototype.setMap=function(t){this.map_&&Ln(this.element);for(var i=0,r=this.listenerKeys.length;i<r;++i)B(this.listenerKeys[i]);if(this.listenerKeys.length=0,this.map_=t,this.map_){var a=this.target_?this.target_:t.getOverlayContainerStopEvent();a.appendChild(this.element),this.render!==ze&&this.listenerKeys.push(D(t,He.POSTRENDER,this.render,this)),t.render()}},e.prototype.render=function(t){},e.prototype.setTarget=function(t){this.target_=typeof t=="string"?document.getElementById(t):t},e}(yt),Re=eu,nu=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,r){i.__proto__=r}||function(i,r){for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(i[a]=r[a])},n(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");n(e,t);function i(){this.constructor=e}e.prototype=t===null?Object.create(t):(i.prototype=t.prototype,new i)}}(),iu=function(n){nu(e,n);function e(t){var i=this,r=t||{};i=n.call(this,{element:document.createElement("div"),render:r.render,target:r.target})||this,i.ulElement_=document.createElement("ul"),i.collapsed_=r.collapsed!==void 0?r.collapsed:!0,i.userCollapsed_=i.collapsed_,i.overrideCollapsible_=r.collapsible!==void 0,i.collapsible_=r.collapsible!==void 0?r.collapsible:!0,i.collapsible_||(i.collapsed_=!1);var a=r.className!==void 0?r.className:"ol-attribution",o=r.tipLabel!==void 0?r.tipLabel:"Attributions",s=r.expandClassName!==void 0?r.expandClassName:a+"-expand",h=r.collapseLabel!==void 0?r.collapseLabel:"\u203A",l=r.collapseClassName!==void 0?r.collapseClassName:a+"-collpase";typeof h=="string"?(i.collapseLabel_=document.createElement("span"),i.collapseLabel_.textContent=h,i.collapseLabel_.className=l):i.collapseLabel_=h;var u=r.label!==void 0?r.label:"i";typeof u=="string"?(i.label_=document.createElement("span"),i.label_.textContent=u,i.label_.className=s):i.label_=u;var f=i.collapsible_&&!i.collapsed_?i.collapseLabel_:i.label_;i.toggleButton_=document.createElement("button"),i.toggleButton_.setAttribute("type","button"),i.toggleButton_.setAttribute("aria-expanded",String(!i.collapsed_)),i.toggleButton_.title=o,i.toggleButton_.appendChild(f),i.toggleButton_.addEventListener(S.CLICK,i.handleClick_.bind(i),!1);var c=a+" "+bn+" "+Oi+(i.collapsed_&&i.collapsible_?" "+ca:"")+(i.collapsible_?"":" ol-uncollapsible"),v=i.element;return v.className=c,v.appendChild(i.toggleButton_),v.appendChild(i.ulElement_),i.renderedAttributions_=[],i.renderedVisible_=!0,i}return e.prototype.collectSourceAttributions_=function(t){for(var i={},r=[],a=!0,o=t.layerStatesArray,s=0,h=o.length;s<h;++s){var l=o[s];if(!!Dn(l,t.viewState)){var u=l.layer.getSource();if(!!u){var f=u.getAttributions();if(!!f){var c=f(t);if(!!c)if(a=a&&u.getAttributionsCollapsible()!==!1,Array.isArray(c))for(var v=0,d=c.length;v<d;++v)c[v]in i||(r.push(c[v]),i[c[v]]=!0);else c in i||(r.push(c),i[c]=!0)}}}}return this.overrideCollapsible_||this.setCollapsible(a),r},e.prototype.updateElement_=function(t){if(!t){this.renderedVisible_&&(this.element.style.display="none",this.renderedVisible_=!1);return}var i=this.collectSourceAttributions_(t),r=i.length>0;if(this.renderedVisible_!=r&&(this.element.style.display=r?"":"none",this.renderedVisible_=r),!pr(i,this.renderedAttributions_)){fa(this.ulElement_);for(var a=0,o=i.length;a<o;++a){var s=document.createElement("li");s.innerHTML=i[a],this.ulElement_.appendChild(s)}this.renderedAttributions_=i}},e.prototype.handleClick_=function(t){t.preventDefault(),this.handleToggle_(),this.userCollapsed_=this.collapsed_},e.prototype.handleToggle_=function(){this.element.classList.toggle(ca),this.collapsed_?ua(this.collapseLabel_,this.label_):ua(this.label_,this.collapseLabel_),this.collapsed_=!this.collapsed_,this.toggleButton_.setAttribute("aria-expanded",String(!this.collapsed_))},e.prototype.getCollapsible=function(){return this.collapsible_},e.prototype.setCollapsible=function(t){this.collapsible_!==t&&(this.collapsible_=t,this.element.classList.toggle("ol-uncollapsible"),this.userCollapsed_&&this.handleToggle_())},e.prototype.setCollapsed=function(t){this.userCollapsed_=t,!(!this.collapsible_||this.collapsed_===t)&&this.handleToggle_()},e.prototype.getCollapsed=function(){return this.collapsed_},e.prototype.render=function(t){this.updateElement_(t.frameState)},e}(Re),ru=iu,au=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,r){i.__proto__=r}||function(i,r){for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(i[a]=r[a])},n(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");n(e,t);function i(){this.constructor=e}e.prototype=t===null?Object.create(t):(i.prototype=t.prototype,new i)}}(),ou=function(n){au(e,n);function e(t){var i=this,r=t||{};i=n.call(this,{element:document.createElement("div"),render:r.render,target:r.target})||this;var a=r.className!==void 0?r.className:"ol-rotate",o=r.label!==void 0?r.label:"\u21E7",s=r.compassClassName!==void 0?r.compassClassName:"ol-compass";i.label_=null,typeof o=="string"?(i.label_=document.createElement("span"),i.label_.className=s,i.label_.textContent=o):(i.label_=o,i.label_.classList.add(s));var h=r.tipLabel?r.tipLabel:"Reset rotation",l=document.createElement("button");l.className=a+"-reset",l.setAttribute("type","button"),l.title=h,l.appendChild(i.label_),l.addEventListener(S.CLICK,i.handleClick_.bind(i),!1);var u=a+" "+bn+" "+Oi,f=i.element;return f.className=u,f.appendChild(l),i.callResetNorth_=r.resetNorth?r.resetNorth:void 0,i.duration_=r.duration!==void 0?r.duration:250,i.autoHide_=r.autoHide!==void 0?r.autoHide:!0,i.rotation_=void 0,i.autoHide_&&i.element.classList.add(Nn),i}return e.prototype.handleClick_=function(t){t.preventDefault(),this.callResetNorth_!==void 0?this.callResetNorth_():this.resetNorth_()},e.prototype.resetNorth_=function(){var t=this.getMap(),i=t.getView();if(!!i){var r=i.getRotation();r!==void 0&&(this.duration_>0&&r%(2*Math.PI)!=0?i.animate({rotation:0,duration:this.duration_,easing:Oe}):i.setRotation(0))}},e.prototype.render=function(t){var i=t.frameState;if(!!i){var r=i.viewState.rotation;if(r!=this.rotation_){var a="rotate("+r+"rad)";if(this.autoHide_){var o=this.element.classList.contains(Nn);!o&&r===0?this.element.classList.add(Nn):o&&r!==0&&this.element.classList.remove(Nn)}this.label_.style.transform=a}this.rotation_=r}},e}(Re),su=ou,hu=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,r){i.__proto__=r}||function(i,r){for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(i[a]=r[a])},n(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");n(e,t);function i(){this.constructor=e}e.prototype=t===null?Object.create(t):(i.prototype=t.prototype,new i)}}(),lu=function(n){hu(e,n);function e(t){var i=this,r=t||{};i=n.call(this,{element:document.createElement("div"),target:r.target})||this;var a=r.className!==void 0?r.className:"ol-zoom",o=r.delta!==void 0?r.delta:1,s=r.zoomInClassName!==void 0?r.zoomInClassName:a+"-in",h=r.zoomOutClassName!==void 0?r.zoomOutClassName:a+"-out",l=r.zoomInLabel!==void 0?r.zoomInLabel:"+",u=r.zoomOutLabel!==void 0?r.zoomOutLabel:"\u2013",f=r.zoomInTipLabel!==void 0?r.zoomInTipLabel:"Zoom in",c=r.zoomOutTipLabel!==void 0?r.zoomOutTipLabel:"Zoom out",v=document.createElement("button");v.className=s,v.setAttribute("type","button"),v.title=f,v.appendChild(typeof l=="string"?document.createTextNode(l):l),v.addEventListener(S.CLICK,i.handleClick_.bind(i,o),!1);var d=document.createElement("button");d.className=h,d.setAttribute("type","button"),d.title=c,d.appendChild(typeof u=="string"?document.createTextNode(u):u),d.addEventListener(S.CLICK,i.handleClick_.bind(i,-o),!1);var p=a+" "+bn+" "+Oi,_=i.element;return _.className=p,_.appendChild(v),_.appendChild(d),i.duration_=r.duration!==void 0?r.duration:250,i}return e.prototype.handleClick_=function(t,i){i.preventDefault(),this.zoomByDelta_(t)},e.prototype.zoomByDelta_=function(t){var i=this.getMap(),r=i.getView();if(!!r){var a=r.getZoom();if(a!==void 0){var o=r.getConstrainedZoom(a+t);this.duration_>0?(r.getAnimating()&&r.cancelAnimations(),r.animate({zoom:o,duration:this.duration_,easing:Oe})):r.setZoom(o)}}},e}(Re),uu=lu,fu=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,r){i.__proto__=r}||function(i,r){for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(i[a]=r[a])},n(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");n(e,t);function i(){this.constructor=e}e.prototype=t===null?Object.create(t):(i.prototype=t.prototype,new i)}}(),Ni="projection",Oa="coordinateFormat",cu=function(n){fu(e,n);function e(t){var i=this,r=t||{},a=document.createElement("div");a.className=r.className!==void 0?r.className:"ol-mouse-position",i=n.call(this,{element:a,render:r.render,target:r.target})||this,i.on,i.once,i.un,i.addChangeListener(Ni,i.handleProjectionChanged_),r.coordinateFormat&&i.setCoordinateFormat(r.coordinateFormat),r.projection&&i.setProjection(r.projection);var o=!0,s="&#160;";return"undefinedHTML"in r?(r.undefinedHTML!==void 0&&(s=r.undefinedHTML),o=!!s):"placeholder"in r&&(r.placeholder===!1?o=!1:s=String(r.placeholder)),i.placeholder_=s,i.renderOnMouseOut_=o,i.renderedHTML_=a.innerHTML,i.mapProjection_=null,i.transform_=null,i}return e.prototype.handleProjectionChanged_=function(){this.transform_=null},e.prototype.getCoordinateFormat=function(){return this.get(Oa)},e.prototype.getProjection=function(){return this.get(Ni)},e.prototype.handleMouseMove=function(t){var i=this.getMap();this.updateHTML_(i.getEventPixel(t))},e.prototype.handleMouseOut=function(t){this.updateHTML_(null)},e.prototype.setMap=function(t){if(n.prototype.setMap.call(this,t),t){var i=t.getViewport();this.listenerKeys.push(D(i,We.POINTERMOVE,this.handleMouseMove,this)),this.renderOnMouseOut_&&this.listenerKeys.push(D(i,We.POINTEROUT,this.handleMouseOut,this)),this.updateHTML_(null)}},e.prototype.setCoordinateFormat=function(t){this.set(Oa,t)},e.prototype.setProjection=function(t){this.set(Ni,Q(t))},e.prototype.updateHTML_=function(t){var i=this.placeholder_;if(t&&this.mapProjection_){if(!this.transform_){var r=this.getProjection();r?this.transform_=Be(this.mapProjection_,r):this.transform_=Mi}var a=this.getMap(),o=a.getCoordinateFromPixelInternal(t);if(o){var s=qr();s&&(this.transform_=Be(this.mapProjection_,s)),this.transform_(o,o);var h=this.getCoordinateFormat();h?i=h(o):i=o.toString()}}(!this.renderedHTML_||i!==this.renderedHTML_)&&(this.element.innerHTML=i,this.renderedHTML_=i)},e.prototype.render=function(t){var i=t.frameState;i?this.mapProjection_!=i.viewState.projection&&(this.mapProjection_=i.viewState.projection,this.transform_=null):this.mapProjection_=null},e}(Re),Np=cu,pt={BOTTOM_LEFT:"bottom-left",BOTTOM_CENTER:"bottom-center",BOTTOM_RIGHT:"bottom-right",CENTER_LEFT:"center-left",CENTER_CENTER:"center-center",CENTER_RIGHT:"center-right",TOP_LEFT:"top-left",TOP_CENTER:"top-center",TOP_RIGHT:"top-right"},vu=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,r){i.__proto__=r}||function(i,r){for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(i[a]=r[a])},n(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");n(e,t);function i(){this.constructor=e}e.prototype=t===null?Object.create(t):(i.prototype=t.prototype,new i)}}(),rt={ELEMENT:"element",MAP:"map",OFFSET:"offset",POSITION:"position",POSITIONING:"positioning"},du=function(n){vu(e,n);function e(t){var i=n.call(this)||this;i.on,i.once,i.un,i.options=t,i.id=t.id,i.insertFirst=t.insertFirst!==void 0?t.insertFirst:!0,i.stopEvent=t.stopEvent!==void 0?t.stopEvent:!0,i.element=document.createElement("div"),i.element.className=t.className!==void 0?t.className:"ol-overlay-container "+bh,i.element.style.position="absolute",i.element.style.pointerEvents="auto";var r=t.autoPan;return r&&typeof r!="object"&&(r={animation:t.autoPanAnimation,margin:t.autoPanMargin}),i.autoPan=r||!1,i.rendered={transform_:"",visible:!0},i.mapPostrenderListenerKey=null,i.addChangeListener(rt.ELEMENT,i.handleElementChanged),i.addChangeListener(rt.MAP,i.handleMapChanged),i.addChangeListener(rt.OFFSET,i.handleOffsetChanged),i.addChangeListener(rt.POSITION,i.handlePositionChanged),i.addChangeListener(rt.POSITIONING,i.handlePositioningChanged),t.element!==void 0&&i.setElement(t.element),i.setOffset(t.offset!==void 0?t.offset:[0,0]),i.setPositioning(t.positioning!==void 0?t.positioning:pt.TOP_LEFT),t.position!==void 0&&i.setPosition(t.position),i}return e.prototype.getElement=function(){return this.get(rt.ELEMENT)},e.prototype.getId=function(){return this.id},e.prototype.getMap=function(){return this.get(rt.MAP)},e.prototype.getOffset=function(){return this.get(rt.OFFSET)},e.prototype.getPosition=function(){return this.get(rt.POSITION)},e.prototype.getPositioning=function(){return this.get(rt.POSITIONING)},e.prototype.handleElementChanged=function(){fa(this.element);var t=this.getElement();t&&this.element.appendChild(t)},e.prototype.handleMapChanged=function(){this.mapPostrenderListenerKey&&(Ln(this.element),B(this.mapPostrenderListenerKey),this.mapPostrenderListenerKey=null);var t=this.getMap();if(t){this.mapPostrenderListenerKey=D(t,He.POSTRENDER,this.render,this),this.updatePixelPosition();var i=this.stopEvent?t.getOverlayContainerStopEvent():t.getOverlayContainer();this.insertFirst?i.insertBefore(this.element,i.childNodes[0]||null):i.appendChild(this.element),this.performAutoPan()}},e.prototype.render=function(){this.updatePixelPosition()},e.prototype.handleOffsetChanged=function(){this.updatePixelPosition()},e.prototype.handlePositionChanged=function(){this.updatePixelPosition(),this.performAutoPan()},e.prototype.handlePositioningChanged=function(){this.updatePixelPosition()},e.prototype.setElement=function(t){this.set(rt.ELEMENT,t)},e.prototype.setMap=function(t){this.set(rt.MAP,t)},e.prototype.setOffset=function(t){this.set(rt.OFFSET,t)},e.prototype.setPosition=function(t){this.set(rt.POSITION,t)},e.prototype.performAutoPan=function(){this.autoPan&&this.panIntoView(this.autoPan)},e.prototype.panIntoView=function(t){var i=this.getMap();if(!(!i||!i.getTargetElement()||!this.get(rt.POSITION))){var r=this.getRect(i.getTargetElement(),i.getSize()),a=this.getElement(),o=this.getRect(a,[Ah(a),Lh(a)]),s=t||{},h=s.margin===void 0?20:s.margin;if(!Ir(r,o)){var l=o[0]-r[0],u=r[2]-o[2],f=o[1]-r[1],c=r[3]-o[3],v=[0,0];if(l<0?v[0]=l-h:u<0&&(v[0]=Math.abs(u)+h),f<0?v[1]=f-h:c<0&&(v[1]=Math.abs(c)+h),v[0]!==0||v[1]!==0){var d=i.getView().getCenterInternal(),p=i.getPixelFromCoordinateInternal(d);if(!p)return;var _=[p[0]+v[0],p[1]+v[1]],y=s.animation||{};i.getView().animateInternal({center:i.getCoordinateFromPixelInternal(_),duration:y.duration,easing:y.easing})}}}},e.prototype.getRect=function(t,i){var r=t.getBoundingClientRect(),a=r.left+window.pageXOffset,o=r.top+window.pageYOffset;return[a,o,a+i[0],o+i[1]]},e.prototype.setPositioning=function(t){this.set(rt.POSITIONING,t)},e.prototype.setVisible=function(t){this.rendered.visible!==t&&(this.element.style.display=t?"":"none",this.rendered.visible=t)},e.prototype.updatePixelPosition=function(){var t=this.getMap(),i=this.getPosition();if(!t||!t.isRendered()||!i){this.setVisible(!1);return}var r=t.getPixelFromCoordinate(i),a=t.getSize();this.updateRenderedPosition(r,a)},e.prototype.updateRenderedPosition=function(t,i){var r=this.element.style,a=this.getOffset(),o=this.getPositioning();this.setVisible(!0);var s=Math.round(t[0]+a[0])+"px",h=Math.round(t[1]+a[1])+"px",l="0%",u="0%";o==pt.BOTTOM_RIGHT||o==pt.CENTER_RIGHT||o==pt.TOP_RIGHT?l="-100%":(o==pt.BOTTOM_CENTER||o==pt.CENTER_CENTER||o==pt.TOP_CENTER)&&(l="-50%"),o==pt.BOTTOM_LEFT||o==pt.BOTTOM_CENTER||o==pt.BOTTOM_RIGHT?u="-100%":(o==pt.CENTER_LEFT||o==pt.CENTER_CENTER||o==pt.CENTER_RIGHT)&&(u="-50%");var f="translate("+l+", "+u+") translate("+s+", "+h+")";this.rendered.transform_!=f&&(this.rendered.transform_=f,r.transform=f,r.msTransform=f)},e.prototype.getOptions=function(){return this.options},e}(yt),bp=du;function pu(n){var e=n||{},t=new Ot,i=e.zoom!==void 0?e.zoom:!0;i&&t.push(new uu(e.zoomOptions));var r=e.rotate!==void 0?e.rotate:!0;r&&t.push(new su(e.rotateOptions));var a=e.attribution!==void 0?e.attribution:!0;return a&&t.push(new ru(e.attributionOptions)),t}var Ra={ACTIVE:"active"},_u=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,r){i.__proto__=r}||function(i,r){for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(i[a]=r[a])},n(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");n(e,t);function i(){this.constructor=e}e.prototype=t===null?Object.create(t):(i.prototype=t.prototype,new i)}}(),yu=function(n){_u(e,n);function e(t){var i=n.call(this)||this;return i.on,i.once,i.un,t&&t.handleEvent&&(i.handleEvent=t.handleEvent),i.map_=null,i.setActive(!0),i}return e.prototype.getActive=function(){return this.get(Ra.ACTIVE)},e.prototype.getMap=function(){return this.map_},e.prototype.handleEvent=function(t){return!0},e.prototype.setActive=function(t){this.set(Ra.ACTIVE,t)},e.prototype.setMap=function(t){this.map_=t},e}(yt);function gu(n,e,t){var i=n.getCenterInternal();if(i){var r=[i[0]+e[0],i[1]+e[1]];n.animateInternal({duration:t!==void 0?t:250,easing:al,center:n.getConstrainedCenter(r)})}}function bi(n,e,t,i){var r=n.getZoom();if(r!==void 0){var a=n.getConstrainedZoom(r+e),o=n.getResolutionForZoom(a);n.getAnimating()&&n.cancelAnimations(),n.animate({resolution:o,anchor:t,duration:i!==void 0?i:250,easing:Oe})}}var Ye=yu,mu=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,r){i.__proto__=r}||function(i,r){for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(i[a]=r[a])},n(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");n(e,t);function i(){this.constructor=e}e.prototype=t===null?Object.create(t):(i.prototype=t.prototype,new i)}}(),Mu=function(n){mu(e,n);function e(t){var i=n.call(this)||this,r=t||{};return i.delta_=r.delta?r.delta:1,i.duration_=r.duration!==void 0?r.duration:250,i}return e.prototype.handleEvent=function(t){var i=!1;if(t.type==q.DBLCLICK){var r=t.originalEvent,a=t.map,o=t.coordinate,s=r.shiftKey?-this.delta_:this.delta_,h=a.getView();bi(h,s,o,this.duration_),r.preventDefault(),i=!0}return!i},e}(Ye),Eu=Mu,xu=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,r){i.__proto__=r}||function(i,r){for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(i[a]=r[a])},n(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");n(e,t);function i(){this.constructor=e}e.prototype=t===null?Object.create(t):(i.prototype=t.prototype,new i)}}(),Tu=function(n){xu(e,n);function e(t){var i=this,r=t||{};return i=n.call(this,r)||this,r.handleDownEvent&&(i.handleDownEvent=r.handleDownEvent),r.handleDragEvent&&(i.handleDragEvent=r.handleDragEvent),r.handleMoveEvent&&(i.handleMoveEvent=r.handleMoveEvent),r.handleUpEvent&&(i.handleUpEvent=r.handleUpEvent),r.stopDown&&(i.stopDown=r.stopDown),i.handlingDownUpSequence=!1,i.trackedPointers_={},i.targetPointers=[],i}return e.prototype.getPointerCount=function(){return this.targetPointers.length},e.prototype.handleDownEvent=function(t){return!1},e.prototype.handleDragEvent=function(t){},e.prototype.handleEvent=function(t){if(!t.originalEvent)return!0;var i=!1;if(this.updateTrackedPointers_(t),this.handlingDownUpSequence){if(t.type==q.POINTERDRAG)this.handleDragEvent(t),t.originalEvent.preventDefault();else if(t.type==q.POINTERUP){var r=this.handleUpEvent(t);this.handlingDownUpSequence=r&&this.targetPointers.length>0}}else if(t.type==q.POINTERDOWN){var a=this.handleDownEvent(t);this.handlingDownUpSequence=a,i=this.stopDown(a)}else t.type==q.POINTERMOVE&&this.handleMoveEvent(t);return!i},e.prototype.handleMoveEvent=function(t){},e.prototype.handleUpEvent=function(t){return!1},e.prototype.stopDown=function(t){return t},e.prototype.updateTrackedPointers_=function(t){if(Cu(t)){var i=t.originalEvent,r=i.pointerId.toString();t.type==q.POINTERUP?delete this.trackedPointers_[r]:t.type==q.POINTERDOWN?this.trackedPointers_[r]=i:r in this.trackedPointers_&&(this.trackedPointers_[r]=i),this.targetPointers=Jo(this.trackedPointers_)}},e}(Ye);function Di(n){for(var e=n.length,t=0,i=0,r=0;r<e;r++)t+=n[r].clientX,i+=n[r].clientY;return[t/e,i/e]}function Cu(n){var e=n.type;return e===q.POINTERDOWN||e===q.POINTERDRAG||e===q.POINTERUP}var Qe=Tu;function Fi(n){var e=arguments;return function(t){for(var i=!0,r=0,a=e.length;r<a&&(i=i&&e[r](t),!!i);++r);return i}}var Ou=function(n){var e=n.originalEvent;return e.altKey&&!(e.metaKey||e.ctrlKey)&&e.shiftKey},Ru=function(n){return n.target.getTargetElement().contains(document.activeElement)},Pa=function(n){return n.map.getTargetElement().hasAttribute("tabindex")?Ru(n):!0},Pu=$e,wa=function(n){var e=n.originalEvent;return e.button==0&&!(hs&&ls&&e.ctrlKey)},Ia=function(n){var e=n.originalEvent;return!e.altKey&&!(e.metaKey||e.ctrlKey)&&!e.shiftKey},wu=function(n){var e=n.originalEvent;return!e.altKey&&!(e.metaKey||e.ctrlKey)&&e.shiftKey},Sa=function(n){var e=n.originalEvent,t=e.target.tagName;return t!=="INPUT"&&t!=="SELECT"&&t!=="TEXTAREA"},Gi=function(n){var e=n.originalEvent;return $(e!==void 0,56),e.pointerType=="mouse"},Iu=function(n){var e=n.originalEvent;return $(e!==void 0,56),e.isPrimary&&e.button===0},Su=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,r){i.__proto__=r}||function(i,r){for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(i[a]=r[a])},n(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");n(e,t);function i(){this.constructor=e}e.prototype=t===null?Object.create(t):(i.prototype=t.prototype,new i)}}(),Au=function(n){Su(e,n);function e(t){var i=n.call(this,{stopDown:gn})||this,r=t||{};i.kinetic_=r.kinetic,i.lastCentroid=null,i.lastPointersCount_,i.panning_=!1;var a=r.condition?r.condition:Fi(Ia,Iu);return i.condition_=r.onFocusOnly?Fi(Pa,a):a,i.noKinetic_=!1,i}return e.prototype.handleDragEvent=function(t){this.panning_||(this.panning_=!0,this.getMap().getView().beginInteraction());var i=this.targetPointers,r=Di(i);if(i.length==this.lastPointersCount_){if(this.kinetic_&&this.kinetic_.update(r[0],r[1]),this.lastCentroid){var a=[this.lastCentroid[0]-r[0],r[1]-this.lastCentroid[1]],o=t.map,s=o.getView();ks(a,s.getResolution()),gi(a,s.getRotation()),s.adjustCenterInternal(a)}}else this.kinetic_&&this.kinetic_.begin();this.lastCentroid=r,this.lastPointersCount_=i.length,t.originalEvent.preventDefault()},e.prototype.handleUpEvent=function(t){var i=t.map,r=i.getView();if(this.targetPointers.length===0){if(!this.noKinetic_&&this.kinetic_&&this.kinetic_.end()){var a=this.kinetic_.getDistance(),o=this.kinetic_.getAngle(),s=r.getCenterInternal(),h=i.getPixelFromCoordinateInternal(s),l=i.getCoordinateFromPixelInternal([h[0]-a*Math.cos(o),h[1]-a*Math.sin(o)]);r.animateInternal({center:r.getConstrainedCenter(l),duration:500,easing:Oe})}return this.panning_&&(this.panning_=!1,r.endInteraction()),!1}else return this.kinetic_&&this.kinetic_.begin(),this.lastCentroid=null,!0},e.prototype.handleDownEvent=function(t){if(this.targetPointers.length>0&&this.condition_(t)){var i=t.map,r=i.getView();return this.lastCentroid=null,r.getAnimating()&&r.cancelAnimations(),this.kinetic_&&this.kinetic_.begin(),this.noKinetic_=this.targetPointers.length>1,!0}else return!1},e}(Qe),Lu=Au,Nu=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,r){i.__proto__=r}||function(i,r){for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(i[a]=r[a])},n(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");n(e,t);function i(){this.constructor=e}e.prototype=t===null?Object.create(t):(i.prototype=t.prototype,new i)}}(),bu=function(n){Nu(e,n);function e(t){var i=this,r=t||{};return i=n.call(this,{stopDown:gn})||this,i.condition_=r.condition?r.condition:Ou,i.lastAngle_=void 0,i.duration_=r.duration!==void 0?r.duration:250,i}return e.prototype.handleDragEvent=function(t){if(!!Gi(t)){var i=t.map,r=i.getView();if(r.getConstraints().rotation!==Si){var a=i.getSize(),o=t.pixel,s=Math.atan2(a[1]/2-o[1],o[0]-a[0]/2);if(this.lastAngle_!==void 0){var h=s-this.lastAngle_;r.adjustRotationInternal(-h)}this.lastAngle_=s}}},e.prototype.handleUpEvent=function(t){if(!Gi(t))return!0;var i=t.map,r=i.getView();return r.endInteraction(this.duration_),!1},e.prototype.handleDownEvent=function(t){if(!Gi(t))return!1;if(wa(t)&&this.condition_(t)){var i=t.map;return i.getView().beginInteraction(),this.lastAngle_=void 0,!0}else return!1},e}(Qe),Du=bu,Fu=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,r){i.__proto__=r}||function(i,r){for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(i[a]=r[a])},n(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");n(e,t);function i(){this.constructor=e}e.prototype=t===null?Object.create(t):(i.prototype=t.prototype,new i)}}(),Gu=function(n){Fu(e,n);function e(t){var i=n.call(this)||this;return i.geometry_=null,i.element_=document.createElement("div"),i.element_.style.position="absolute",i.element_.style.pointerEvents="auto",i.element_.className="ol-box "+t,i.map_=null,i.startPixel_=null,i.endPixel_=null,i}return e.prototype.disposeInternal=function(){this.setMap(null)},e.prototype.render_=function(){var t=this.startPixel_,i=this.endPixel_,r="px",a=this.element_.style;a.left=Math.min(t[0],i[0])+r,a.top=Math.min(t[1],i[1])+r,a.width=Math.abs(i[0]-t[0])+r,a.height=Math.abs(i[1]-t[1])+r},e.prototype.setMap=function(t){if(this.map_){this.map_.getOverlayContainer().removeChild(this.element_);var i=this.element_.style;i.left="inherit",i.top="inherit",i.width="inherit",i.height="inherit"}this.map_=t,this.map_&&this.map_.getOverlayContainer().appendChild(this.element_)},e.prototype.setPixels=function(t,i){this.startPixel_=t,this.endPixel_=i,this.createOrUpdateGeometry(),this.render_()},e.prototype.createOrUpdateGeometry=function(){var t=this.startPixel_,i=this.endPixel_,r=[t,[t[0],i[1]],i,[i[0],t[1]]],a=r.map(this.map_.getCoordinateFromPixelInternal,this.map_);a[4]=a[0].slice(),this.geometry_?this.geometry_.setCoordinates([a]):this.geometry_=new aa([a])},e.prototype.getGeometry=function(){return this.geometry_},e}(oi),ju=Gu,Aa=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,r){i.__proto__=r}||function(i,r){for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(i[a]=r[a])},n(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");n(e,t);function i(){this.constructor=e}e.prototype=t===null?Object.create(t):(i.prototype=t.prototype,new i)}}(),$n={BOXSTART:"boxstart",BOXDRAG:"boxdrag",BOXEND:"boxend",BOXCANCEL:"boxcancel"},ji=function(n){Aa(e,n);function e(t,i,r){var a=n.call(this,t)||this;return a.coordinate=i,a.mapBrowserEvent=r,a}return e}(Yt),$u=function(n){Aa(e,n);function e(t){var i=n.call(this)||this;i.on,i.once,i.un;var r=t||{};return i.box_=new ju(r.className||"ol-dragbox"),i.minArea_=r.minArea!==void 0?r.minArea:64,r.onBoxEnd&&(i.onBoxEnd=r.onBoxEnd),i.startPixel_=null,i.condition_=r.condition?r.condition:wa,i.boxEndCondition_=r.boxEndCondition?r.boxEndCondition:i.defaultBoxEndCondition,i}return e.prototype.defaultBoxEndCondition=function(t,i,r){var a=r[0]-i[0],o=r[1]-i[1];return a*a+o*o>=this.minArea_},e.prototype.getGeometry=function(){return this.box_.getGeometry()},e.prototype.handleDragEvent=function(t){this.box_.setPixels(this.startPixel_,t.pixel),this.dispatchEvent(new ji($n.BOXDRAG,t.coordinate,t))},e.prototype.handleUpEvent=function(t){this.box_.setMap(null);var i=this.boxEndCondition_(t,this.startPixel_,t.pixel);return i&&this.onBoxEnd(t),this.dispatchEvent(new ji(i?$n.BOXEND:$n.BOXCANCEL,t.coordinate,t)),!1},e.prototype.handleDownEvent=function(t){return this.condition_(t)?(this.startPixel_=t.pixel,this.box_.setMap(t.map),this.box_.setPixels(this.startPixel_,this.startPixel_),this.dispatchEvent(new ji($n.BOXSTART,t.coordinate,t)),!0):!1},e.prototype.onBoxEnd=function(t){},e}(Qe),zu=$u,Uu=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,r){i.__proto__=r}||function(i,r){for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(i[a]=r[a])},n(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");n(e,t);function i(){this.constructor=e}e.prototype=t===null?Object.create(t):(i.prototype=t.prototype,new i)}}(),ku=function(n){Uu(e,n);function e(t){var i=this,r=t||{},a=r.condition?r.condition:wu;return i=n.call(this,{condition:a,className:r.className||"ol-dragzoom",minArea:r.minArea})||this,i.duration_=r.duration!==void 0?r.duration:200,i.out_=r.out!==void 0?r.out:!1,i}return e.prototype.onBoxEnd=function(t){var i=this.getMap(),r=i.getView(),a=this.getGeometry();if(this.out_){var o=r.rotatedExtentForGeometry(a),s=r.getResolutionForExtentInternal(o),h=r.getResolution()/s;a=a.clone(),a.scale(h*h)}r.fitInternal(a,{duration:this.duration_,easing:Oe})},e}(zu),Ku=ku,ae={LEFT:37,UP:38,RIGHT:39,DOWN:40},qu=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,r){i.__proto__=r}||function(i,r){for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(i[a]=r[a])},n(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");n(e,t);function i(){this.constructor=e}e.prototype=t===null?Object.create(t):(i.prototype=t.prototype,new i)}}(),Xu=function(n){qu(e,n);function e(t){var i=n.call(this)||this,r=t||{};return i.defaultCondition_=function(a){return Ia(a)&&Sa(a)},i.condition_=r.condition!==void 0?r.condition:i.defaultCondition_,i.duration_=r.duration!==void 0?r.duration:100,i.pixelDelta_=r.pixelDelta!==void 0?r.pixelDelta:128,i}return e.prototype.handleEvent=function(t){var i=!1;if(t.type==S.KEYDOWN){var r=t.originalEvent,a=r.keyCode;if(this.condition_(t)&&(a==ae.DOWN||a==ae.LEFT||a==ae.RIGHT||a==ae.UP)){var o=t.map,s=o.getView(),h=s.getResolution()*this.pixelDelta_,l=0,u=0;a==ae.DOWN?u=-h:a==ae.LEFT?l=-h:a==ae.RIGHT?l=h:u=h;var f=[l,u];gi(f,s.getRotation()),gu(s,f,this.duration_),r.preventDefault(),i=!0}}return!i},e}(Ye),Zu=Xu,Bu=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,r){i.__proto__=r}||function(i,r){for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(i[a]=r[a])},n(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");n(e,t);function i(){this.constructor=e}e.prototype=t===null?Object.create(t):(i.prototype=t.prototype,new i)}}(),Vu=function(n){Bu(e,n);function e(t){var i=n.call(this)||this,r=t||{};return i.condition_=r.condition?r.condition:Sa,i.delta_=r.delta?r.delta:1,i.duration_=r.duration!==void 0?r.duration:100,i}return e.prototype.handleEvent=function(t){var i=!1;if(t.type==S.KEYDOWN||t.type==S.KEYPRESS){var r=t.originalEvent,a=r.charCode;if(this.condition_(t)&&(a=="+".charCodeAt(0)||a=="-".charCodeAt(0))){var o=t.map,s=a=="+".charCodeAt(0)?this.delta_:-this.delta_,h=o.getView();bi(h,s,void 0,this.duration_),r.preventDefault(),i=!0}}return!i},e}(Ye),Wu=Vu,Hu=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,r){i.__proto__=r}||function(i,r){for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(i[a]=r[a])},n(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");n(e,t);function i(){this.constructor=e}e.prototype=t===null?Object.create(t):(i.prototype=t.prototype,new i)}}(),$i={TRACKPAD:"trackpad",WHEEL:"wheel"},Yu=function(n){Hu(e,n);function e(t){var i=this,r=t||{};i=n.call(this,r)||this,i.totalDelta_=0,i.lastDelta_=0,i.maxDelta_=r.maxDelta!==void 0?r.maxDelta:1,i.duration_=r.duration!==void 0?r.duration:250,i.timeout_=r.timeout!==void 0?r.timeout:80,i.useAnchor_=r.useAnchor!==void 0?r.useAnchor:!0,i.constrainResolution_=r.constrainResolution!==void 0?r.constrainResolution:!1;var a=r.condition?r.condition:Pu;return i.condition_=r.onFocusOnly?Fi(Pa,a):a,i.lastAnchor_=null,i.startTime_=void 0,i.timeoutId_,i.mode_=void 0,i.trackpadEventGap_=400,i.trackpadTimeoutId_,i.deltaPerZoom_=300,i}return e.prototype.endInteraction_=function(){this.trackpadTimeoutId_=void 0;var t=this.getMap().getView();t.endInteraction(void 0,this.lastDelta_?this.lastDelta_>0?1:-1:0,this.lastAnchor_)},e.prototype.handleEvent=function(t){if(!this.condition_(t))return!0;var i=t.type;if(i!==S.WHEEL)return!0;var r=t.map,a=t.originalEvent;a.preventDefault(),this.useAnchor_&&(this.lastAnchor_=t.coordinate);var o;if(t.type==S.WHEEL&&(o=a.deltaY,ss&&a.deltaMode===WheelEvent.DOM_DELTA_PIXEL&&(o/=Er),a.deltaMode===WheelEvent.DOM_DELTA_LINE&&(o*=40)),o===0)return!1;this.lastDelta_=o;var s=Date.now();this.startTime_===void 0&&(this.startTime_=s),(!this.mode_||s-this.startTime_>this.trackpadEventGap_)&&(this.mode_=Math.abs(o)<4?$i.TRACKPAD:$i.WHEEL);var h=r.getView();if(this.mode_===$i.TRACKPAD&&!(h.getConstrainResolution()||this.constrainResolution_))return this.trackpadTimeoutId_?clearTimeout(this.trackpadTimeoutId_):(h.getAnimating()&&h.cancelAnimations(),h.beginInteraction()),this.trackpadTimeoutId_=setTimeout(this.endInteraction_.bind(this),this.timeout_),h.adjustZoom(-o/this.deltaPerZoom_,this.lastAnchor_),this.startTime_=s,!1;this.totalDelta_+=o;var l=Math.max(this.timeout_-(s-this.startTime_),0);return clearTimeout(this.timeoutId_),this.timeoutId_=setTimeout(this.handleWheelZoom_.bind(this,r),l),!1},e.prototype.handleWheelZoom_=function(t){var i=t.getView();i.getAnimating()&&i.cancelAnimations();var r=-nt(this.totalDelta_,-this.maxDelta_*this.deltaPerZoom_,this.maxDelta_*this.deltaPerZoom_)/this.deltaPerZoom_;(i.getConstrainResolution()||this.constrainResolution_)&&(r=r?r>0?1:-1:0),bi(i,r,this.lastAnchor_,this.duration_),this.mode_=void 0,this.totalDelta_=0,this.lastAnchor_=null,this.startTime_=void 0,this.timeoutId_=void 0},e.prototype.setMouseAnchor=function(t){this.useAnchor_=t,t||(this.lastAnchor_=null)},e}(Ye),Qu=Yu,Ju=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,r){i.__proto__=r}||function(i,r){for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(i[a]=r[a])},n(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");n(e,t);function i(){this.constructor=e}e.prototype=t===null?Object.create(t):(i.prototype=t.prototype,new i)}}(),tf=function(n){Ju(e,n);function e(t){var i=this,r=t||{},a=r;return a.stopDown||(a.stopDown=gn),i=n.call(this,a)||this,i.anchor_=null,i.lastAngle_=void 0,i.rotating_=!1,i.rotationDelta_=0,i.threshold_=r.threshold!==void 0?r.threshold:.3,i.duration_=r.duration!==void 0?r.duration:250,i}return e.prototype.handleDragEvent=function(t){var i=0,r=this.targetPointers[0],a=this.targetPointers[1],o=Math.atan2(a.clientY-r.clientY,a.clientX-r.clientX);if(this.lastAngle_!==void 0){var s=o-this.lastAngle_;this.rotationDelta_+=s,!this.rotating_&&Math.abs(this.rotationDelta_)>this.threshold_&&(this.rotating_=!0),i=s}this.lastAngle_=o;var h=t.map,l=h.getView();if(l.getConstraints().rotation!==Si){var u=h.getViewport().getBoundingClientRect(),f=Di(this.targetPointers);f[0]-=u.left,f[1]-=u.top,this.anchor_=h.getCoordinateFromPixelInternal(f),this.rotating_&&(h.render(),l.adjustRotationInternal(i,this.anchor_))}},e.prototype.handleUpEvent=function(t){if(this.targetPointers.length<2){var i=t.map,r=i.getView();return r.endInteraction(this.duration_),!1}else return!0},e.prototype.handleDownEvent=function(t){if(this.targetPointers.length>=2){var i=t.map;return this.anchor_=null,this.lastAngle_=void 0,this.rotating_=!1,this.rotationDelta_=0,this.handlingDownUpSequence||i.getView().beginInteraction(),!0}else return!1},e}(Qe),ef=tf,nf=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,r){i.__proto__=r}||function(i,r){for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(i[a]=r[a])},n(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");n(e,t);function i(){this.constructor=e}e.prototype=t===null?Object.create(t):(i.prototype=t.prototype,new i)}}(),rf=function(n){nf(e,n);function e(t){var i=this,r=t||{},a=r;return a.stopDown||(a.stopDown=gn),i=n.call(this,a)||this,i.anchor_=null,i.duration_=r.duration!==void 0?r.duration:400,i.lastDistance_=void 0,i.lastScaleDelta_=1,i}return e.prototype.handleDragEvent=function(t){var i=1,r=this.targetPointers[0],a=this.targetPointers[1],o=r.clientX-a.clientX,s=r.clientY-a.clientY,h=Math.sqrt(o*o+s*s);this.lastDistance_!==void 0&&(i=this.lastDistance_/h),this.lastDistance_=h;var l=t.map,u=l.getView();i!=1&&(this.lastScaleDelta_=i);var f=l.getViewport().getBoundingClientRect(),c=Di(this.targetPointers);c[0]-=f.left,c[1]-=f.top,this.anchor_=l.getCoordinateFromPixelInternal(c),l.render(),u.adjustResolutionInternal(i,this.anchor_)},e.prototype.handleUpEvent=function(t){if(this.targetPointers.length<2){var i=t.map,r=i.getView(),a=this.lastScaleDelta_>1?1:-1;return r.endInteraction(this.duration_,a),!1}else return!0},e.prototype.handleDownEvent=function(t){if(this.targetPointers.length>=2){var i=t.map;return this.anchor_=null,this.lastDistance_=void 0,this.lastScaleDelta_=1,this.handlingDownUpSequence||i.getView().beginInteraction(),!0}else return!1},e}(Qe),af=rf;function of(n){var e=n||{},t=new Ot,i=new dl(-.005,.05,100),r=e.altShiftDragRotate!==void 0?e.altShiftDragRotate:!0;r&&t.push(new Du);var a=e.doubleClickZoom!==void 0?e.doubleClickZoom:!0;a&&t.push(new Eu({delta:e.zoomDelta,duration:e.zoomDuration}));var o=e.dragPan!==void 0?e.dragPan:!0;o&&t.push(new Lu({onFocusOnly:e.onFocusOnly,kinetic:i}));var s=e.pinchRotate!==void 0?e.pinchRotate:!0;s&&t.push(new ef);var h=e.pinchZoom!==void 0?e.pinchZoom:!0;h&&t.push(new af({duration:e.zoomDuration}));var l=e.keyboard!==void 0?e.keyboard:!0;l&&(t.push(new Zu),t.push(new Wu({delta:e.zoomDelta,duration:e.zoomDuration})));var u=e.mouseWheelZoom!==void 0?e.mouseWheelZoom:!0;u&&t.push(new Qu({onFocusOnly:e.onFocusOnly,duration:e.zoomDuration}));var f=e.shiftDragZoom!==void 0?e.shiftDragZoom:!0;return f&&t.push(new Ku({duration:e.zoomDuration})),t}var sf=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,r){i.__proto__=r}||function(i,r){for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(i[a]=r[a])},n(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");n(e,t);function i(){this.constructor=e}e.prototype=t===null?Object.create(t):(i.prototype=t.prototype,new i)}}(),hf=function(n){sf(e,n);function e(t){var i=this;return t=H({},t),t.controls||(t.controls=pu()),t.interactions||(t.interactions=of({onFocusOnly:!0})),i=n.call(this,t)||this,i}return e.prototype.createRenderer=function(){return new El(this)},e}(Jl),Dp=hf,lf=function(){function n(e){this.highWaterMark=e!==void 0?e:2048,this.count_=0,this.entries_={},this.oldest_=null,this.newest_=null}return n.prototype.canExpireCache=function(){return this.highWaterMark>0&&this.getCount()>this.highWaterMark},n.prototype.clear=function(){this.count_=0,this.entries_={},this.oldest_=null,this.newest_=null},n.prototype.containsKey=function(e){return this.entries_.hasOwnProperty(e)},n.prototype.forEach=function(e){for(var t=this.oldest_;t;)e(t.value_,t.key_,this),t=t.newer},n.prototype.get=function(e,t){var i=this.entries_[e];return $(i!==void 0,15),i===this.newest_||(i===this.oldest_?(this.oldest_=this.oldest_.newer,this.oldest_.older=null):(i.newer.older=i.older,i.older.newer=i.newer),i.newer=null,i.older=this.newest_,this.newest_.newer=i,this.newest_=i),i.value_},n.prototype.remove=function(e){var t=this.entries_[e];return $(t!==void 0,15),t===this.newest_?(this.newest_=t.older,this.newest_&&(this.newest_.newer=null)):t===this.oldest_?(this.oldest_=t.newer,this.oldest_&&(this.oldest_.older=null)):(t.newer.older=t.older,t.older.newer=t.newer),delete this.entries_[e],--this.count_,t.value_},n.prototype.getCount=function(){return this.count_},n.prototype.getKeys=function(){var e=new Array(this.count_),t=0,i;for(i=this.newest_;i;i=i.older)e[t++]=i.key_;return e},n.prototype.getValues=function(){var e=new Array(this.count_),t=0,i;for(i=this.newest_;i;i=i.older)e[t++]=i.value_;return e},n.prototype.peekLast=function(){return this.oldest_.value_},n.prototype.peekLastKey=function(){return this.oldest_.key_},n.prototype.peekFirstKey=function(){return this.newest_.key_},n.prototype.pop=function(){var e=this.oldest_;return delete this.entries_[e.key_],e.newer&&(e.newer.older=null),this.oldest_=e.newer,this.oldest_||(this.newest_=null),--this.count_,e.value_},n.prototype.replace=function(e,t){this.get(e),this.entries_[e].value_=t},n.prototype.set=function(e,t){$(!(e in this.entries_),16);var i={key_:e,newer:null,older:this.newest_,value_:t};this.newest_?this.newest_.newer=i:this.oldest_=i,this.newest_=i,this.entries_[e]=i,++this.count_},n.prototype.setSize=function(e){this.highWaterMark=e},n}(),uf=lf;function La(n,e,t,i){return i!==void 0?(i[0]=n,i[1]=e,i[2]=t,i):[n,e,t]}function zn(n,e,t){return n+"/"+e+"/"+t}function Na(n){return zn(n[0],n[1],n[2])}function ff(n){return n.split("/").map(Number)}function ba(n){return(n[1]<<n[0])+n[2]}function cf(n,e){var t=n[0],i=n[1],r=n[2];if(e.getMinZoom()>t||t>e.getMaxZoom())return!1;var a=e.getFullTileRange(t);return a?a.containsXY(i,r):!0}var vf=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,r){i.__proto__=r}||function(i,r){for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(i[a]=r[a])},n(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");n(e,t);function i(){this.constructor=e}e.prototype=t===null?Object.create(t):(i.prototype=t.prototype,new i)}}(),df=function(n){vf(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.prototype.expireCache=function(t){for(;this.canExpireCache();){var i=this.peekLast();if(i.getKey()in t)break;this.pop().release()}},e.prototype.pruneExceptNewestZ=function(){if(this.getCount()!==0){var t=this.peekFirstKey(),i=ff(t),r=i[0];this.forEach(function(a){a.tileCoord[0]!==r&&(this.remove(Na(a.tileCoord)),a.release())}.bind(this))}},e}(uf),Da=df,Fa=function(){function n(e,t,i,r){this.minX=e,this.maxX=t,this.minY=i,this.maxY=r}return n.prototype.contains=function(e){return this.containsXY(e[1],e[2])},n.prototype.containsTileRange=function(e){return this.minX<=e.minX&&e.maxX<=this.maxX&&this.minY<=e.minY&&e.maxY<=this.maxY},n.prototype.containsXY=function(e,t){return this.minX<=e&&e<=this.maxX&&this.minY<=t&&t<=this.maxY},n.prototype.equals=function(e){return this.minX==e.minX&&this.minY==e.minY&&this.maxX==e.maxX&&this.maxY==e.maxY},n.prototype.extend=function(e){e.minX<this.minX&&(this.minX=e.minX),e.maxX>this.maxX&&(this.maxX=e.maxX),e.minY<this.minY&&(this.minY=e.minY),e.maxY>this.maxY&&(this.maxY=e.maxY)},n.prototype.getHeight=function(){return this.maxY-this.minY+1},n.prototype.getSize=function(){return[this.getWidth(),this.getHeight()]},n.prototype.getWidth=function(){return this.maxX-this.minX+1},n.prototype.intersects=function(e){return this.minX<=e.maxX&&this.maxX>=e.minX&&this.minY<=e.maxY&&this.maxY>=e.minY},n}();function Pe(n,e,t,i,r){return r!==void 0?(r.minX=n,r.maxX=e,r.minY=t,r.maxY=i,r):new Fa(n,e,t,i)}var Ga=Fa,Un={PRELOAD:"preload",USE_INTERIM_TILES_ON_ERROR:"useInterimTilesOnError"},pf=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,r){i.__proto__=r}||function(i,r){for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(i[a]=r[a])},n(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");n(e,t);function i(){this.constructor=e}e.prototype=t===null?Object.create(t):(i.prototype=t.prototype,new i)}}(),_f=function(n){pf(e,n);function e(t){var i=this,r=t||{},a=H({},r);return delete a.preload,delete a.useInterimTilesOnError,i=n.call(this,a)||this,i.on,i.once,i.un,i.setPreload(r.preload!==void 0?r.preload:0),i.setUseInterimTilesOnError(r.useInterimTilesOnError!==void 0?r.useInterimTilesOnError:!0),i}return e.prototype.getPreload=function(){return this.get(Un.PRELOAD)},e.prototype.setPreload=function(t){this.set(Un.PRELOAD,t)},e.prototype.getUseInterimTilesOnError=function(){return this.get(Un.USE_INTERIM_TILES_ON_ERROR)},e.prototype.setUseInterimTilesOnError=function(t){this.set(Un.USE_INTERIM_TILES_ON_ERROR,t)},e}(Uh),yf=_f,gf=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,r){i.__proto__=r}||function(i,r){for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(i[a]=r[a])},n(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");n(e,t);function i(){this.constructor=e}e.prototype=t===null?Object.create(t):(i.prototype=t.prototype,new i)}}(),ja=function(n){gf(e,n);function e(t){var i=n.call(this,t)||this;return i.extentChanged=!0,i.renderedExtent_=null,i.renderedPixelRatio,i.renderedProjection=null,i.renderedRevision,i.renderedTiles=[],i.newTiles_=!1,i.tmpExtent=Zt(),i.tmpTileRange_=new Ga(0,0,0,0),i}return e.prototype.isDrawableTile=function(t){var i=this.getLayer(),r=t.getState(),a=i.getUseInterimTilesOnError();return r==w.LOADED||r==w.EMPTY||r==w.ERROR&&!a},e.prototype.getTile=function(t,i,r,a){var o=a.pixelRatio,s=a.viewState.projection,h=this.getLayer(),l=h.getSource(),u=l.getTile(t,i,r,o,s);return u.getState()==w.ERROR&&(h.getUseInterimTilesOnError()?h.getPreload()>0&&(this.newTiles_=!0):u.setState(w.LOADED)),this.isDrawableTile(u)||(u=u.getInterimTile()),u},e.prototype.loadedTileCallback=function(t,i,r){return this.isDrawableTile(r)?n.prototype.loadedTileCallback.call(this,t,i,r):!1},e.prototype.prepareFrame=function(t){return!!this.getLayer().getSource()},e.prototype.renderFrame=function(t,i){var r=t.layerStatesArray[t.layerIndex],a=t.viewState,o=a.projection,s=a.resolution,h=a.center,l=a.rotation,u=t.pixelRatio,f=this.getLayer(),c=f.getSource(),v=c.getRevision(),d=c.getTileGridForProjection(o),p=d.getZForResolution(s,c.zDirection),_=d.getResolution(p),y=t.extent,m=r.extent&&xe(r.extent);m&&(y=Xe(y,xe(r.extent)));var g=c.getTilePixelRatio(u),M=Math.round(t.size[0]*g),x=Math.round(t.size[1]*g);if(l){var P=Math.round(Math.sqrt(M*M+x*x));M=P,x=P}var T=_*M/2/g,O=_*x/2/g,L=[h[0]-T,h[1]-O,h[0]+T,h[1]+O],b=d.getTileRangeForExtentAndZ(y,p),j={};j[p]={};var W=this.createLoadedTileFinder(c,o,j),ot=this.tmpExtent,_t=this.tmpTileRange_;this.newTiles_=!1;for(var N=b.minX;N<=b.maxX;++N)for(var X=b.minY;X<=b.maxY;++X){var K=this.getTile(p,N,X,t);if(this.isDrawableTile(K)){var Tt=lt(this);if(K.getState()==w.LOADED){j[p][K.tileCoord.toString()]=K;var Ut=K.inTransition(Tt);!this.newTiles_&&(Ut||this.renderedTiles.indexOf(K)===-1)&&(this.newTiles_=!0)}if(K.getAlpha(Tt,t.time)===1)continue}var ue=d.getTileCoordChildTileRange(K.tileCoord,_t,ot),fe=!1;ue&&(fe=W(p+1,ue)),fe||d.forEachTileCoordParentTileRange(K.tileCoord,W,_t,ot)}var kt=_/s;ke(this.pixelTransform,t.size[0]/2,t.size[1]/2,1/g,1/g,l,-M/2,-x/2);var je=cs(this.pixelTransform);this.useContainer(i,je,r.opacity);var U=this.context,ct=U.canvas;Cr(this.inversePixelTransform,this.pixelTransform),ke(this.tempTransform,M/2,x/2,kt,kt,0,-M/2,-x/2),ct.width!=M||ct.height!=x?(ct.width=M,ct.height=x):this.containerReused||U.clearRect(0,0,M,x),m&&this.clipUnrotated(U,t,m),H(U,c.getContextOptions()),this.preRender(U,t),this.renderedTiles.length=0;var Kt=Object.keys(j).map(Number);Kt.sort(si);var Dt,Ct,wt;r.opacity===1&&(!this.containerReused||c.getOpaque(t.viewState.projection))?Kt=Kt.reverse():(Dt=[],Ct=[]);for(var ri=Kt.length-1;ri>=0;--ri){var qt=Kt[ri],nr=c.getTilePixelSize(qt,u,o),jo=d.getResolution(qt),ir=jo/_,rr=nr[0]*ir*kt,ar=nr[1]*ir*kt,ai=d.getTileCoordForCoordAndZ(Jt(L),qt),or=d.getTileCoordExtent(ai),dn=dt(this.tempTransform,[g*(or[0]-L[0])/_,g*(L[3]-or[3])/_]),$o=g*c.getGutterForProjection(o),sr=j[qt];for(var zo in sr){var K=sr[zo],hr=K.tileCoord,lr=ai[1]-hr[1],Uo=Math.round(dn[0]-(lr-1)*rr),ur=ai[2]-hr[2],ko=Math.round(dn[1]-(ur-1)*ar),N=Math.round(dn[0]-lr*rr),X=Math.round(dn[1]-ur*ar),pn=Uo-N,_n=ko-X,fr=p===qt,Ut=fr&&K.getAlpha(lt(this),t.time)!==1;if(!Ut)if(Dt){U.save(),wt=[N,X,N+pn,X,N+pn,X+_n,N,X+_n];for(var yn=0,Ko=Dt.length;yn<Ko;++yn)if(p!==qt&&qt<Ct[yn]){var Xt=Dt[yn];U.beginPath(),U.moveTo(wt[0],wt[1]),U.lineTo(wt[2],wt[3]),U.lineTo(wt[4],wt[5]),U.lineTo(wt[6],wt[7]),U.moveTo(Xt[6],Xt[7]),U.lineTo(Xt[4],Xt[5]),U.lineTo(Xt[2],Xt[3]),U.lineTo(Xt[0],Xt[1]),U.clip()}Dt.push(wt),Ct.push(qt)}else U.clearRect(N,X,pn,_n);this.drawTileImage(K,t,N,X,pn,_n,$o,fr),Dt&&!Ut?(U.restore(),this.renderedTiles.unshift(K)):this.renderedTiles.push(K),this.updateUsedTiles(t.usedTiles,c,K)}}this.renderedRevision=v,this.renderedResolution=_,this.extentChanged=!this.renderedExtent_||!ui(this.renderedExtent_,L),this.renderedExtent_=L,this.renderedPixelRatio=u,this.renderedProjection=o,this.manageTilePyramid(t,c,d,u,o,y,p,f.getPreload()),this.scheduleExpireCache(t,c),this.postRender(U,t),r.extent&&U.restore(),je!==ct.style.transform&&(ct.style.transform=je);var cr=va(r.opacity),vr=this.container;return cr!==vr.style.opacity&&(vr.style.opacity=cr),this.container},e.prototype.drawTileImage=function(t,i,r,a,o,s,h,l){var u=this.getTileImage(t);if(!!u){var f=lt(this),c=l?t.getAlpha(f,i.time):1,v=c!==this.context.globalAlpha;v&&(this.context.save(),this.context.globalAlpha=c),this.context.drawImage(u,h,h,u.width-2*h,u.height-2*h,r,a,o,s),v&&this.context.restore(),c!==1?i.animate=!0:l&&t.endTransition(f)}},e.prototype.getImage=function(){var t=this.context;return t?t.canvas:null},e.prototype.getTileImage=function(t){return t.getImage()},e.prototype.scheduleExpireCache=function(t,i){if(i.canExpireCache()){var r=function(a,o,s){var h=lt(a);h in s.usedTiles&&a.expireCache(s.viewState.projection,s.usedTiles[h])}.bind(null,i);t.postRenderFunctions.push(r)}},e.prototype.updateUsedTiles=function(t,i,r){var a=lt(i);a in t||(t[a]={}),t[a][r.getKey()]=!0},e.prototype.manageTilePyramid=function(t,i,r,a,o,s,h,l,u){var f=lt(i);f in t.wantedTiles||(t.wantedTiles[f]={});var c=t.wantedTiles[f],v=t.tileQueue,d=r.getMinZoom(),p=0,_,y,m,g,M,x;for(x=d;x<=h;++x)for(y=r.getTileRangeForExtentAndZ(s,x,y),m=r.getResolution(x),g=y.minX;g<=y.maxX;++g)for(M=y.minY;M<=y.maxY;++M)h-x<=l?(++p,_=i.getTile(x,g,M,a,o),_.getState()==w.IDLE&&(c[_.getKey()]=!0,v.isKeyQueued(_.getKey())||v.enqueue([_,f,r.getTileCoordCenter(_.tileCoord),m])),u!==void 0&&u(_)):i.useTile(x,g,M,o);i.updateCacheSize(p,o)},e}(Wh);ja.prototype.getLayer;var mf=ja,Mf=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,r){i.__proto__=r}||function(i,r){for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(i[a]=r[a])},n(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");n(e,t);function i(){this.constructor=e}e.prototype=t===null?Object.create(t):(i.prototype=t.prototype,new i)}}(),Ef=function(n){Mf(e,n);function e(t){return n.call(this,t)||this}return e.prototype.createRenderer=function(){return new mf(this)},e}(yf),Fp=Ef,xf=.5,jt=!0,Tf=10,$a=.25,Cf=function(){function n(e,t,i,r,a,o){this.sourceProj_=e,this.targetProj_=t;var s={},h=Ve(this.targetProj_,this.sourceProj_);this.transformInv_=function(g){var M=g[0]+"/"+g[1];return s[M]||(s[M]=h(g)),s[M]},this.maxSourceExtent_=r,this.errorThresholdSquared_=a*a,this.triangles_=[],this.wrapsXInSource_=!1,this.canWrapXInSource_=this.sourceProj_.canWrapX()&&!!r&&!!this.sourceProj_.getExtent()&&Y(r)==Y(this.sourceProj_.getExtent()),this.sourceWorldWidth_=this.sourceProj_.getExtent()?Y(this.sourceProj_.getExtent()):null,this.targetWorldWidth_=this.targetProj_.getExtent()?Y(this.targetProj_.getExtent()):null;var l=Jt(i),u=wn(i),f=Pn(i),c=Rn(i),v=this.transformInv_(l),d=this.transformInv_(u),p=this.transformInv_(f),_=this.transformInv_(c),y=Tf+(o?Math.max(0,Math.ceil(Os(fi(i)/(o*o*256*256)))):0);if(this.addQuad_(l,u,f,c,v,d,p,_,y),this.wrapsXInSource_){var m=1/0;this.triangles_.forEach(function(g,M,x){m=Math.min(m,g.source[0][0],g.source[1][0],g.source[2][0])}),this.triangles_.forEach(function(g){if(Math.max(g.source[0][0],g.source[1][0],g.source[2][0])-m>this.sourceWorldWidth_/2){var M=[[g.source[0][0],g.source[0][1]],[g.source[1][0],g.source[1][1]],[g.source[2][0],g.source[2][1]]];M[0][0]-m>this.sourceWorldWidth_/2&&(M[0][0]-=this.sourceWorldWidth_),M[1][0]-m>this.sourceWorldWidth_/2&&(M[1][0]-=this.sourceWorldWidth_),M[2][0]-m>this.sourceWorldWidth_/2&&(M[2][0]-=this.sourceWorldWidth_);var x=Math.min(M[0][0],M[1][0],M[2][0]),P=Math.max(M[0][0],M[1][0],M[2][0]);P-x<this.sourceWorldWidth_/2&&(g.source=M)}}.bind(this))}s={}}return n.prototype.addTriangle_=function(e,t,i,r,a,o){this.triangles_.push({source:[r,a,o],target:[e,t,i]})},n.prototype.addQuad_=function(e,t,i,r,a,o,s,h,l){var u=Rr([a,o,s,h]),f=this.sourceWorldWidth_?Y(u)/this.sourceWorldWidth_:null,c=this.sourceWorldWidth_,v=this.sourceProj_.canWrapX()&&f>.5&&f<1,d=!1;if(l>0){if(this.targetProj_.isGlobal()&&this.targetWorldWidth_){var p=Rr([e,t,i,r]),_=Y(p)/this.targetWorldWidth_;d=_>$a||d}!v&&this.sourceProj_.isGlobal()&&f&&(d=f>$a||d)}if(!(!d&&this.maxSourceExtent_&&isFinite(u[0])&&isFinite(u[1])&&isFinite(u[2])&&isFinite(u[3])&&!vi(u,this.maxSourceExtent_))){var y=0;if(!d&&(!isFinite(a[0])||!isFinite(a[1])||!isFinite(o[0])||!isFinite(o[1])||!isFinite(s[0])||!isFinite(s[1])||!isFinite(h[0])||!isFinite(h[1]))){if(l>0)d=!0;else if(y=(!isFinite(a[0])||!isFinite(a[1])?8:0)+(!isFinite(o[0])||!isFinite(o[1])?4:0)+(!isFinite(s[0])||!isFinite(s[1])?2:0)+(!isFinite(h[0])||!isFinite(h[1])?1:0),y!=1&&y!=2&&y!=4&&y!=8)return}if(l>0){if(!d){var m=[(e[0]+i[0])/2,(e[1]+i[1])/2],g=this.transformInv_(m),M=void 0;if(v){var x=(te(a[0],c)+te(s[0],c))/2;M=x-te(g[0],c)}else M=(a[0]+s[0])/2-g[0];var P=(a[1]+s[1])/2-g[1],T=M*M+P*P;d=T>this.errorThresholdSquared_}if(d){if(Math.abs(e[0]-i[0])<=Math.abs(e[1]-i[1])){var O=[(t[0]+i[0])/2,(t[1]+i[1])/2],L=this.transformInv_(O),b=[(r[0]+e[0])/2,(r[1]+e[1])/2],j=this.transformInv_(b);this.addQuad_(e,t,O,b,a,o,L,j,l-1),this.addQuad_(b,O,i,r,j,L,s,h,l-1)}else{var W=[(e[0]+t[0])/2,(e[1]+t[1])/2],ot=this.transformInv_(W),_t=[(i[0]+r[0])/2,(i[1]+r[1])/2],N=this.transformInv_(_t);this.addQuad_(e,W,_t,r,a,ot,N,h,l-1),this.addQuad_(W,t,i,_t,ot,o,s,N,l-1)}return}}if(v){if(!this.canWrapXInSource_)return;this.wrapsXInSource_=!0}(y&11)==0&&this.addTriangle_(e,i,r,a,s,h),(y&14)==0&&this.addTriangle_(e,i,t,a,s,o),y&&((y&13)==0&&this.addTriangle_(t,r,e,o,h,a),(y&7)==0&&this.addTriangle_(t,r,i,o,h,s))}},n.prototype.calculateSourceExtent=function(){var e=Zt();return this.triangles_.forEach(function(t,i,r){var a=t.source;On(e,a[0]),On(e,a[1]),On(e,a[2])}),e},n.prototype.getTriangles=function(){return this.triangles_},n}(),Of=Cf,kn="1.3.0",za={imageSmoothingEnabled:!1,msImageSmoothingEnabled:!1},zi;function Ua(n,e,t,i,r){n.beginPath(),n.moveTo(0,0),n.lineTo(e,t),n.lineTo(i,r),n.closePath(),n.save(),n.clip(),n.fillRect(0,0,Math.max(e,i)+1,Math.max(t,r)),n.restore()}function Ui(n,e){return Math.abs(n[e*4]-210)>2||Math.abs(n[e*4+3]-.75*255)>2}function Rf(){if(zi===void 0){var n=document.createElement("canvas").getContext("2d");n.globalCompositeOperation="lighter",n.fillStyle="rgba(210, 0, 0, 0.75)",Ua(n,4,5,4,0),Ua(n,4,5,0,5);var e=n.getImageData(0,0,3,3).data;zi=Ui(e,0)||Ui(e,4)||Ui(e,8)}return zi}function ki(n,e,t,i){var r=Kr(t,e,n),a=Ur(e,i,t),o=e.getMetersPerUnit();o!==void 0&&(a*=o);var s=n.getMetersPerUnit();s!==void 0&&(a/=s);var h=n.getExtent();if(!h||li(h,r)){var l=Ur(n,a,r)/a;isFinite(l)&&l>0&&(a/=l)}return a}function Pf(n,e,t,i){var r=qe(t),a=ki(n,e,r,i);return(!isFinite(a)||a<=0)&&Nr(t,function(o){return a=ki(n,e,o,i),isFinite(a)&&a>0}),a}function wf(n,e,t,i,r,a,o,s,h,l,u,f){var c=An(Math.round(t*n),Math.round(t*e));if(H(c,f),h.length===0)return c.canvas;c.scale(t,t);function v(M){return Math.round(M*t)/t}c.globalCompositeOperation="lighter";var d=Zt();h.forEach(function(M,x,P){ys(d,M.extent)});var p=Y(d),_=Rt(d),y=An(Math.round(t*p/i),Math.round(t*_/i));H(y,f);var m=t/i;h.forEach(function(M,x,P){var T=M.extent[0]-d[0],O=-(M.extent[3]-d[3]),L=Y(M.extent),b=Rt(M.extent);M.image.width>0&&M.image.height>0&&y.drawImage(M.image,l,l,M.image.width-2*l,M.image.height-2*l,T*m,O*m,L*m,b*m)});var g=Jt(o);return s.getTriangles().forEach(function(M,x,P){var T=M.source,O=M.target,L=T[0][0],b=T[0][1],j=T[1][0],W=T[1][1],ot=T[2][0],_t=T[2][1],N=v((O[0][0]-g[0])/a),X=v(-(O[0][1]-g[1])/a),K=v((O[1][0]-g[0])/a),Tt=v(-(O[1][1]-g[1])/a),Ut=v((O[2][0]-g[0])/a),ue=v(-(O[2][1]-g[1])/a),fe=L,kt=b;L=0,b=0,j-=fe,W-=kt,ot-=fe,_t-=kt;var je=[[j,W,0,0,K-N],[ot,_t,0,0,Ut-N],[0,0,j,W,Tt-X],[0,0,ot,_t,ue-X]],U=Ps(je);if(!!U){if(c.save(),c.beginPath(),Rf()||f===za){c.moveTo(K,Tt);for(var ct=4,Kt=N-K,Dt=X-Tt,Ct=0;Ct<ct;Ct++)c.lineTo(K+v((Ct+1)*Kt/ct),Tt+v(Ct*Dt/(ct-1))),Ct!=ct-1&&c.lineTo(K+v((Ct+1)*Kt/ct),Tt+v((Ct+1)*Dt/(ct-1)));c.lineTo(Ut,ue)}else c.moveTo(K,Tt),c.lineTo(N,X),c.lineTo(Ut,ue);c.clip(),c.transform(U[0],U[2],U[1],U[3],N,X),c.translate(d[0]-fe,d[3]-kt),c.scale(i/t,-i/t),c.drawImage(y.canvas,0,0),c.restore()}}),u&&(c.save(),c.globalCompositeOperation="source-over",c.strokeStyle="black",c.lineWidth=1,s.getTriangles().forEach(function(M,x,P){var T=M.target,O=(T[0][0]-g[0])/a,L=-(T[0][1]-g[1])/a,b=(T[1][0]-g[0])/a,j=-(T[1][1]-g[1])/a,W=(T[2][0]-g[0])/a,ot=-(T[2][1]-g[1])/a;c.beginPath(),c.moveTo(b,j),c.lineTo(O,L),c.lineTo(W,ot),c.closePath(),c.stroke()}),c.restore()),c.canvas}var If=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,r){i.__proto__=r}||function(i,r){for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(i[a]=r[a])},n(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");n(e,t);function i(){this.constructor=e}e.prototype=t===null?Object.create(t):(i.prototype=t.prototype,new i)}}(),Sf=function(n){If(e,n);function e(t,i,r,a,o,s,h,l,u,f,c,v){var d=n.call(this,o,w.IDLE)||this;d.renderEdges_=c!==void 0?c:!1,d.contextOptions_=v,d.pixelRatio_=h,d.gutter_=l,d.canvas_=null,d.sourceTileGrid_=i,d.targetTileGrid_=a,d.wrappedTileCoord_=s||o,d.sourceTiles_=[],d.sourcesListenerKeys_=null,d.sourceZ_=0;var p=a.getTileCoordExtent(d.wrappedTileCoord_),_=d.targetTileGrid_.getExtent(),y=d.sourceTileGrid_.getExtent(),m=_?Xe(p,_):p;if(fi(m)===0)return d.state=w.EMPTY,d;var g=t.getExtent();g&&(y?y=Xe(y,g):y=g);var M=a.getResolution(d.wrappedTileCoord_[0]),x=Pf(t,r,m,M);if(!isFinite(x)||x<=0)return d.state=w.EMPTY,d;var P=f!==void 0?f:xf;if(d.triangulation_=new Of(t,r,m,y,x*P,M),d.triangulation_.getTriangles().length===0)return d.state=w.EMPTY,d;d.sourceZ_=i.getZForResolution(x);var T=d.triangulation_.calculateSourceExtent();if(y&&(t.canWrapX()?(T[1]=nt(T[1],y[1],y[3]),T[3]=nt(T[3],y[1],y[3])):T=Xe(T,y)),!fi(T))d.state=w.EMPTY;else{for(var O=i.getTileRangeForExtentAndZ(T,d.sourceZ_),L=O.minX;L<=O.maxX;L++)for(var b=O.minY;b<=O.maxY;b++){var j=u(d.sourceZ_,L,b,h);j&&d.sourceTiles_.push(j)}d.sourceTiles_.length===0&&(d.state=w.EMPTY)}return d}return e.prototype.getImage=function(){return this.canvas_},e.prototype.reproject_=function(){var t=[];if(this.sourceTiles_.forEach(function(u,f,c){u&&u.getState()==w.LOADED&&t.push({extent:this.sourceTileGrid_.getTileCoordExtent(u.tileCoord),image:u.getImage()})}.bind(this)),this.sourceTiles_.length=0,t.length===0)this.state=w.ERROR;else{var i=this.wrappedTileCoord_[0],r=this.targetTileGrid_.getTileSize(i),a=typeof r=="number"?r:r[0],o=typeof r=="number"?r:r[1],s=this.targetTileGrid_.getResolution(i),h=this.sourceTileGrid_.getResolution(this.sourceZ_),l=this.targetTileGrid_.getTileCoordExtent(this.wrappedTileCoord_);this.canvas_=wf(a,o,this.pixelRatio_,h,this.sourceTileGrid_.getExtent(),s,l,this.triangulation_,t,this.gutter_,this.renderEdges_,this.contextOptions_),this.state=w.LOADED}this.changed()},e.prototype.load=function(){if(this.state==w.IDLE){this.state=w.LOADING,this.changed();var t=0;this.sourcesListenerKeys_=[],this.sourceTiles_.forEach(function(i,r,a){var o=i.getState();if(o==w.IDLE||o==w.LOADING){t++;var s=D(i,S.CHANGE,function(h){var l=i.getState();(l==w.LOADED||l==w.ERROR||l==w.EMPTY)&&(B(s),t--,t===0&&(this.unlistenSources_(),this.reproject_()))},this);this.sourcesListenerKeys_.push(s)}}.bind(this)),t===0?setTimeout(this.reproject_.bind(this),0):this.sourceTiles_.forEach(function(i,r,a){var o=i.getState();o==w.IDLE&&i.load()})}},e.prototype.unlistenSources_=function(){this.sourcesListenerKeys_.forEach(B),this.sourcesListenerKeys_=null},e}(Ea),Af=Sf,Ki={TILELOADSTART:"tileloadstart",TILELOADEND:"tileloadend",TILELOADERROR:"tileloaderror"},Lf=[0,0,0],Nf=function(){function n(e){this.minZoom=e.minZoom!==void 0?e.minZoom:0,this.resolutions_=e.resolutions,$(Yo(this.resolutions_,function(o,s){return s-o},!0),17);var t;if(!e.origins){for(var i=0,r=this.resolutions_.length-1;i<r;++i)if(!t)t=this.resolutions_[i]/this.resolutions_[i+1];else if(this.resolutions_[i]/this.resolutions_[i+1]!==t){t=void 0;break}}this.zoomFactor_=t,this.maxZoom=this.resolutions_.length-1,this.origin_=e.origin!==void 0?e.origin:null,this.origins_=null,e.origins!==void 0&&(this.origins_=e.origins,$(this.origins_.length==this.resolutions_.length,20));var a=e.extent;a!==void 0&&!this.origin_&&!this.origins_&&(this.origin_=Jt(a)),$(!this.origin_&&this.origins_||this.origin_&&!this.origins_,18),this.tileSizes_=null,e.tileSizes!==void 0&&(this.tileSizes_=e.tileSizes,$(this.tileSizes_.length==this.resolutions_.length,19)),this.tileSize_=e.tileSize!==void 0?e.tileSize:this.tileSizes_?null:Pi,$(!this.tileSize_&&this.tileSizes_||this.tileSize_&&!this.tileSizes_,22),this.extent_=a!==void 0?a:null,this.fullTileRanges_=null,this.tmpSize_=[0,0],this.tmpExtent_=[0,0,0,0],e.sizes!==void 0?this.fullTileRanges_=e.sizes.map(function(o,s){var h=new Ga(Math.min(0,o[0]),Math.max(o[0]-1,-1),Math.min(0,o[1]),Math.max(o[1]-1,-1));if(a){var l=this.getTileRangeForExtentAndZ(a,s);h.minX=Math.max(l.minX,h.minX),h.maxX=Math.min(l.maxX,h.maxX),h.minY=Math.max(l.minY,h.minY),h.maxY=Math.min(l.maxY,h.maxY)}return h},this):a&&this.calculateTileRanges_(a)}return n.prototype.forEachTileCoord=function(e,t,i){for(var r=this.getTileRangeForExtentAndZ(e,t),a=r.minX,o=r.maxX;a<=o;++a)for(var s=r.minY,h=r.maxY;s<=h;++s)i([t,a,s])},n.prototype.forEachTileCoordParentTileRange=function(e,t,i,r){var a,o,s,h=null,l=e[0]-1;for(this.zoomFactor_===2?(o=e[1],s=e[2]):h=this.getTileCoordExtent(e,r);l>=this.minZoom;){if(this.zoomFactor_===2?(o=Math.floor(o/2),s=Math.floor(s/2),a=Pe(o,o,s,s,i)):a=this.getTileRangeForExtentAndZ(h,l,i),t(l,a))return!0;--l}return!1},n.prototype.getExtent=function(){return this.extent_},n.prototype.getMaxZoom=function(){return this.maxZoom},n.prototype.getMinZoom=function(){return this.minZoom},n.prototype.getOrigin=function(e){return this.origin_?this.origin_:this.origins_[e]},n.prototype.getResolution=function(e){return this.resolutions_[e]},n.prototype.getResolutions=function(){return this.resolutions_},n.prototype.getTileCoordChildTileRange=function(e,t,i){if(e[0]<this.maxZoom){if(this.zoomFactor_===2){var r=e[1]*2,a=e[2]*2;return Pe(r,r+1,a,a+1,t)}var o=this.getTileCoordExtent(e,i||this.tmpExtent_);return this.getTileRangeForExtentAndZ(o,e[0]+1,t)}return null},n.prototype.getTileRangeForTileCoordAndZ=function(e,t,i){if(t>this.maxZoom||t<this.minZoom)return null;var r=e[0],a=e[1],o=e[2];if(t===r)return Pe(a,o,a,o,i);if(this.zoomFactor_){var s=Math.pow(this.zoomFactor_,t-r),h=Math.floor(a*s),l=Math.floor(o*s);if(t<r)return Pe(h,h,l,l,i);var u=Math.floor(s*(a+1))-1,f=Math.floor(s*(o+1))-1;return Pe(h,u,l,f,i)}var c=this.getTileCoordExtent(e,this.tmpExtent_);return this.getTileRangeForExtentAndZ(c,t,i)},n.prototype.getTileRangeExtent=function(e,t,i){var r=this.getOrigin(e),a=this.getResolution(e),o=St(this.getTileSize(e),this.tmpSize_),s=r[0]+t.minX*o[0]*a,h=r[0]+(t.maxX+1)*o[0]*a,l=r[1]+t.minY*o[1]*a,u=r[1]+(t.maxY+1)*o[1]*a;return Qt(s,l,h,u,i)},n.prototype.getTileRangeForExtentAndZ=function(e,t,i){var r=Lf;this.getTileCoordForXYAndZ_(e[0],e[3],t,!1,r);var a=r[1],o=r[2];return this.getTileCoordForXYAndZ_(e[2],e[1],t,!0,r),Pe(a,r[1],o,r[2],i)},n.prototype.getTileCoordCenter=function(e){var t=this.getOrigin(e[0]),i=this.getResolution(e[0]),r=St(this.getTileSize(e[0]),this.tmpSize_);return[t[0]+(e[1]+.5)*r[0]*i,t[1]-(e[2]+.5)*r[1]*i]},n.prototype.getTileCoordExtent=function(e,t){var i=this.getOrigin(e[0]),r=this.getResolution(e[0]),a=St(this.getTileSize(e[0]),this.tmpSize_),o=i[0]+e[1]*a[0]*r,s=i[1]-(e[2]+1)*a[1]*r,h=o+a[0]*r,l=s+a[1]*r;return Qt(o,s,h,l,t)},n.prototype.getTileCoordForCoordAndResolution=function(e,t,i){return this.getTileCoordForXYAndResolution_(e[0],e[1],t,!1,i)},n.prototype.getTileCoordForXYAndResolution_=function(e,t,i,r,a){var o=this.getZForResolution(i),s=i/this.getResolution(o),h=this.getOrigin(o),l=St(this.getTileSize(o),this.tmpSize_),u=r?.5:0,f=r?.5:0,c=Math.floor((e-h[0])/i+u),v=Math.floor((h[1]-t)/i+f),d=s*c/l[0],p=s*v/l[1];return r?(d=Math.ceil(d)-1,p=Math.ceil(p)-1):(d=Math.floor(d),p=Math.floor(p)),La(o,d,p,a)},n.prototype.getTileCoordForXYAndZ_=function(e,t,i,r,a){var o=this.getOrigin(i),s=this.getResolution(i),h=St(this.getTileSize(i),this.tmpSize_),l=r?.5:0,u=r?.5:0,f=Math.floor((e-o[0])/s+l),c=Math.floor((o[1]-t)/s+u),v=f/h[0],d=c/h[1];return r?(v=Math.ceil(v)-1,d=Math.ceil(d)-1):(v=Math.floor(v),d=Math.floor(d)),La(i,v,d,a)},n.prototype.getTileCoordForCoordAndZ=function(e,t,i){return this.getTileCoordForXYAndZ_(e[0],e[1],t,!1,i)},n.prototype.getTileCoordResolution=function(e){return this.resolutions_[e[0]]},n.prototype.getTileSize=function(e){return this.tileSize_?this.tileSize_:this.tileSizes_[e]},n.prototype.getFullTileRange=function(e){return this.fullTileRanges_?this.fullTileRanges_[e]:this.extent_?this.getTileRangeForExtentAndZ(this.extent_,e):null},n.prototype.getZForResolution=function(e,t){var i=hi(this.resolutions_,e,t||0);return nt(i,this.minZoom,this.maxZoom)},n.prototype.calculateTileRanges_=function(e){for(var t=this.resolutions_.length,i=new Array(t),r=this.minZoom;r<t;++r)i[r]=this.getTileRangeForExtentAndZ(e,r);this.fullTileRanges_=i},n}(),ka=Nf;function Ka(n){var e=n.getDefaultTileGrid();return e||(e=Gf(n),n.setDefaultTileGrid(e)),e}function bf(n,e,t){var i=e[0],r=n.getTileCoordCenter(e),a=qi(t);if(li(a,r))return e;var o=Y(a),s=Math.ceil((a[0]-r[0])/o);return r[0]+=o*s,n.getTileCoordForCoordAndZ(r,i)}function Df(n,e,t,i){var r=i!==void 0?i:Ke.TOP_LEFT,a=qa(n,e,t);return new ka({extent:n,origin:ms(n,r),resolutions:a,tileSize:t})}function Ff(n){var e=n||{},t=e.extent||Q("EPSG:3857").getExtent(),i={extent:t,minZoom:e.minZoom,tileSize:e.tileSize,resolutions:qa(t,e.maxZoom,e.tileSize,e.maxResolution)};return new ka(i)}function qa(n,e,t,i){for(var r=e!==void 0?e:jl,a=Rt(n),o=Y(n),s=St(t!==void 0?t:Pi),h=i>0?i:Math.max(o/s[0],a/s[1]),l=r+1,u=new Array(l),f=0;f<l;++f)u[f]=h/Math.pow(2,f);return u}function Gf(n,e,t,i){var r=qi(n);return Df(r,e,t,i)}function qi(n){n=Q(n);var e=n.getExtent();if(!e){var t=180*It[Ft.DEGREES]/n.getMetersPerUnit();e=Qt(-t,-t,t,t)}return e}var Xa=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,r){i.__proto__=r}||function(i,r){for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(i[a]=r[a])},n(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");n(e,t);function i(){this.constructor=e}e.prototype=t===null?Object.create(t):(i.prototype=t.prototype,new i)}}(),jf=function(n){Xa(e,n);function e(t){var i=n.call(this,{attributions:t.attributions,attributionsCollapsible:t.attributionsCollapsible,projection:t.projection,state:t.state,wrapX:t.wrapX})||this;i.on,i.once,i.un,i.opaque_=t.opaque!==void 0?t.opaque:!1,i.tilePixelRatio_=t.tilePixelRatio!==void 0?t.tilePixelRatio:1,i.tileGrid=t.tileGrid!==void 0?t.tileGrid:null;var r=[256,256],a=t.tileGrid;return a&&St(a.getTileSize(a.getMinZoom()),r),i.tileCache=new Da(t.cacheSize||0),i.tmpSize=[0,0],i.key_=t.key||"",i.tileOptions={transition:t.transition},i.zDirection=t.zDirection?t.zDirection:0,i}return e.prototype.canExpireCache=function(){return this.tileCache.canExpireCache()},e.prototype.expireCache=function(t,i){var r=this.getTileCacheForProjection(t);r&&r.expireCache(i)},e.prototype.forEachLoadedTile=function(t,i,r,a){var o=this.getTileCacheForProjection(t);if(!o)return!1;for(var s=!0,h,l,u,f=r.minX;f<=r.maxX;++f)for(var c=r.minY;c<=r.maxY;++c)l=zn(i,f,c),u=!1,o.containsKey(l)&&(h=o.get(l),u=h.getState()===w.LOADED,u&&(u=a(h)!==!1)),u||(s=!1);return s},e.prototype.getGutterForProjection=function(t){return 0},e.prototype.getKey=function(){return this.key_},e.prototype.setKey=function(t){this.key_!==t&&(this.key_=t,this.changed())},e.prototype.getOpaque=function(t){return this.opaque_},e.prototype.getResolutions=function(){return this.tileGrid.getResolutions()},e.prototype.getTile=function(t,i,r,a,o){return k()},e.prototype.getTileGrid=function(){return this.tileGrid},e.prototype.getTileGridForProjection=function(t){return this.tileGrid?this.tileGrid:Ka(t)},e.prototype.getTileCacheForProjection=function(t){return $(Ee(this.getProjection(),t),68),this.tileCache},e.prototype.getTilePixelRatio=function(t){return this.tilePixelRatio_},e.prototype.getTilePixelSize=function(t,i,r){var a=this.getTileGridForProjection(r),o=this.getTilePixelRatio(i),s=St(a.getTileSize(t),this.tmpSize);return o==1?s:la(s,o,this.tmpSize)},e.prototype.getTileCoordForTileUrlFunction=function(t,i){var r=i!==void 0?i:this.getProjection(),a=this.getTileGridForProjection(r);return this.getWrapX()&&r.isGlobal()&&(t=bf(a,t,r)),cf(t,a)?t:null},e.prototype.clear=function(){this.tileCache.clear()},e.prototype.refresh=function(){this.clear(),n.prototype.refresh.call(this)},e.prototype.updateCacheSize=function(t,i){var r=this.getTileCacheForProjection(i);t>r.highWaterMark&&(r.highWaterMark=t)},e.prototype.useTile=function(t,i,r,a){},e}(il),$f=function(n){Xa(e,n);function e(t,i){var r=n.call(this,t)||this;return r.tile=i,r}return e}(Yt),zf=jf;function Uf(n,e){var t=/\{z\}/g,i=/\{x\}/g,r=/\{y\}/g,a=/\{-y\}/g;return function(o,s,h){if(o)return n.replace(t,o[0].toString()).replace(i,o[1].toString()).replace(r,o[2].toString()).replace(a,function(){var l=o[0],u=e.getFullTileRange(l);$(u,55);var f=u.getHeight()-o[2]-1;return f.toString()})}}function kf(n,e){for(var t=n.length,i=new Array(t),r=0;r<t;++r)i[r]=Uf(n[r],e);return Kf(i)}function Kf(n){return n.length===1?n[0]:function(e,t,i){if(e){var r=ba(e),a=te(r,n.length);return n[a](e,t,i)}else return}}function qf(n){var e=[],t=/\{([a-z])-([a-z])\}/.exec(n);if(t){var i=t[1].charCodeAt(0),r=t[2].charCodeAt(0),a=void 0;for(a=i;a<=r;++a)e.push(n.replace(t[0],String.fromCharCode(a)));return e}if(t=/\{(\d+)-(\d+)\}/.exec(n),t){for(var o=parseInt(t[2],10),s=parseInt(t[1],10);s<=o;s++)e.push(n.replace(t[0],s.toString()));return e}return e.push(n),e}var Xf=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,r){i.__proto__=r}||function(i,r){for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(i[a]=r[a])},n(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");n(e,t);function i(){this.constructor=e}e.prototype=t===null?Object.create(t):(i.prototype=t.prototype,new i)}}(),Zf=function(n){Xf(e,n);function e(t){var i=n.call(this,{attributions:t.attributions,cacheSize:t.cacheSize,opaque:t.opaque,projection:t.projection,state:t.state,tileGrid:t.tileGrid,tilePixelRatio:t.tilePixelRatio,wrapX:t.wrapX,transition:t.transition,key:t.key,attributionsCollapsible:t.attributionsCollapsible,zDirection:t.zDirection})||this;return i.generateTileUrlFunction_=i.tileUrlFunction===e.prototype.tileUrlFunction,i.tileLoadFunction=t.tileLoadFunction,t.tileUrlFunction&&(i.tileUrlFunction=t.tileUrlFunction),i.urls=null,t.urls?i.setUrls(t.urls):t.url&&i.setUrl(t.url),i.tileLoadingKeys_={},i}return e.prototype.getTileLoadFunction=function(){return this.tileLoadFunction},e.prototype.getTileUrlFunction=function(){return Object.getPrototypeOf(this).tileUrlFunction===this.tileUrlFunction?this.tileUrlFunction.bind(this):this.tileUrlFunction},e.prototype.getUrls=function(){return this.urls},e.prototype.handleTileChange=function(t){var i=t.target,r=lt(i),a=i.getState(),o;a==w.LOADING?(this.tileLoadingKeys_[r]=!0,o=Ki.TILELOADSTART):r in this.tileLoadingKeys_&&(delete this.tileLoadingKeys_[r],o=a==w.ERROR?Ki.TILELOADERROR:a==w.LOADED?Ki.TILELOADEND:void 0),o!=null&&this.dispatchEvent(new $f(o,i))},e.prototype.setTileLoadFunction=function(t){this.tileCache.clear(),this.tileLoadFunction=t,this.changed()},e.prototype.setTileUrlFunction=function(t,i){this.tileUrlFunction=t,this.tileCache.pruneExceptNewestZ(),typeof i!="undefined"?this.setKey(i):this.changed()},e.prototype.setUrl=function(t){var i=qf(t);this.urls=i,this.setUrls(i)},e.prototype.setUrls=function(t){this.urls=t;var i=t.join(`
`);this.generateTileUrlFunction_?this.setTileUrlFunction(kf(t,this.tileGrid),i):this.setKey(i)},e.prototype.tileUrlFunction=function(t,i,r){},e.prototype.useTile=function(t,i,r){var a=zn(t,i,r);this.tileCache.containsKey(a)&&this.tileCache.get(a)},e}(zf),Bf=Zf,Vf=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,r){i.__proto__=r}||function(i,r){for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(i[a]=r[a])},n(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");n(e,t);function i(){this.constructor=e}e.prototype=t===null?Object.create(t):(i.prototype=t.prototype,new i)}}(),Wf=function(n){Vf(e,n);function e(t){var i=n.call(this,{attributions:t.attributions,cacheSize:t.cacheSize,opaque:t.opaque,projection:t.projection,state:t.state,tileGrid:t.tileGrid,tileLoadFunction:t.tileLoadFunction?t.tileLoadFunction:Hf,tilePixelRatio:t.tilePixelRatio,tileUrlFunction:t.tileUrlFunction,url:t.url,urls:t.urls,wrapX:t.wrapX,transition:t.transition,key:t.key,attributionsCollapsible:t.attributionsCollapsible,zDirection:t.zDirection})||this;return i.crossOrigin=t.crossOrigin!==void 0?t.crossOrigin:null,i.tileClass=t.tileClass!==void 0?t.tileClass:cl,i.tileCacheForProjection={},i.tileGridForProjection={},i.reprojectionErrorThreshold_=t.reprojectionErrorThreshold,i.contextOptions_=t.imageSmoothing===!1?za:void 0,i.renderReprojectionEdges_=!1,i}return e.prototype.canExpireCache=function(){if(!jt)return n.prototype.canExpireCache.call(this);if(this.tileCache.canExpireCache())return!0;for(var t in this.tileCacheForProjection)if(this.tileCacheForProjection[t].canExpireCache())return!0;return!1},e.prototype.expireCache=function(t,i){if(!jt){n.prototype.expireCache.call(this,t,i);return}var r=this.getTileCacheForProjection(t);this.tileCache.expireCache(this.tileCache==r?i:{});for(var a in this.tileCacheForProjection){var o=this.tileCacheForProjection[a];o.expireCache(o==r?i:{})}},e.prototype.getContextOptions=function(){return this.contextOptions_},e.prototype.getGutterForProjection=function(t){return jt&&this.getProjection()&&t&&!Ee(this.getProjection(),t)?0:this.getGutter()},e.prototype.getGutter=function(){return 0},e.prototype.getKey=function(){return n.prototype.getKey.call(this)+(this.contextOptions_?`
`+JSON.stringify(this.contextOptions_):"")},e.prototype.getOpaque=function(t){return jt&&this.getProjection()&&t&&!Ee(this.getProjection(),t)?!1:n.prototype.getOpaque.call(this,t)},e.prototype.getTileGridForProjection=function(t){if(!jt)return n.prototype.getTileGridForProjection.call(this,t);var i=this.getProjection();if(this.tileGrid&&(!i||Ee(i,t)))return this.tileGrid;var r=lt(t);return r in this.tileGridForProjection||(this.tileGridForProjection[r]=Ka(t)),this.tileGridForProjection[r]},e.prototype.getTileCacheForProjection=function(t){if(!jt)return n.prototype.getTileCacheForProjection.call(this,t);var i=this.getProjection();if(!i||Ee(i,t))return this.tileCache;var r=lt(t);return r in this.tileCacheForProjection||(this.tileCacheForProjection[r]=new Da(this.tileCache.highWaterMark)),this.tileCacheForProjection[r]},e.prototype.createTile_=function(t,i,r,a,o,s){var h=[t,i,r],l=this.getTileCoordForTileUrlFunction(h,o),u=l?this.tileUrlFunction(l,a,o):void 0,f=new this.tileClass(h,u!==void 0?w.IDLE:w.EMPTY,u!==void 0?u:"",this.crossOrigin,this.tileLoadFunction,this.tileOptions);return f.key=s,f.addEventListener(S.CHANGE,this.handleTileChange.bind(this)),f},e.prototype.getTile=function(t,i,r,a,o){var s=this.getProjection();if(!jt||!s||!o||Ee(s,o))return this.getTileInternal(t,i,r,a,s||o);var h=this.getTileCacheForProjection(o),l=[t,i,r],u=void 0,f=Na(l);h.containsKey(f)&&(u=h.get(f));var c=this.getKey();if(u&&u.key==c)return u;var v=this.getTileGridForProjection(s),d=this.getTileGridForProjection(o),p=this.getTileCoordForTileUrlFunction(l,o),_=new Af(s,v,o,d,l,p,this.getTilePixelRatio(a),this.getGutter(),function(y,m,g,M){return this.getTileInternal(y,m,g,M,s)}.bind(this),this.reprojectionErrorThreshold_,this.renderReprojectionEdges_,this.contextOptions_);return _.key=c,u?(_.interimTile=u,_.refreshInterimChain(),h.replace(f,_)):h.set(f,_),_},e.prototype.getTileInternal=function(t,i,r,a,o){var s=null,h=zn(t,i,r),l=this.getKey();if(!this.tileCache.containsKey(h))s=this.createTile_(t,i,r,a,o,l),this.tileCache.set(h,s);else if(s=this.tileCache.get(h),s.key!=l){var u=s;s=this.createTile_(t,i,r,a,o,l),u.getState()==w.IDLE?s.interimTile=u.interimTile:s.interimTile=u,s.refreshInterimChain(),this.tileCache.replace(h,s)}return s},e.prototype.setRenderReprojectionEdges=function(t){if(!(!jt||this.renderReprojectionEdges_==t)){this.renderReprojectionEdges_=t;for(var i in this.tileCacheForProjection)this.tileCacheForProjection[i].clear();this.changed()}},e.prototype.setTileGridForProjection=function(t,i){if(jt){var r=Q(t);if(r){var a=lt(r);a in this.tileGridForProjection||(this.tileGridForProjection[a]=i)}}},e}(Bf);function Hf(n,e){n.getImage().src=e}var Za=Wf,Yf=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,r){i.__proto__=r}||function(i,r){for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(i[a]=r[a])},n(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");n(e,t);function i(){this.constructor=e}e.prototype=t===null?Object.create(t):(i.prototype=t.prototype,new i)}}(),Qf=function(n){Yf(e,n);function e(t){var i=this,r=t||{},a=r.projection!==void 0?r.projection:"EPSG:3857",o=r.tileGrid!==void 0?r.tileGrid:Ff({extent:qi(a),maxResolution:r.maxResolution,maxZoom:r.maxZoom,minZoom:r.minZoom,tileSize:r.tileSize});return i=n.call(this,{attributions:r.attributions,cacheSize:r.cacheSize,crossOrigin:r.crossOrigin,imageSmoothing:r.imageSmoothing,opaque:r.opaque,projection:a,reprojectionErrorThreshold:r.reprojectionErrorThreshold,tileGrid:o,tileLoadFunction:r.tileLoadFunction,tilePixelRatio:r.tilePixelRatio,tileUrlFunction:r.tileUrlFunction,url:r.url,urls:r.urls,wrapX:r.wrapX!==void 0?r.wrapX:!0,transition:r.transition,attributionsCollapsible:r.attributionsCollapsible,zDirection:r.zDirection})||this,i}return e}(Za),Jf=Qf,tc=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,r){i.__proto__=r}||function(i,r){for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(i[a]=r[a])},n(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");n(e,t);function i(){this.constructor=e}e.prototype=t===null?Object.create(t):(i.prototype=t.prototype,new i)}}(),ec='&#169; <a href="https://www.openstreetmap.org/copyright" target="_blank">OpenStreetMap</a> contributors.',nc=function(n){tc(e,n);function e(t){var i=this,r=t||{},a;r.attributions!==void 0?a=r.attributions:a=[ec];var o=r.crossOrigin!==void 0?r.crossOrigin:"anonymous",s=r.url!==void 0?r.url:"https://{a-c}.tile.openstreetmap.org/{z}/{x}/{y}.png";return i=n.call(this,{attributions:a,attributionsCollapsible:!1,cacheSize:r.cacheSize,crossOrigin:o,imageSmoothing:r.imageSmoothing,maxZoom:r.maxZoom!==void 0?r.maxZoom:19,opaque:r.opaque!==void 0?r.opaque:!0,reprojectionErrorThreshold:r.reprojectionErrorThreshold,tileLoadFunction:r.tileLoadFunction,transition:r.transition,url:s,wrapX:r.wrapX,zDirection:r.zDirection})||this,i}return e}(Jf),Gp=nc,Kn={CARMENTA_SERVER:"carmentaserver",GEOSERVER:"geoserver",MAPSERVER:"mapserver",QGIS:"qgis"};function Ba(n,e){var t=[];Object.keys(e).forEach(function(r){e[r]!==null&&e[r]!==void 0&&t.push(r+"="+encodeURIComponent(e[r]))});var i=t.join("&");return n=n.replace(/[?&]$/,""),n=n.indexOf("?")===-1?n+"?":n+"&",n+i}var ic=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,r){i.__proto__=r}||function(i,r){for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(i[a]=r[a])},n(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");n(e,t);function i(){this.constructor=e}e.prototype=t===null?Object.create(t):(i.prototype=t.prototype,new i)}}(),rc=function(n){ic(e,n);function e(t){var i=this,r=t||{},a=r.params||{},o="TRANSPARENT"in a?a.TRANSPARENT:!0;return i=n.call(this,{attributions:r.attributions,attributionsCollapsible:r.attributionsCollapsible,cacheSize:r.cacheSize,crossOrigin:r.crossOrigin,imageSmoothing:r.imageSmoothing,opaque:!o,projection:r.projection,reprojectionErrorThreshold:r.reprojectionErrorThreshold,tileClass:r.tileClass,tileGrid:r.tileGrid,tileLoadFunction:r.tileLoadFunction,url:r.url,urls:r.urls,wrapX:r.wrapX!==void 0?r.wrapX:!0,transition:r.transition,zDirection:r.zDirection})||this,i.gutter_=r.gutter!==void 0?r.gutter:0,i.params_=a,i.v13_=!0,i.serverType_=r.serverType,i.hidpi_=r.hidpi!==void 0?r.hidpi:!0,i.tmpExtent_=Zt(),i.updateV13_(),i.setKey(i.getKeyForParams_()),i}return e.prototype.getFeatureInfoUrl=function(t,i,r,a){var o=Q(r),s=this.getProjection(),h=this.getTileGrid();h||(h=this.getTileGridForProjection(o));var l=h.getZForResolution(i,this.zDirection),u=h.getTileCoordForCoordAndZ(t,l);if(!(h.getResolutions().length<=u[0])){var f=h.getResolution(u[0]),c=h.getTileCoordExtent(u,this.tmpExtent_),v=St(h.getTileSize(u[0]),this.tmpSize),d=this.gutter_;d!==0&&(v=sa(v,d,this.tmpSize),c=Pr(c,f*d,c)),s&&s!==o&&(f=ki(s,o,t,f),c=Bs(c,o,s),t=Kr(t,o,s));var p={SERVICE:"WMS",VERSION:kn,REQUEST:"GetFeatureInfo",FORMAT:"image/png",TRANSPARENT:!0,QUERY_LAYERS:this.params_.LAYERS};H(p,this.params_,a);var _=Math.floor((t[0]-c[0])/f),y=Math.floor((c[3]-t[1])/f);return p[this.v13_?"I":"X"]=_,p[this.v13_?"J":"Y"]=y,this.getRequestUrl_(u,v,c,1,s||o,p)}},e.prototype.getLegendUrl=function(t,i){if(this.urls[0]!==void 0){var r={SERVICE:"WMS",VERSION:kn,REQUEST:"GetLegendGraphic",FORMAT:"image/png"};if(i===void 0||i.LAYER===void 0){var a=this.params_.LAYERS,o=!Array.isArray(a)||a.length===1;if(!o)return;r.LAYER=a}if(t!==void 0){var s=this.getProjection()?this.getProjection().getMetersPerUnit():1,h=28e-5;r.SCALE=t*s/h}return H(r,i),Ba(this.urls[0],r)}},e.prototype.getGutter=function(){return this.gutter_},e.prototype.getParams=function(){return this.params_},e.prototype.getRequestUrl_=function(t,i,r,a,o,s){var h=this.urls;if(!!h){if(s.WIDTH=i[0],s.HEIGHT=i[1],s[this.v13_?"CRS":"SRS"]=o.getCode(),"STYLES"in this.params_||(s.STYLES=""),a!=1)switch(this.serverType_){case Kn.GEOSERVER:var l=90*a+.5|0;"FORMAT_OPTIONS"in s?s.FORMAT_OPTIONS+=";dpi:"+l:s.FORMAT_OPTIONS="dpi:"+l;break;case Kn.MAPSERVER:s.MAP_RESOLUTION=90*a;break;case Kn.CARMENTA_SERVER:case Kn.QGIS:s.DPI=90*a;break;default:$(!1,52);break}var u=o.getAxisOrientation(),f=r;if(this.v13_&&u.substr(0,2)=="ne"){var c=void 0;c=r[0],f[0]=r[1],f[1]=c,c=r[2],f[2]=r[3],f[3]=c}s.BBOX=f.join(",");var v;if(h.length==1)v=h[0];else{var d=te(ba(t),h.length);v=h[d]}return Ba(v,s)}},e.prototype.getTilePixelRatio=function(t){return!this.hidpi_||this.serverType_===void 0?1:t},e.prototype.getKeyForParams_=function(){var t=0,i=[];for(var r in this.params_)i[t++]=r+"-"+this.params_[r];return i.join("/")},e.prototype.updateParams=function(t){H(this.params_,t),this.updateV13_(),this.setKey(this.getKeyForParams_())},e.prototype.updateV13_=function(){var t=this.params_.VERSION||kn;this.v13_=zs(t,"1.3")>=0},e.prototype.tileUrlFunction=function(t,i,r){var a=this.getTileGrid();if(a||(a=this.getTileGridForProjection(r)),!(a.getResolutions().length<=t[0])){i!=1&&(!this.hidpi_||this.serverType_===void 0)&&(i=1);var o=a.getResolution(t[0]),s=a.getTileCoordExtent(t,this.tmpExtent_),h=St(a.getTileSize(t[0]),this.tmpSize),l=this.gutter_;l!==0&&(h=sa(h,l,this.tmpSize),s=Pr(s,o*l,s)),i!=1&&(h=la(h,i,this.tmpSize));var u={SERVICE:"WMS",VERSION:kn,REQUEST:"GetMap",FORMAT:"image/png",TRANSPARENT:!0};return H(u,this.params_),this.getRequestUrl_(t,h,s,i,r,u)}},e}(Za),jp=rc;window.ol&&!ol.ext&&(ol.ext={});var we=function(n,e){n.prototype=Object.create(e.prototype),n.prototype.constructor=n};window.ol&&(ol.inherits||(ol.inherits=we));window.NodeList&&!NodeList.prototype.forEach&&(NodeList.prototype.forEach=Array.prototype.forEach);window.Element&&!Element.prototype.remove&&(Element.prototype.remove=function(){this.parentNode&&this.parentNode.removeChild(this)});window.ol&&(ol.ext.input={});var oe=function(n){n=n||{},yt.call(this);var e=this.input=n.input;e||(e=this.input=document.createElement("INPUT"),n.type&&e.setAttribute("type",n.type),n.min!==void 0&&e.setAttribute("min",n.min),n.max!==void 0&&e.setAttribute("max",n.max),n.step!==void 0&&e.setAttribute("step",n.step),n.parent&&n.parent.appendChild(e)),n.disabled&&(e.disabled=!0),n.checked!==void 0&&(e.checked=!!n.checked),n.val!==void 0&&(e.value=n.val),n.hidden&&(e.style.display="none")};we(oe,yt);oe.prototype._listenDrag=function(n,e){var t=function(i){this.moving=!0;var r=function(a){a.type==="pointerup"&&(document.removeEventListener("pointermove",r),document.removeEventListener("pointerup",r),document.removeEventListener("pointercancel",r),setTimeout(function(){this.moving=!1}.bind(this))),a.target===n&&e(a),a.stopPropagation(),a.preventDefault()}.bind(this);document.addEventListener("pointermove",r,!1),document.addEventListener("pointerup",r,!1),document.addEventListener("pointercancel",r,!1),i.stopPropagation(),i.preventDefault()}.bind(this);n.addEventListener("mousedown",t,!1),n.addEventListener("touchstart",t,!1)};oe.prototype.setValue=function(n){n!==void 0&&(this.input.value=n),this.input.dispatchEvent(new Event("change"))};oe.prototype.getValue=function(){return this.input.value};oe.prototype.getInputElement=function(){return this.input};var se=function(n){n=n||{},oe.call(this,n);var e=this.element=document.createElement("LABEL");n.html instanceof Element?e.appendChild(n.html):n.html!==void 0&&(e.innerHTML=n.html),e.className=("ol-ext-check ol-ext-checkbox"+(n.className||"")).trim(),this.input.parentNode&&this.input.parentNode.insertBefore(e,this.input),e.appendChild(this.input),e.appendChild(document.createElement("SPAN")),n.after&&e.appendChild(document.createTextNode(n.after)),this.input.addEventListener("change",function(){this.dispatchEvent({type:"check",checked:this.input.checked,value:this.input.value})}.bind(this))};we(se,oe);se.prototype.isChecked=function(){return this.input.checked};var Va=function(n){n=n||{},se.call(this,n),this.element.className=("ol-ext-toggle-switch "+(n.className||"")).trim()};we(Va,se);var Wa=function(n,e){e=e||{},se.call(this,n,e),this.element.className=("ol-ext-check ol-ext-radio"+(e.className||"")).trim()};we(Wa,se);var A={};A.create=function(n,e){e=e||{};var t;if(n==="TEXT")t=document.createTextNode(e.html||""),e.parent&&e.parent.appendChild(t);else{t=document.createElement(n),/button/i.test(n)&&t.setAttribute("type","button");for(var i in e)switch(i){case"className":{e.className&&e.className.trim&&t.setAttribute("class",e.className.trim());break}case"html":{e.html instanceof Element?t.appendChild(e.html):e.html!==void 0&&(t.innerHTML=e.html);break}case"parent":{e.parent&&e.parent.appendChild(t);break}case"options":{if(/select/i.test(n))for(var r in e.options)A.create("OPTION",{html:r,value:e.options[r],parent:t});break}case"style":{this.setStyle(t,e.style);break}case"change":case"click":{A.addListener(t,i,e[i]);break}case"on":{for(var a in e.on)A.addListener(t,a,e.on[a]);break}case"checked":{t.checked=!!e.checked;break}default:{t.setAttribute(i,e[i]);break}}}return t};A.createSwitch=function(n){var e=A.create("INPUT",{type:"checkbox",on:n.on,click:n.click,change:n.change,parent:n.parent}),t=Object.assign({input:e},n||{});return new Va(t),e};A.createCheck=function(n){var e=A.create("INPUT",{name:n.name,type:n.type==="radio"?"radio":"checkbox",on:n.on,parent:n.parent});console.log(e);var t=Object.assign({input:e},n||{});return n.type==="radio"?new Wa(t):new se(t),e};A.setHTML=function(n,e){e instanceof Element?n.appendChild(e):e!==void 0&&(n.innerHTML=e)};A.appendText=function(n,e){n.appendChild(document.createTextNode(e||""))};A.addListener=function(n,e,t,i){typeof e=="string"&&(e=e.split(" ")),e.forEach(function(r){n.addEventListener(r,t,i)})};A.removeListener=function(n,e,t){typeof e=="string"&&(e=e.split(" ")),e.forEach(function(i){n.removeEventListener(i,t)})};A.show=function(n){n.style.display=""};A.hide=function(n){n.style.display="none"};A.hidden=function(n){return A.getStyle(n,"display")==="none"};A.toggle=function(n){n.style.display=n.style.display==="none"?"":"none"};A.setStyle=function(n,e){for(var t in e)switch(t){case"top":case"left":case"bottom":case"right":case"minWidth":case"maxWidth":case"width":case"height":{typeof e[t]=="number"?n.style[t]=e[t]+"px":n.style[t]=e[t];break}default:n.style[t]=e[t]}};A.getStyle=function(n,e){var t,i=(n.ownerDocument||document).defaultView;if(i&&i.getComputedStyle)e=e.replace(/([A-Z])/g,"-$1").toLowerCase(),t=i.getComputedStyle(n,null).getPropertyValue(e);else if(n.currentStyle&&(e=e.replace(/-(\w)/g,function(r,a){return a.toUpperCase()}),t=n.currentStyle[e],/^\d+(em|pt|%|ex)?$/i.test(t)))return function(r){var a=n.style.left,o=n.runtimeStyle.left;return n.runtimeStyle.left=n.currentStyle.left,n.style.left=r||0,r=n.style.pixelLeft+"px",n.style.left=a,n.runtimeStyle.left=o,r}(t);return/px$/.test(t)?parseInt(t):t};A.outerHeight=function(n){return n.offsetHeight+A.getStyle(n,"marginBottom")};A.outerWidth=function(n){return n.offsetWidth+A.getStyle(n,"marginLeft")};A.offsetRect=function(n){var e=n.getBoundingClientRect();return{top:e.top+(window.pageYOffset||document.documentElement.scrollTop||document.body.scrollTop||0),left:e.left+(window.pageXOffset||document.documentElement.scrollLeft||document.body.scrollLeft||0),height:e.height||e.bottom-e.top,width:e.width||e.right-e.left}};A.positionRect=function(n,e){var t=0,i=0,r=function(a){if(a)return t+=a.offsetLeft,i+=a.offsetTop,r(a.offsetParent);var o={top:n.offsetTop+i,left:n.offsetLeft+t};return e&&(o.top-=window.pageYOffset||document.documentElement.scrollTop||document.body.scrollTop||0,o.left-=window.pageXOffset||document.documentElement.scrollLeft||document.body.scrollLeft||0),o.bottom=o.top+n.offsetHeight,o.right=o.top+n.offsetWidth,o};return r(n.offsetParent)};A.scrollDiv=function(n,e){e=e||{};var t=!1,i=0,r,a=0,o=typeof e.onmove=="function"?e.onmove:function(){},s=e.vertical?"screenY":"screenX",h=e.vertical?"scrollTop":"scrollLeft",l=!1,u,f,c=0,v=function(){g&&(c++,setTimeout(d))},d=function(){if(g){if(c--,c)return;var T=n.clientHeight,O=n.scrollHeight;u=T/O,g.style.height=u*100+"%",g.style.top=n.scrollTop/O*100+"%",m.style.height=T+"px",T>O-.5?m.classList.add("ol-100pc"):m.classList.remove("ol-100pc")}},p=function(T){T.target.classList.contains("ol-noscroll")||(l=!1,t=T[s],a=new Date,n.classList.add("ol-move"),T.preventDefault(),window.addEventListener("pointermove",_),A.addListener(window,["pointerup","pointercancel"],x))},_=function(T){if(l=!0,t!==!1){var O=(f?-1/u:1)*(t-T[s]);n[h]+=O,r=new Date,r-a&&(i=(i+O/(r-a))/2),t=T[s],a=r,O&&o(!0)}},y=function(T){var O=T>0?Math.min(100,T/2):Math.max(-100,T/2);T-=O,n[h]+=O,-1<T&&T<1?(l?setTimeout(function(){n.classList.remove("ol-move")}):n.classList.remove("ol-move"),l=!1,o(!1)):setTimeout(function(){y(T)},40)},m,g;if(e.vertical&&e.minibar){var M=function(T){n.removeEventListener("pointermove",M),n.parentNode.classList.add("ol-miniscroll"),g=A.create("DIV"),m=A.create("DIV",{className:"ol-scroll",html:g}),n.parentNode.insertBefore(m,n),g.addEventListener("pointerdown",function(O){f=!0,p(O)}),e.mousewheel&&(A.addListener(m,["mousewheel","DOMMouseScroll","onmousewheel"],function(O){P(O)}),A.addListener(g,["mousewheel","DOMMouseScroll","onmousewheel"],function(O){P(O)})),n.parentNode.addEventListener("pointerenter",v),window.addEventListener("resize",v),T!==!1&&v()};n.parentNode?M(!1):n.addEventListener("pointermove",M),n.addEventListener("scroll",function(){v()})}n.style["touch-action"]="none",n.style.overflow="hidden",n.classList.add("ol-scrolldiv"),A.addListener(n,["pointerdown"],function(T){f=!1,p(T)}),n.addEventListener("click",function(T){n.classList.contains("ol-move")&&(T.preventDefault(),T.stopPropagation())},!0);var x=function(T){a=new Date-a,a>100||f?i=0:a>0&&(i=((i||0)+(t-T[s])/a)/2),y(e.animate===!1?0:i*200),t=!1,i=0,a=0,n.classList.contains("ol-move")?n.classList.remove("ol-hasClick"):(n.classList.add("ol-hasClick"),setTimeout(function(){n.classList.remove("ol-hasClick")},500)),f=!1,window.removeEventListener("pointermove",_),A.removeListener(window,["pointerup","pointercancel"],x)},P=function(T){var O=Math.max(-1,Math.min(1,T.wheelDelta||-T.detail));return n.classList.add("ol-move"),n[h]-=O*30,n.classList.remove("ol-move"),!1};return e.mousewheel&&A.addListener(n,["mousewheel","DOMMouseScroll","onmousewheel"],P),{refresh:v}};A.dispatchEvent=function(n,e){var t;try{t=new CustomEvent(n)}catch(i){t=document.createEvent("CustomEvent"),t.initCustomEvent(n,!0,!0,{})}e.dispatchEvent(t)};var Je=function(n){n=n||{};var e=document.createElement("div");e.className=(n.className||"")+" ol-button ol-unselectable ol-control";var t=this,i=this.button_=document.createElement(/ol-text-button/.test(n.className)?"div":"button");i.type="button",n.title&&(i.title=n.title),n.name&&(i.name=n.name),n.html instanceof Element?i.appendChild(n.html):i.innerHTML=n.html||"";var r=function(a){a&&a.preventDefault&&(a.preventDefault(),a.stopPropagation()),n.handleClick&&n.handleClick.call(t,a)};i.addEventListener("click",r),i.addEventListener("touchstart",r),e.appendChild(i),!n.title&&i.firstElementChild&&(i.title=i.firstElementChild.title),Re.call(this,{element:e,target:n.target}),n.title&&this.set("title",n.title),n.title&&this.set("title",n.title),n.name&&this.set("name",n.name)};we(Je,Re);Je.prototype.setVisible=function(n){n?A.show(this.element):A.hide(this.element)};Je.prototype.setTitle=function(n){this.button_.setAttribute("title",n)};Je.prototype.setHtml=function(n){A.setHTML(this.button_,n)};Je.prototype.getButtonElement=function(){return this.button_};function $p(n){var e=Object.keys(n.defs),t=e.length,i,r;for(i=0;i<t;++i){var a=e[i];if(!Q(a)){var o=n.defs(a),s=o.units;!s&&o.projName==="longlat"&&(s=Ft.DEGREES),zr(new pi({code:a,axisOrientation:o.axis,metersPerUnit:o.to_meter,units:s}))}}for(i=0;i<t;++i){var h=e[i],l=Q(h);for(r=0;r<t;++r){var u=e[r],f=Q(u);if(!Gr(h,u))if(n.defs[h]===n.defs[u])Ei([l,f]);else{var c=n(h,u);Zs(l,f,Xr(l,f,c.forward),Xr(f,l,c.inverse))}}}}function ac(n){n("EPSG:4326","+title=WGS 84 (long/lat) +proj=longlat +ellps=WGS84 +datum=WGS84 +units=degrees"),n("EPSG:4269","+title=NAD83 (long/lat) +proj=longlat +a=6378137.0 +b=6356752.31414036 +ellps=GRS80 +datum=NAD83 +units=degrees"),n("EPSG:3857","+title=WGS 84 / Pseudo-Mercator +proj=merc +a=6378137 +b=6378137 +lat_ts=0.0 +lon_0=0.0 +x_0=0.0 +y_0=0 +k=1.0 +units=m +nadgrids=@null +no_defs"),n.WGS84=n["EPSG:4326"],n["EPSG:3785"]=n["EPSG:3857"],n.GOOGLE=n["EPSG:3857"],n["EPSG:900913"]=n["EPSG:3857"],n["EPSG:102113"]=n["EPSG:3857"]}var he=1,le=2,qn=3,oc=4,Xi=5,Ha=6378137,sc=6356752314e-3,Ya=.0066943799901413165,tn=484813681109536e-20,E=Math.PI/2,hc=.16666666666666666,lc=.04722222222222222,uc=.022156084656084655,C=1e-10,et=.017453292519943295,Lt=57.29577951308232,F=Math.PI/4,en=Math.PI*2,V=3.14159265359,ut={};ut.greenwich=0;ut.lisbon=-9.131906111111;ut.paris=2.337229166667;ut.bogota=-74.080916666667;ut.madrid=-3.687938888889;ut.rome=12.452333333333;ut.bern=7.439583333333;ut.jakarta=106.807719444444;ut.ferro=-17.666666666667;ut.brussels=4.367975;ut.stockholm=18.058277777778;ut.athens=23.7163375;ut.oslo=10.722916666667;var fc={ft:{to_meter:.3048},"us-ft":{to_meter:1200/3937}},Qa=/[\s_\-\/\(\)]/g;function Vt(n,e){if(n[e])return n[e];for(var t=Object.keys(n),i=e.toLowerCase().replace(Qa,""),r=-1,a,o;++r<t.length;)if(a=t[r],o=a.toLowerCase().replace(Qa,""),o===i)return n[a]}function Zi(n){var e={},t=n.split("+").map(function(s){return s.trim()}).filter(function(s){return s}).reduce(function(s,h){var l=h.split("=");return l.push(!0),s[l[0].toLowerCase()]=l[1],s},{}),i,r,a,o={proj:"projName",datum:"datumCode",rf:function(s){e.rf=parseFloat(s)},lat_0:function(s){e.lat0=s*et},lat_1:function(s){e.lat1=s*et},lat_2:function(s){e.lat2=s*et},lat_ts:function(s){e.lat_ts=s*et},lon_0:function(s){e.long0=s*et},lon_1:function(s){e.long1=s*et},lon_2:function(s){e.long2=s*et},alpha:function(s){e.alpha=parseFloat(s)*et},gamma:function(s){e.rectified_grid_angle=parseFloat(s)},lonc:function(s){e.longc=s*et},x_0:function(s){e.x0=parseFloat(s)},y_0:function(s){e.y0=parseFloat(s)},k_0:function(s){e.k0=parseFloat(s)},k:function(s){e.k0=parseFloat(s)},a:function(s){e.a=parseFloat(s)},b:function(s){e.b=parseFloat(s)},r_a:function(){e.R_A=!0},zone:function(s){e.zone=parseInt(s,10)},south:function(){e.utmSouth=!0},towgs84:function(s){e.datum_params=s.split(",").map(function(h){return parseFloat(h)})},to_meter:function(s){e.to_meter=parseFloat(s)},units:function(s){e.units=s;var h=Vt(fc,s);h&&(e.to_meter=h.to_meter)},from_greenwich:function(s){e.from_greenwich=s*et},pm:function(s){var h=Vt(ut,s);e.from_greenwich=(h||parseFloat(s))*et},nadgrids:function(s){s==="@null"?e.datumCode="none":e.nadgrids=s},axis:function(s){var h="ewnsud";s.length===3&&h.indexOf(s.substr(0,1))!==-1&&h.indexOf(s.substr(1,1))!==-1&&h.indexOf(s.substr(2,1))!==-1&&(e.axis=s)},approx:function(){e.approx=!0}};for(i in t)r=t[i],i in o?(a=o[i],typeof a=="function"?a(r):e[a]=r):e[i]=r;return typeof e.datumCode=="string"&&e.datumCode!=="WGS84"&&(e.datumCode=e.datumCode.toLowerCase()),e}var nn=1,Ja=2,to=3,Xn=4,eo=5,Bi=-1,cc=/\s/,vc=/[A-Za-z]/,dc=/[A-Za-z84]/,Zn=/[,\]]/,no=/[\d\.E\-\+]/;function $t(n){if(typeof n!="string")throw new Error("not a string");this.text=n.trim(),this.level=0,this.place=0,this.root=null,this.stack=[],this.currentObject=null,this.state=nn}$t.prototype.readCharicter=function(){var n=this.text[this.place++];if(this.state!==Xn)for(;cc.test(n);){if(this.place>=this.text.length)return;n=this.text[this.place++]}switch(this.state){case nn:return this.neutral(n);case Ja:return this.keyword(n);case Xn:return this.quoted(n);case eo:return this.afterquote(n);case to:return this.number(n);case Bi:return}};$t.prototype.afterquote=function(n){if(n==='"'){this.word+='"',this.state=Xn;return}if(Zn.test(n)){this.word=this.word.trim(),this.afterItem(n);return}throw new Error(`havn't handled "`+n+'" in afterquote yet, index '+this.place)};$t.prototype.afterItem=function(n){if(n===","){this.word!==null&&this.currentObject.push(this.word),this.word=null,this.state=nn;return}if(n==="]"){this.level--,this.word!==null&&(this.currentObject.push(this.word),this.word=null),this.state=nn,this.currentObject=this.stack.pop(),this.currentObject||(this.state=Bi);return}};$t.prototype.number=function(n){if(no.test(n)){this.word+=n;return}if(Zn.test(n)){this.word=parseFloat(this.word),this.afterItem(n);return}throw new Error(`havn't handled "`+n+'" in number yet, index '+this.place)};$t.prototype.quoted=function(n){if(n==='"'){this.state=eo;return}this.word+=n};$t.prototype.keyword=function(n){if(dc.test(n)){this.word+=n;return}if(n==="["){var e=[];e.push(this.word),this.level++,this.root===null?this.root=e:this.currentObject.push(e),this.stack.push(this.currentObject),this.currentObject=e,this.state=nn;return}if(Zn.test(n)){this.afterItem(n);return}throw new Error(`havn't handled "`+n+'" in keyword yet, index '+this.place)};$t.prototype.neutral=function(n){if(vc.test(n)){this.word=n,this.state=Ja;return}if(n==='"'){this.word="",this.state=Xn;return}if(no.test(n)){this.word=n,this.state=to;return}if(Zn.test(n)){this.afterItem(n);return}throw new Error(`havn't handled "`+n+'" in neutral yet, index '+this.place)};$t.prototype.output=function(){for(;this.place<this.text.length;)this.readCharicter();if(this.state===Bi)return this.root;throw new Error('unable to parse string "'+this.text+'". State is '+this.state)};function pc(n){var e=new $t(n);return e.output()}function io(n,e,t){Array.isArray(e)&&(t.unshift(e),e=null);var i=e?{}:n,r=t.reduce(function(a,o){return Ie(o,a),a},i);e&&(n[e]=r)}function Ie(n,e){if(!Array.isArray(n)){e[n]=!0;return}var t=n.shift();if(t==="PARAMETER"&&(t=n.shift()),n.length===1){if(Array.isArray(n[0])){e[t]={},Ie(n[0],e[t]);return}e[t]=n[0];return}if(!n.length){e[t]=!0;return}if(t==="TOWGS84"){e[t]=n;return}if(t==="AXIS"){t in e||(e[t]=[]),e[t].push(n);return}Array.isArray(t)||(e[t]={});var i;switch(t){case"UNIT":case"PRIMEM":case"VERT_DATUM":e[t]={name:n[0].toLowerCase(),convert:n[1]},n.length===3&&Ie(n[2],e[t]);return;case"SPHEROID":case"ELLIPSOID":e[t]={name:n[0],a:n[1],rf:n[2]},n.length===4&&Ie(n[3],e[t]);return;case"PROJECTEDCRS":case"PROJCRS":case"GEOGCS":case"GEOCCS":case"PROJCS":case"LOCAL_CS":case"GEODCRS":case"GEODETICCRS":case"GEODETICDATUM":case"EDATUM":case"ENGINEERINGDATUM":case"VERT_CS":case"VERTCRS":case"VERTICALCRS":case"COMPD_CS":case"COMPOUNDCRS":case"ENGINEERINGCRS":case"ENGCRS":case"FITTED_CS":case"LOCAL_DATUM":case"DATUM":n[0]=["name",n[0]],io(e,t,n);return;default:for(i=-1;++i<n.length;)if(!Array.isArray(n[i]))return Ie(n,e[t]);return io(e,t,n)}}var _c=.017453292519943295;function yc(n,e){var t=e[0],i=e[1];!(t in n)&&i in n&&(n[t]=n[i],e.length===3&&(n[t]=e[2](n[t])))}function zt(n){return n*_c}function gc(n){if(n.type==="GEOGCS"?n.projName="longlat":n.type==="LOCAL_CS"?(n.projName="identity",n.local=!0):typeof n.PROJECTION=="object"?n.projName=Object.keys(n.PROJECTION)[0]:n.projName=n.PROJECTION,n.AXIS){for(var e="",t=0,i=n.AXIS.length;t<i;++t){var r=[n.AXIS[t][0].toLowerCase(),n.AXIS[t][1].toLowerCase()];r[0].indexOf("north")!==-1||(r[0]==="y"||r[0]==="lat")&&r[1]==="north"?e+="n":r[0].indexOf("south")!==-1||(r[0]==="y"||r[0]==="lat")&&r[1]==="south"?e+="s":r[0].indexOf("east")!==-1||(r[0]==="x"||r[0]==="lon")&&r[1]==="east"?e+="e":(r[0].indexOf("west")!==-1||(r[0]==="x"||r[0]==="lon")&&r[1]==="west")&&(e+="w")}e.length===2&&(e+="u"),e.length===3&&(n.axis=e)}n.UNIT&&(n.units=n.UNIT.name.toLowerCase(),n.units==="metre"&&(n.units="meter"),n.UNIT.convert&&(n.type==="GEOGCS"?n.DATUM&&n.DATUM.SPHEROID&&(n.to_meter=n.UNIT.convert*n.DATUM.SPHEROID.a):n.to_meter=n.UNIT.convert));var a=n.GEOGCS;n.type==="GEOGCS"&&(a=n),a&&(a.DATUM?n.datumCode=a.DATUM.name.toLowerCase():n.datumCode=a.name.toLowerCase(),n.datumCode.slice(0,2)==="d_"&&(n.datumCode=n.datumCode.slice(2)),(n.datumCode==="new_zealand_geodetic_datum_1949"||n.datumCode==="new_zealand_1949")&&(n.datumCode="nzgd49"),(n.datumCode==="wgs_1984"||n.datumCode==="world_geodetic_system_1984")&&(n.PROJECTION==="Mercator_Auxiliary_Sphere"&&(n.sphere=!0),n.datumCode="wgs84"),n.datumCode.slice(-6)==="_ferro"&&(n.datumCode=n.datumCode.slice(0,-6)),n.datumCode.slice(-8)==="_jakarta"&&(n.datumCode=n.datumCode.slice(0,-8)),~n.datumCode.indexOf("belge")&&(n.datumCode="rnb72"),a.DATUM&&a.DATUM.SPHEROID&&(n.ellps=a.DATUM.SPHEROID.name.replace("_19","").replace(/[Cc]larke\_18/,"clrk"),n.ellps.toLowerCase().slice(0,13)==="international"&&(n.ellps="intl"),n.a=a.DATUM.SPHEROID.a,n.rf=parseFloat(a.DATUM.SPHEROID.rf,10)),a.DATUM&&a.DATUM.TOWGS84&&(n.datum_params=a.DATUM.TOWGS84),~n.datumCode.indexOf("osgb_1936")&&(n.datumCode="osgb36"),~n.datumCode.indexOf("osni_1952")&&(n.datumCode="osni52"),(~n.datumCode.indexOf("tm65")||~n.datumCode.indexOf("geodetic_datum_of_1965"))&&(n.datumCode="ire65"),n.datumCode==="ch1903+"&&(n.datumCode="ch1903"),~n.datumCode.indexOf("israel")&&(n.datumCode="isr93")),n.b&&!isFinite(n.b)&&(n.b=n.a);function o(l){var u=n.to_meter||1;return l*u}var s=function(l){return yc(n,l)},h=[["standard_parallel_1","Standard_Parallel_1"],["standard_parallel_1","Latitude of 1st standard parallel"],["standard_parallel_2","Standard_Parallel_2"],["standard_parallel_2","Latitude of 2nd standard parallel"],["false_easting","False_Easting"],["false_easting","False easting"],["false-easting","Easting at false origin"],["false_northing","False_Northing"],["false_northing","False northing"],["false_northing","Northing at false origin"],["central_meridian","Central_Meridian"],["central_meridian","Longitude of natural origin"],["central_meridian","Longitude of false origin"],["latitude_of_origin","Latitude_Of_Origin"],["latitude_of_origin","Central_Parallel"],["latitude_of_origin","Latitude of natural origin"],["latitude_of_origin","Latitude of false origin"],["scale_factor","Scale_Factor"],["k0","scale_factor"],["latitude_of_center","Latitude_Of_Center"],["latitude_of_center","Latitude_of_center"],["lat0","latitude_of_center",zt],["longitude_of_center","Longitude_Of_Center"],["longitude_of_center","Longitude_of_center"],["longc","longitude_of_center",zt],["x0","false_easting",o],["y0","false_northing",o],["long0","central_meridian",zt],["lat0","latitude_of_origin",zt],["lat0","standard_parallel_1",zt],["lat1","standard_parallel_1",zt],["lat2","standard_parallel_2",zt],["azimuth","Azimuth"],["alpha","azimuth",zt],["srsCode","name"]];h.forEach(s),!n.long0&&n.longc&&(n.projName==="Albers_Conic_Equal_Area"||n.projName==="Lambert_Azimuthal_Equal_Area")&&(n.long0=n.longc),!n.lat_ts&&n.lat1&&(n.projName==="Stereographic_South_Pole"||n.projName==="Polar Stereographic (variant B)")&&(n.lat0=zt(n.lat1>0?90:-90),n.lat_ts=n.lat1)}function ro(n){var e=pc(n),t=e.shift(),i=e.shift();e.unshift(["name",i]),e.unshift(["type",t]);var r={};return Ie(e,r),gc(r),r}function st(n){var e=this;if(arguments.length===2){var t=arguments[1];typeof t=="string"?t.charAt(0)==="+"?st[n]=Zi(arguments[1]):st[n]=ro(arguments[1]):st[n]=t}else if(arguments.length===1){if(Array.isArray(n))return n.map(function(i){Array.isArray(i)?st.apply(e,i):st(i)});if(typeof n=="string"){if(n in st)return st[n]}else"EPSG"in n?st["EPSG:"+n.EPSG]=n:"ESRI"in n?st["ESRI:"+n.ESRI]=n:"IAU2000"in n?st["IAU2000:"+n.IAU2000]=n:console.log(n);return}}ac(st);function mc(n){return typeof n=="string"}function Mc(n){return n in st}var Ec=["PROJECTEDCRS","PROJCRS","GEOGCS","GEOCCS","PROJCS","LOCAL_CS","GEODCRS","GEODETICCRS","GEODETICDATUM","ENGCRS","ENGINEERINGCRS"];function xc(n){return Ec.some(function(e){return n.indexOf(e)>-1})}var Tc=["3857","900913","3785","102113"];function Cc(n){var e=Vt(n,"authority");if(!!e){var t=Vt(e,"epsg");return t&&Tc.indexOf(t)>-1}}function Oc(n){var e=Vt(n,"extension");if(!!e)return Vt(e,"proj4")}function Rc(n){return n[0]==="+"}function Pc(n){if(mc(n)){if(Mc(n))return st[n];if(xc(n)){var e=ro(n);if(Cc(e))return st["EPSG:3857"];var t=Oc(e);return t?Zi(t):e}if(Rc(n))return Zi(n)}else return n}function ao(n,e){n=n||{};var t,i;if(!e)return n;for(i in e)t=e[i],t!==void 0&&(n[i]=t);return n}function Nt(n,e,t){var i=n*e;return t/Math.sqrt(1-i*i)}function rn(n){return n<0?-1:1}function R(n){return Math.abs(n)<=V?n:n-rn(n)*en}function Pt(n,e,t){var i=n*t,r=.5*n;return i=Math.pow((1-i)/(1+i),r),Math.tan(.5*(E-e))/i}function an(n,e){for(var t=.5*n,i,r,a=E-2*Math.atan(e),o=0;o<=15;o++)if(i=n*Math.sin(a),r=E-2*Math.atan(e*Math.pow((1-i)/(1+i),t))-a,a+=r,Math.abs(r)<=1e-10)return a;return-9999}function wc(){var n=this.b/this.a;this.es=1-n*n,"x0"in this||(this.x0=0),"y0"in this||(this.y0=0),this.e=Math.sqrt(this.es),this.lat_ts?this.sphere?this.k0=Math.cos(this.lat_ts):this.k0=Nt(this.e,Math.sin(this.lat_ts),Math.cos(this.lat_ts)):this.k0||(this.k?this.k0=this.k:this.k0=1)}function Ic(n){var e=n.x,t=n.y;if(t*Lt>90&&t*Lt<-90&&e*Lt>180&&e*Lt<-180)return null;var i,r;if(Math.abs(Math.abs(t)-E)<=C)return null;if(this.sphere)i=this.x0+this.a*this.k0*R(e-this.long0),r=this.y0+this.a*this.k0*Math.log(Math.tan(F+.5*t));else{var a=Math.sin(t),o=Pt(this.e,t,a);i=this.x0+this.a*this.k0*R(e-this.long0),r=this.y0-this.a*this.k0*Math.log(o)}return n.x=i,n.y=r,n}function Sc(n){var e=n.x-this.x0,t=n.y-this.y0,i,r;if(this.sphere)r=E-2*Math.atan(Math.exp(-t/(this.a*this.k0)));else{var a=Math.exp(-t/(this.a*this.k0));if(r=an(this.e,a),r===-9999)return null}return i=R(this.long0+e/(this.a*this.k0)),n.x=i,n.y=r,n}var Ac=["Mercator","Popular Visualisation Pseudo Mercator","Mercator_1SP","Mercator_Auxiliary_Sphere","merc"],Lc={init:wc,forward:Ic,inverse:Sc,names:Ac};function Nc(){}function oo(n){return n}var bc=["longlat","identity"],Dc={init:Nc,forward:oo,inverse:oo,names:bc},Fc=[Lc,Dc],Bn={},Vn=[];function so(n,e){var t=Vn.length;return n.names?(Vn[t]=n,n.names.forEach(function(i){Bn[i.toLowerCase()]=t}),this):(console.log(e),!0)}function Gc(n){if(!n)return!1;var e=n.toLowerCase();if(typeof Bn[e]!="undefined"&&Vn[Bn[e]])return Vn[Bn[e]]}function jc(){Fc.forEach(so)}var $c={start:jc,add:so,get:Gc},I={};I.MERIT={a:6378137,rf:298.257,ellipseName:"MERIT 1983"};I.SGS85={a:6378136,rf:298.257,ellipseName:"Soviet Geodetic System 85"};I.GRS80={a:6378137,rf:298.257222101,ellipseName:"GRS 1980(IUGG, 1980)"};I.IAU76={a:6378140,rf:298.257,ellipseName:"IAU 1976"};I.airy={a:6377563396e-3,b:635625691e-2,ellipseName:"Airy 1830"};I.APL4={a:6378137,rf:298.25,ellipseName:"Appl. Physics. 1965"};I.NWL9D={a:6378145,rf:298.25,ellipseName:"Naval Weapons Lab., 1965"};I.mod_airy={a:6377340189e-3,b:6356034446e-3,ellipseName:"Modified Airy"};I.andrae={a:637710443e-2,rf:300,ellipseName:"Andrae 1876 (Den., Iclnd.)"};I.aust_SA={a:6378160,rf:298.25,ellipseName:"Australian Natl & S. Amer. 1969"};I.GRS67={a:6378160,rf:298.247167427,ellipseName:"GRS 67(IUGG 1967)"};I.bessel={a:6377397155e-3,rf:299.1528128,ellipseName:"Bessel 1841"};I.bess_nam={a:6377483865e-3,rf:299.1528128,ellipseName:"Bessel 1841 (Namibia)"};I.clrk66={a:63782064e-1,b:63565838e-1,ellipseName:"Clarke 1866"};I.clrk80={a:6378249145e-3,rf:293.4663,ellipseName:"Clarke 1880 mod."};I.clrk58={a:6378293645208759e-9,rf:294.2606763692654,ellipseName:"Clarke 1858"};I.CPM={a:63757387e-1,rf:334.29,ellipseName:"Comm. des Poids et Mesures 1799"};I.delmbr={a:6376428,rf:311.5,ellipseName:"Delambre 1810 (Belgium)"};I.engelis={a:637813605e-2,rf:298.2566,ellipseName:"Engelis 1985"};I.evrst30={a:6377276345e-3,rf:300.8017,ellipseName:"Everest 1830"};I.evrst48={a:6377304063e-3,rf:300.8017,ellipseName:"Everest 1948"};I.evrst56={a:6377301243e-3,rf:300.8017,ellipseName:"Everest 1956"};I.evrst69={a:6377295664e-3,rf:300.8017,ellipseName:"Everest 1969"};I.evrstSS={a:6377298556e-3,rf:300.8017,ellipseName:"Everest (Sabah & Sarawak)"};I.fschr60={a:6378166,rf:298.3,ellipseName:"Fischer (Mercury Datum) 1960"};I.fschr60m={a:6378155,rf:298.3,ellipseName:"Fischer 1960"};I.fschr68={a:6378150,rf:298.3,ellipseName:"Fischer 1968"};I.helmert={a:6378200,rf:298.3,ellipseName:"Helmert 1906"};I.hough={a:6378270,rf:297,ellipseName:"Hough"};I.intl={a:6378388,rf:297,ellipseName:"International 1909 (Hayford)"};I.kaula={a:6378163,rf:298.24,ellipseName:"Kaula 1961"};I.lerch={a:6378139,rf:298.257,ellipseName:"Lerch 1979"};I.mprts={a:6397300,rf:191,ellipseName:"Maupertius 1738"};I.new_intl={a:63781575e-1,b:63567722e-1,ellipseName:"New International 1967"};I.plessis={a:6376523,rf:6355863,ellipseName:"Plessis 1817 (France)"};I.krass={a:6378245,rf:298.3,ellipseName:"Krassovsky, 1942"};I.SEasia={a:6378155,b:63567733205e-4,ellipseName:"Southeast Asia"};I.walbeck={a:6376896,b:63558348467e-4,ellipseName:"Walbeck"};I.WGS60={a:6378165,rf:298.3,ellipseName:"WGS 60"};I.WGS66={a:6378145,rf:298.25,ellipseName:"WGS 66"};I.WGS7={a:6378135,rf:298.26,ellipseName:"WGS 72"};var zc=I.WGS84={a:6378137,rf:298.257223563,ellipseName:"WGS 84"};I.sphere={a:6370997,b:6370997,ellipseName:"Normal Sphere (r=6370997)"};function Uc(n,e,t,i){var r=n*n,a=e*e,o=(r-a)/r,s=0;i?(n*=1-o*(hc+o*(lc+o*uc)),r=n*n,o=0):s=Math.sqrt(o);var h=(r-a)/a;return{es:o,e:s,ep2:h}}function kc(n,e,t,i,r){if(!n){var a=Vt(I,i);a||(a=zc),n=a.a,e=a.b,t=a.rf}return t&&!e&&(e=(1-1/t)*n),(t===0||Math.abs(n-e)<C)&&(r=!0,e=n),{a:n,b:e,rf:t,sphere:r}}var J={};J.wgs84={towgs84:"0,0,0",ellipse:"WGS84",datumName:"WGS84"};J.ch1903={towgs84:"674.374,15.056,405.346",ellipse:"bessel",datumName:"swiss"};J.ggrs87={towgs84:"-199.87,74.79,246.62",ellipse:"GRS80",datumName:"Greek_Geodetic_Reference_System_1987"};J.nad83={towgs84:"0,0,0",ellipse:"GRS80",datumName:"North_American_Datum_1983"};J.nad27={nadgrids:"@conus,@alaska,@ntv2_0.gsb,@ntv1_can.dat",ellipse:"clrk66",datumName:"North_American_Datum_1927"};J.potsdam={towgs84:"598.1,73.7,418.2,0.202,0.045,-2.455,6.7",ellipse:"bessel",datumName:"Potsdam Rauenberg 1950 DHDN"};J.carthage={towgs84:"-263.0,6.0,431.0",ellipse:"clark80",datumName:"Carthage 1934 Tunisia"};J.hermannskogel={towgs84:"577.326,90.129,463.919,5.137,1.474,5.297,2.4232",ellipse:"bessel",datumName:"Hermannskogel"};J.osni52={towgs84:"482.530,-130.596,564.557,-1.042,-0.214,-0.631,8.15",ellipse:"airy",datumName:"Irish National"};J.ire65={towgs84:"482.530,-130.596,564.557,-1.042,-0.214,-0.631,8.15",ellipse:"mod_airy",datumName:"Ireland 1965"};J.rassadiran={towgs84:"-133.63,-157.5,-158.62",ellipse:"intl",datumName:"Rassadiran"};J.nzgd49={towgs84:"59.47,-5.04,187.44,0.47,-0.1,1.024,-4.5993",ellipse:"intl",datumName:"New Zealand Geodetic Datum 1949"};J.osgb36={towgs84:"446.448,-125.157,542.060,0.1502,0.2470,0.8421,-20.4894",ellipse:"airy",datumName:"Airy 1830"};J.s_jtsk={towgs84:"589,76,480",ellipse:"bessel",datumName:"S-JTSK (Ferro)"};J.beduaram={towgs84:"-106,-87,188",ellipse:"clrk80",datumName:"Beduaram"};J.gunung_segara={towgs84:"-403,684,41",ellipse:"bessel",datumName:"Gunung Segara Jakarta"};J.rnb72={towgs84:"106.869,-52.2978,103.724,-0.33657,0.456955,-1.84218,1",ellipse:"intl",datumName:"Reseau National Belge 1972"};function Kc(n,e,t,i,r,a,o){var s={};return n===void 0||n==="none"?s.datum_type=Xi:s.datum_type=oc,e&&(s.datum_params=e.map(parseFloat),(s.datum_params[0]!==0||s.datum_params[1]!==0||s.datum_params[2]!==0)&&(s.datum_type=he),s.datum_params.length>3&&(s.datum_params[3]!==0||s.datum_params[4]!==0||s.datum_params[5]!==0||s.datum_params[6]!==0)&&(s.datum_type=le,s.datum_params[3]*=tn,s.datum_params[4]*=tn,s.datum_params[5]*=tn,s.datum_params[6]=s.datum_params[6]/1e6+1)),o&&(s.datum_type=qn,s.grids=o),s.a=t,s.b=i,s.es=r,s.ep2=a,s}var ho={};function qc(n,e){var t=new DataView(e),i=Bc(t),r=Vc(t,i);r.nSubgrids>1&&console.log("Only single NTv2 subgrids are currently supported, subsequent sub grids are ignored");var a=Wc(t,r,i),o={header:r,subgrids:a};return ho[n]=o,o}function Xc(n){if(n===void 0)return null;var e=n.split(",");return e.map(Zc)}function Zc(n){if(n.length===0)return null;var e=n[0]==="@";return e&&(n=n.slice(1)),n==="null"?{name:"null",mandatory:!e,grid:null,isNull:!0}:{name:n,mandatory:!e,grid:ho[n]||null,isNull:!1}}function Se(n){return n/3600*Math.PI/180}function Bc(n){var e=n.getInt32(8,!1);return e===11?!1:(e=n.getInt32(8,!0),e!==11&&console.warn("Failed to detect nadgrid endian-ness, defaulting to little-endian"),!0)}function Vc(n,e){return{nFields:n.getInt32(8,e),nSubgridFields:n.getInt32(24,e),nSubgrids:n.getInt32(40,e),shiftType:Vi(n,56,56+8).trim(),fromSemiMajorAxis:n.getFloat64(120,e),fromSemiMinorAxis:n.getFloat64(136,e),toSemiMajorAxis:n.getFloat64(152,e),toSemiMinorAxis:n.getFloat64(168,e)}}function Vi(n,e,t){return String.fromCharCode.apply(null,new Uint8Array(n.buffer.slice(e,t)))}function Wc(n,e,t){for(var i=176,r=[],a=0;a<e.nSubgrids;a++){var o=Yc(n,i,t),s=Qc(n,i,o,t),h=Math.round(1+(o.upperLongitude-o.lowerLongitude)/o.longitudeInterval),l=Math.round(1+(o.upperLatitude-o.lowerLatitude)/o.latitudeInterval);r.push({ll:[Se(o.lowerLongitude),Se(o.lowerLatitude)],del:[Se(o.longitudeInterval),Se(o.latitudeInterval)],lim:[h,l],count:o.gridNodeCount,cvs:Hc(s)})}return r}function Hc(n){return n.map(function(e){return[Se(e.longitudeShift),Se(e.latitudeShift)]})}function Yc(n,e,t){return{name:Vi(n,e+8,e+16).trim(),parent:Vi(n,e+24,e+24+8).trim(),lowerLatitude:n.getFloat64(e+72,t),upperLatitude:n.getFloat64(e+88,t),lowerLongitude:n.getFloat64(e+104,t),upperLongitude:n.getFloat64(e+120,t),latitudeInterval:n.getFloat64(e+136,t),longitudeInterval:n.getFloat64(e+152,t),gridNodeCount:n.getInt32(e+168,t)}}function Qc(n,e,t,i){for(var r=e+176,a=16,o=[],s=0;s<t.gridNodeCount;s++){var h={latitudeShift:n.getFloat32(r+s*a,i),longitudeShift:n.getFloat32(r+s*a+4,i),latitudeAccuracy:n.getFloat32(r+s*a+8,i),longitudeAccuracy:n.getFloat32(r+s*a+12,i)};o.push(h)}return o}function bt(n,e){if(!(this instanceof bt))return new bt(n);e=e||function(l){if(l)throw l};var t=Pc(n);if(typeof t!="object"){e(n);return}var i=bt.projections.get(t.projName);if(!i){e(n);return}if(t.datumCode&&t.datumCode!=="none"){var r=Vt(J,t.datumCode);r&&(t.datum_params=t.datum_params||(r.towgs84?r.towgs84.split(","):null),t.ellps=r.ellipse,t.datumName=r.datumName?r.datumName:t.datumCode)}t.k0=t.k0||1,t.axis=t.axis||"enu",t.ellps=t.ellps||"wgs84",t.lat1=t.lat1||t.lat0;var a=kc(t.a,t.b,t.rf,t.ellps,t.sphere),o=Uc(a.a,a.b,a.rf,t.R_A),s=Xc(t.nadgrids),h=t.datum||Kc(t.datumCode,t.datum_params,a.a,a.b,o.es,o.ep2,s);ao(this,t),ao(this,i),this.a=a.a,this.b=a.b,this.rf=a.rf,this.sphere=a.sphere,this.es=o.es,this.e=o.e,this.ep2=o.ep2,this.datum=h,this.init(),e(null,this)}bt.projections=$c;bt.projections.start();function Jc(n,e){return n.datum_type!==e.datum_type||n.a!==e.a||Math.abs(n.es-e.es)>5e-11?!1:n.datum_type===he?n.datum_params[0]===e.datum_params[0]&&n.datum_params[1]===e.datum_params[1]&&n.datum_params[2]===e.datum_params[2]:n.datum_type===le?n.datum_params[0]===e.datum_params[0]&&n.datum_params[1]===e.datum_params[1]&&n.datum_params[2]===e.datum_params[2]&&n.datum_params[3]===e.datum_params[3]&&n.datum_params[4]===e.datum_params[4]&&n.datum_params[5]===e.datum_params[5]&&n.datum_params[6]===e.datum_params[6]:!0}function lo(n,e,t){var i=n.x,r=n.y,a=n.z?n.z:0,o,s,h,l;if(r<-E&&r>-1.001*E)r=-E;else if(r>E&&r<1.001*E)r=E;else{if(r<-E)return{x:-1/0,y:-1/0,z:n.z};if(r>E)return{x:1/0,y:1/0,z:n.z}}return i>Math.PI&&(i-=2*Math.PI),s=Math.sin(r),l=Math.cos(r),h=s*s,o=t/Math.sqrt(1-e*h),{x:(o+a)*l*Math.cos(i),y:(o+a)*l*Math.sin(i),z:(o*(1-e)+a)*s}}function uo(n,e,t,i){var r=1e-12,a=r*r,o=30,s,h,l,u,f,c,v,d,p,_,y,m,g,M=n.x,x=n.y,P=n.z?n.z:0,T,O,L;if(s=Math.sqrt(M*M+x*x),h=Math.sqrt(M*M+x*x+P*P),s/t<r){if(T=0,h/t<r)return O=E,L=-i,{x:n.x,y:n.y,z:n.z}}else T=Math.atan2(x,M);l=P/h,u=s/h,f=1/Math.sqrt(1-e*(2-e)*u*u),d=u*(1-e)*f,p=l*f,g=0;do g++,v=t/Math.sqrt(1-e*p*p),L=s*d+P*p-v*(1-e*p*p),c=e*v/(v+L),f=1/Math.sqrt(1-c*(2-c)*u*u),_=u*(1-c)*f,y=l*f,m=y*d-_*p,d=_,p=y;while(m*m>a&&g<o);return O=Math.atan(y/Math.abs(_)),{x:T,y:O,z:L}}function tv(n,e,t){if(e===he)return{x:n.x+t[0],y:n.y+t[1],z:n.z+t[2]};if(e===le){var i=t[0],r=t[1],a=t[2],o=t[3],s=t[4],h=t[5],l=t[6];return{x:l*(n.x-h*n.y+s*n.z)+i,y:l*(h*n.x+n.y-o*n.z)+r,z:l*(-s*n.x+o*n.y+n.z)+a}}}function ev(n,e,t){if(e===he)return{x:n.x-t[0],y:n.y-t[1],z:n.z-t[2]};if(e===le){var i=t[0],r=t[1],a=t[2],o=t[3],s=t[4],h=t[5],l=t[6],u=(n.x-i)/l,f=(n.y-r)/l,c=(n.z-a)/l;return{x:u+h*f-s*c,y:-h*u+f+o*c,z:s*u-o*f+c}}}function Wn(n){return n===he||n===le}function nv(n,e,t){if(Jc(n,e)||n.datum_type===Xi||e.datum_type===Xi)return t;var i=n.a,r=n.es;if(n.datum_type===qn){var a=fo(n,!1,t);if(a!==0)return;i=Ha,r=Ya}var o=e.a,s=e.b,h=e.es;if(e.datum_type===qn&&(o=Ha,s=sc,h=Ya),r===h&&i===o&&!Wn(n.datum_type)&&!Wn(e.datum_type))return t;if(t=lo(t,r,i),Wn(n.datum_type)&&(t=tv(t,n.datum_type,n.datum_params)),Wn(e.datum_type)&&(t=ev(t,e.datum_type,e.datum_params)),t=uo(t,h,o,s),e.datum_type===qn){var l=fo(e,!0,t);if(l!==0)return}return t}function fo(n,e,t){if(n.grids===null||n.grids.length===0)return console.log("Grid shift grids not found"),-1;for(var i={x:-t.x,y:t.y},r={x:Number.NaN,y:Number.NaN},a=[],o=0;o<n.grids.length;o++){var s=n.grids[o];if(a.push(s.name),s.isNull){r=i;break}if(s.grid===null){if(s.mandatory)return console.log("Unable to find mandatory grid '"+s.name+"'"),-1;continue}var h=s.grid.subgrids[0],l=(Math.abs(h.del[1])+Math.abs(h.del[0]))/1e4,u=h.ll[0]-l,f=h.ll[1]-l,c=h.ll[0]+(h.lim[0]-1)*h.del[0]+l,v=h.ll[1]+(h.lim[1]-1)*h.del[1]+l;if(!(f>i.y||u>i.x||v<i.y||c<i.x)&&(r=iv(i,e,h),!isNaN(r.x)))break}return isNaN(r.x)?(console.log("Failed to find a grid shift table for location '"+-i.x*Lt+" "+i.y*Lt+" tried: '"+a+"'"),-1):(t.x=-r.x,t.y=r.y,0)}function iv(n,e,t){var i={x:Number.NaN,y:Number.NaN};if(isNaN(n.x))return i;var r={x:n.x,y:n.y};r.x-=t.ll[0],r.y-=t.ll[1],r.x=R(r.x-Math.PI)+Math.PI;var a=co(r,t);if(e){if(isNaN(a.x))return i;a.x=r.x-a.x,a.y=r.y-a.y;var o=9,s=1e-12,h,l;do{if(l=co(a,t),isNaN(l.x)){console.log("Inverse grid shift iteration failed, presumably at grid edge.  Using first approximation.");break}h={x:r.x-(l.x+a.x),y:r.y-(l.y+a.y)},a.x+=h.x,a.y+=h.y}while(o--&&Math.abs(h.x)>s&&Math.abs(h.y)>s);if(o<0)return console.log("Inverse grid shift iterator failed to converge."),i;i.x=R(a.x+t.ll[0]),i.y=a.y+t.ll[1]}else isNaN(a.x)||(i.x=n.x+a.x,i.y=n.y+a.y);return i}function co(n,e){var t={x:n.x/e.del[0],y:n.y/e.del[1]},i={x:Math.floor(t.x),y:Math.floor(t.y)},r={x:t.x-1*i.x,y:t.y-1*i.y},a={x:Number.NaN,y:Number.NaN},o;if(i.x<0||i.x>=e.lim[0]||i.y<0||i.y>=e.lim[1])return a;o=i.y*e.lim[0]+i.x;var s={x:e.cvs[o][0],y:e.cvs[o][1]};o++;var h={x:e.cvs[o][0],y:e.cvs[o][1]};o+=e.lim[0];var l={x:e.cvs[o][0],y:e.cvs[o][1]};o--;var u={x:e.cvs[o][0],y:e.cvs[o][1]},f=r.x*r.y,c=r.x*(1-r.y),v=(1-r.x)*(1-r.y),d=(1-r.x)*r.y;return a.x=v*s.x+c*h.x+d*u.x+f*l.x,a.y=v*s.y+c*h.y+d*u.y+f*l.y,a}function vo(n,e,t){var i=t.x,r=t.y,a=t.z||0,o,s,h,l={};for(h=0;h<3;h++)if(!(e&&h===2&&t.z===void 0))switch(h===0?(o=i,"ew".indexOf(n.axis[h])!==-1?s="x":s="y"):h===1?(o=r,"ns".indexOf(n.axis[h])!==-1?s="y":s="x"):(o=a,s="z"),n.axis[h]){case"e":l[s]=o;break;case"w":l[s]=-o;break;case"n":l[s]=o;break;case"s":l[s]=-o;break;case"u":t[s]!==void 0&&(l.z=o);break;case"d":t[s]!==void 0&&(l.z=-o);break;default:return null}return l}function po(n){var e={x:n[0],y:n[1]};return n.length>2&&(e.z=n[2]),n.length>3&&(e.m=n[3]),e}function rv(n){_o(n.x),_o(n.y)}function _o(n){if(typeof Number.isFinite=="function"){if(Number.isFinite(n))return;throw new TypeError("coordinates must be finite numbers")}if(typeof n!="number"||n!==n||!isFinite(n))throw new TypeError("coordinates must be finite numbers")}function av(n,e){return(n.datum.datum_type===he||n.datum.datum_type===le)&&e.datumCode!=="WGS84"||(e.datum.datum_type===he||e.datum.datum_type===le)&&n.datumCode!=="WGS84"}function Hn(n,e,t,i){var r;if(Array.isArray(t)&&(t=po(t)),rv(t),n.datum&&e.datum&&av(n,e)&&(r=new bt("WGS84"),t=Hn(n,r,t,i),n=r),i&&n.axis!=="enu"&&(t=vo(n,!1,t)),n.projName==="longlat")t={x:t.x*et,y:t.y*et,z:t.z||0};else if(n.to_meter&&(t={x:t.x*n.to_meter,y:t.y*n.to_meter,z:t.z||0}),t=n.inverse(t),!t)return;if(n.from_greenwich&&(t.x+=n.from_greenwich),t=nv(n.datum,e.datum,t),!!t)return e.from_greenwich&&(t={x:t.x-e.from_greenwich,y:t.y,z:t.z||0}),e.projName==="longlat"?t={x:t.x*Lt,y:t.y*Lt,z:t.z||0}:(t=e.forward(t),e.to_meter&&(t={x:t.x/e.to_meter,y:t.y/e.to_meter,z:t.z||0})),i&&e.axis!=="enu"?vo(e,!0,t):t}var yo=bt("WGS84");function Wi(n,e,t,i){var r,a,o;return Array.isArray(t)?(r=Hn(n,e,t,i)||{x:NaN,y:NaN},t.length>2?typeof n.name!="undefined"&&n.name==="geocent"||typeof e.name!="undefined"&&e.name==="geocent"?typeof r.z=="number"?[r.x,r.y,r.z].concat(t.splice(3)):[r.x,r.y,t[2]].concat(t.splice(3)):[r.x,r.y].concat(t.splice(2)):[r.x,r.y]):(a=Hn(n,e,t,i),o=Object.keys(t),o.length===2||o.forEach(function(s){if(typeof n.name!="undefined"&&n.name==="geocent"||typeof e.name!="undefined"&&e.name==="geocent"){if(s==="x"||s==="y"||s==="z")return}else if(s==="x"||s==="y")return;a[s]=t[s]}),a)}function go(n){return n instanceof bt?n:n.oProj?n.oProj:bt(n)}function Et(n,e,t){n=go(n);var i=!1,r;return typeof e=="undefined"?(e=n,n=yo,i=!0):(typeof e.x!="undefined"||Array.isArray(e))&&(t=e,e=n,n=yo,i=!0),e=go(e),t?Wi(n,e,t):(r={forward:function(a,o){return Wi(n,e,a,o)},inverse:function(a,o){return Wi(e,n,a,o)}},i&&(r.oProj=e),r)}var mo=6,Mo="AJSAJS",Eo="AFAFAF",Ae=65,ft=73,xt=79,on=86,sn=90,ov={forward:xo,inverse:sv,toPoint:To};function xo(n,e){return e=e||5,uv(hv({lat:n[1],lon:n[0]}),e)}function sv(n){var e=Yi(Ro(n.toUpperCase()));return e.lat&&e.lon?[e.lon,e.lat,e.lon,e.lat]:[e.left,e.bottom,e.right,e.top]}function To(n){var e=Yi(Ro(n.toUpperCase()));return e.lat&&e.lon?[e.lon,e.lat]:[(e.left+e.right)/2,(e.top+e.bottom)/2]}function Hi(n){return n*(Math.PI/180)}function Co(n){return 180*(n/Math.PI)}function hv(n){var e=n.lat,t=n.lon,i=6378137,r=.00669438,a=.9996,o,s,h,l,u,f,c,v=Hi(e),d=Hi(t),p,_;_=Math.floor((t+180)/6)+1,t===180&&(_=60),e>=56&&e<64&&t>=3&&t<12&&(_=32),e>=72&&e<84&&(t>=0&&t<9?_=31:t>=9&&t<21?_=33:t>=21&&t<33?_=35:t>=33&&t<42&&(_=37)),o=(_-1)*6-180+3,p=Hi(o),s=r/(1-r),h=i/Math.sqrt(1-r*Math.sin(v)*Math.sin(v)),l=Math.tan(v)*Math.tan(v),u=s*Math.cos(v)*Math.cos(v),f=Math.cos(v)*(d-p),c=i*((1-r/4-3*r*r/64-5*r*r*r/256)*v-(3*r/8+3*r*r/32+45*r*r*r/1024)*Math.sin(2*v)+(15*r*r/256+45*r*r*r/1024)*Math.sin(4*v)-35*r*r*r/3072*Math.sin(6*v));var y=a*h*(f+(1-l+u)*f*f*f/6+(5-18*l+l*l+72*u-58*s)*f*f*f*f*f/120)+5e5,m=a*(c+h*Math.tan(v)*(f*f/2+(5-l+9*u+4*u*u)*f*f*f*f/24+(61-58*l+l*l+600*u-330*s)*f*f*f*f*f*f/720));return e<0&&(m+=1e7),{northing:Math.round(m),easting:Math.round(y),zoneNumber:_,zoneLetter:lv(e)}}function Yi(n){var e=n.northing,t=n.easting,i=n.zoneLetter,r=n.zoneNumber;if(r<0||r>60)return null;var a=.9996,o=6378137,s=.00669438,h,l=(1-Math.sqrt(1-s))/(1+Math.sqrt(1-s)),u,f,c,v,d,p,_,y,m,g=t-5e5,M=e;i<"N"&&(M-=1e7),_=(r-1)*6-180+3,h=s/(1-s),p=M/a,y=p/(o*(1-s/4-3*s*s/64-5*s*s*s/256)),m=y+(3*l/2-27*l*l*l/32)*Math.sin(2*y)+(21*l*l/16-55*l*l*l*l/32)*Math.sin(4*y)+151*l*l*l/96*Math.sin(6*y),u=o/Math.sqrt(1-s*Math.sin(m)*Math.sin(m)),f=Math.tan(m)*Math.tan(m),c=h*Math.cos(m)*Math.cos(m),v=o*(1-s)/Math.pow(1-s*Math.sin(m)*Math.sin(m),1.5),d=g/(u*a);var x=m-u*Math.tan(m)/v*(d*d/2-(5+3*f+10*c-4*c*c-9*h)*d*d*d*d/24+(61+90*f+298*c+45*f*f-252*h-3*c*c)*d*d*d*d*d*d/720);x=Co(x);var P=(d-(1+2*f+c)*d*d*d/6+(5-2*c+28*f-3*c*c+8*h+24*f*f)*d*d*d*d*d/120)/Math.cos(m);P=_+Co(P);var T;if(n.accuracy){var O=Yi({northing:n.northing+n.accuracy,easting:n.easting+n.accuracy,zoneLetter:n.zoneLetter,zoneNumber:n.zoneNumber});T={top:O.lat,right:O.lon,bottom:x,left:P}}else T={lat:x,lon:P};return T}function lv(n){var e="Z";return 84>=n&&n>=72?e="X":72>n&&n>=64?e="W":64>n&&n>=56?e="V":56>n&&n>=48?e="U":48>n&&n>=40?e="T":40>n&&n>=32?e="S":32>n&&n>=24?e="R":24>n&&n>=16?e="Q":16>n&&n>=8?e="P":8>n&&n>=0?e="N":0>n&&n>=-8?e="M":-8>n&&n>=-16?e="L":-16>n&&n>=-24?e="K":-24>n&&n>=-32?e="J":-32>n&&n>=-40?e="H":-40>n&&n>=-48?e="G":-48>n&&n>=-56?e="F":-56>n&&n>=-64?e="E":-64>n&&n>=-72?e="D":-72>n&&n>=-80&&(e="C"),e}function uv(n,e){var t="00000"+n.easting,i="00000"+n.northing;return n.zoneNumber+n.zoneLetter+fv(n.easting,n.northing,n.zoneNumber)+t.substr(t.length-5,e)+i.substr(i.length-5,e)}function fv(n,e,t){var i=Oo(t),r=Math.floor(n/1e5),a=Math.floor(e/1e5)%20;return cv(r,a,i)}function Oo(n){var e=n%mo;return e===0&&(e=mo),e}function cv(n,e,t){var i=t-1,r=Mo.charCodeAt(i),a=Eo.charCodeAt(i),o=r+n-1,s=a+e,h=!1;o>sn&&(o=o-sn+Ae-1,h=!0),(o===ft||r<ft&&o>ft||(o>ft||r<ft)&&h)&&o++,(o===xt||r<xt&&o>xt||(o>xt||r<xt)&&h)&&(o++,o===ft&&o++),o>sn&&(o=o-sn+Ae-1),s>on?(s=s-on+Ae-1,h=!0):h=!1,(s===ft||a<ft&&s>ft||(s>ft||a<ft)&&h)&&s++,(s===xt||a<xt&&s>xt||(s>xt||a<xt)&&h)&&(s++,s===ft&&s++),s>on&&(s=s-on+Ae-1);var l=String.fromCharCode(o)+String.fromCharCode(s);return l}function Ro(n){if(n&&n.length===0)throw"MGRSPoint coverting from nothing";for(var e=n.length,t=null,i="",r,a=0;!/[A-Z]/.test(r=n.charAt(a));){if(a>=2)throw"MGRSPoint bad conversion from: "+n;i+=r,a++}var o=parseInt(i,10);if(a===0||a+3>e)throw"MGRSPoint bad conversion from: "+n;var s=n.charAt(a++);if(s<="A"||s==="B"||s==="Y"||s>="Z"||s==="I"||s==="O")throw"MGRSPoint zone letter "+s+" not handled: "+n;t=n.substring(a,a+=2);for(var h=Oo(o),l=vv(t.charAt(0),h),u=dv(t.charAt(1),h);u<pv(s);)u+=2e6;var f=e-a;if(f%2!=0)throw`MGRSPoint has to have an even number 
of digits after the zone letter and two 100km letters - front 
half for easting meters, second half for 
northing meters`+n;var c=f/2,v=0,d=0,p,_,y,m,g;return c>0&&(p=1e5/Math.pow(10,c),_=n.substring(a,a+c),v=parseFloat(_)*p,y=n.substring(a+c),d=parseFloat(y)*p),m=v+l,g=d+u,{easting:m,northing:g,zoneLetter:s,zoneNumber:o,accuracy:p}}function vv(n,e){for(var t=Mo.charCodeAt(e-1),i=1e5,r=!1;t!==n.charCodeAt(0);){if(t++,t===ft&&t++,t===xt&&t++,t>sn){if(r)throw"Bad character: "+n;t=Ae,r=!0}i+=1e5}return i}function dv(n,e){if(n>"V")throw"MGRSPoint given invalid Northing "+n;for(var t=Eo.charCodeAt(e-1),i=0,r=!1;t!==n.charCodeAt(0);){if(t++,t===ft&&t++,t===xt&&t++,t>on){if(r)throw"Bad character: "+n;t=Ae,r=!0}i+=1e5}return i}function pv(n){var e;switch(n){case"C":e=11e5;break;case"D":e=2e6;break;case"E":e=28e5;break;case"F":e=37e5;break;case"G":e=46e5;break;case"H":e=55e5;break;case"J":e=64e5;break;case"K":e=73e5;break;case"L":e=82e5;break;case"M":e=91e5;break;case"N":e=0;break;case"P":e=8e5;break;case"Q":e=17e5;break;case"R":e=26e5;break;case"S":e=35e5;break;case"T":e=44e5;break;case"U":e=53e5;break;case"V":e=62e5;break;case"W":e=7e6;break;case"X":e=79e5;break;default:e=-1}if(e>=0)return e;throw"Invalid zone letter: "+n}function Le(n,e,t){if(!(this instanceof Le))return new Le(n,e,t);if(Array.isArray(n))this.x=n[0],this.y=n[1],this.z=n[2]||0;else if(typeof n=="object")this.x=n.x,this.y=n.y,this.z=n.z||0;else if(typeof n=="string"&&typeof e=="undefined"){var i=n.split(",");this.x=parseFloat(i[0],10),this.y=parseFloat(i[1],10),this.z=parseFloat(i[2],10)||0}else this.x=n,this.y=e,this.z=t||0;console.warn("proj4.Point will be removed in version 3, use proj4.toPoint")}Le.fromMGRS=function(n){return new Le(To(n))};Le.prototype.toMGRS=function(n){return xo([this.x,this.y],n)};var _v=1,yv=.25,Po=.046875,wo=.01953125,Io=.01068115234375,gv=.75,mv=.46875,Mv=.013020833333333334,Ev=.007120768229166667,xv=.3645833333333333,Tv=.005696614583333333,Cv=.3076171875;function So(n){var e=[];e[0]=_v-n*(yv+n*(Po+n*(wo+n*Io))),e[1]=n*(gv-n*(Po+n*(wo+n*Io)));var t=n*n;return e[2]=t*(mv-n*(Mv+n*Ev)),t*=n,e[3]=t*(xv-n*Tv),e[4]=t*n*Cv,e}function Yn(n,e,t,i){return t*=e,e*=e,i[0]*n-t*(i[1]+e*(i[2]+e*(i[3]+e*i[4])))}var Ov=20;function Ao(n,e,t){for(var i=1/(1-e),r=n,a=Ov;a;--a){var o=Math.sin(r),s=1-e*o*o;if(s=(Yn(r,o,Math.cos(r),t)-n)*(s*Math.sqrt(s))*i,r-=s,Math.abs(s)<C)return r}return r}function Rv(){this.x0=this.x0!==void 0?this.x0:0,this.y0=this.y0!==void 0?this.y0:0,this.long0=this.long0!==void 0?this.long0:0,this.lat0=this.lat0!==void 0?this.lat0:0,this.es&&(this.en=So(this.es),this.ml0=Yn(this.lat0,Math.sin(this.lat0),Math.cos(this.lat0),this.en))}function Pv(n){var e=n.x,t=n.y,i=R(e-this.long0),r,a,o,s=Math.sin(t),h=Math.cos(t);if(this.es){var u=h*i,f=Math.pow(u,2),c=this.ep2*Math.pow(h,2),v=Math.pow(c,2),d=Math.abs(h)>C?Math.tan(t):0,p=Math.pow(d,2),_=Math.pow(p,2);r=1-this.es*Math.pow(s,2),u=u/Math.sqrt(r);var y=Yn(t,s,h,this.en);a=this.a*(this.k0*u*(1+f/6*(1-p+c+f/20*(5-18*p+_+14*c-58*p*c+f/42*(61+179*_-_*p-479*p)))))+this.x0,o=this.a*(this.k0*(y-this.ml0+s*i*u/2*(1+f/12*(5-p+9*c+4*v+f/30*(61+_-58*p+270*c-330*p*c+f/56*(1385+543*_-_*p-3111*p))))))+this.y0}else{var l=h*Math.sin(i);if(Math.abs(Math.abs(l)-1)<C)return 93;if(a=.5*this.a*this.k0*Math.log((1+l)/(1-l))+this.x0,o=h*Math.cos(i)/Math.sqrt(1-Math.pow(l,2)),l=Math.abs(o),l>=1){if(l-1>C)return 93;o=0}else o=Math.acos(o);t<0&&(o=-o),o=this.a*this.k0*(o-this.lat0)+this.y0}return n.x=a,n.y=o,n}function wv(n){var e,t,i,r,a=(n.x-this.x0)*(1/this.a),o=(n.y-this.y0)*(1/this.a);if(this.es)if(e=this.ml0+o/this.k0,t=Ao(e,this.es,this.en),Math.abs(t)<E){var f=Math.sin(t),c=Math.cos(t),v=Math.abs(c)>C?Math.tan(t):0,d=this.ep2*Math.pow(c,2),p=Math.pow(d,2),_=Math.pow(v,2),y=Math.pow(_,2);e=1-this.es*Math.pow(f,2);var m=a*Math.sqrt(e)/this.k0,g=Math.pow(m,2);e=e*v,i=t-e*g/(1-this.es)*.5*(1-g/12*(5+3*_-9*d*_+d-4*p-g/30*(61+90*_-252*d*_+45*y+46*d-g/56*(1385+3633*_+4095*y+1574*y*_)))),r=R(this.long0+m*(1-g/6*(1+2*_+d-g/20*(5+28*_+24*y+8*d*_+6*d-g/42*(61+662*_+1320*y+720*y*_))))/c)}else i=E*rn(o),r=0;else{var s=Math.exp(a/this.k0),h=.5*(s-1/s),l=this.lat0+o/this.k0,u=Math.cos(l);e=Math.sqrt((1-Math.pow(u,2))/(1+Math.pow(h,2))),i=Math.asin(e),o<0&&(i=-i),h===0&&u===0?r=0:r=R(Math.atan2(h,u)+this.long0)}return n.x=r,n.y=i,n}var Iv=["Fast_Transverse_Mercator","Fast Transverse Mercator"],Qn={init:Rv,forward:Pv,inverse:wv,names:Iv};function Lo(n){var e=Math.exp(n);return e=(e-1/e)/2,e}function Jn(n,e){n=Math.abs(n),e=Math.abs(e);var t=Math.max(n,e),i=Math.min(n,e)/(t||1);return t*Math.sqrt(1+Math.pow(i,2))}function Sv(n){var e=1+n,t=e-1;return t===0?n:n*Math.log(e)/t}function Av(n){var e=Math.abs(n);return e=Sv(e*(1+e/(Jn(1,e)+1))),n<0?-e:e}function Qi(n,e){for(var t=2*Math.cos(2*e),i=n.length-1,r=n[i],a=0,o;--i>=0;)o=-a+t*r+n[i],a=r,r=o;return e+o*Math.sin(2*e)}function Lv(n,e){for(var t=2*Math.cos(e),i=n.length-1,r=n[i],a=0,o;--i>=0;)o=-a+t*r+n[i],a=r,r=o;return Math.sin(e)*o}function Nv(n){var e=Math.exp(n);return e=(e+1/e)/2,e}function No(n,e,t){for(var i=Math.sin(e),r=Math.cos(e),a=Lo(t),o=Nv(t),s=2*r*o,h=-2*i*a,l=n.length-1,u=n[l],f=0,c=0,v=0,d,p;--l>=0;)d=c,p=f,c=u,f=v,u=-d+s*c-h*f+n[l],v=-p+h*c+s*f;return s=i*o,h=r*a,[s*u-h*v,s*v+h*u]}function bv(){if(!this.approx&&(isNaN(this.es)||this.es<=0))throw new Error('Incorrect elliptical usage. Try using the +approx option in the proj string, or PROJECTION["Fast_Transverse_Mercator"] in the WKT.');this.approx&&(Qn.init.apply(this),this.forward=Qn.forward,this.inverse=Qn.inverse),this.x0=this.x0!==void 0?this.x0:0,this.y0=this.y0!==void 0?this.y0:0,this.long0=this.long0!==void 0?this.long0:0,this.lat0=this.lat0!==void 0?this.lat0:0,this.cgb=[],this.cbg=[],this.utg=[],this.gtu=[];var n=this.es/(1+Math.sqrt(1-this.es)),e=n/(2-n),t=e;this.cgb[0]=e*(2+e*(-2/3+e*(-2+e*(116/45+e*(26/45+e*(-2854/675)))))),this.cbg[0]=e*(-2+e*(2/3+e*(4/3+e*(-82/45+e*(32/45+e*(4642/4725)))))),t=t*e,this.cgb[1]=t*(7/3+e*(-8/5+e*(-227/45+e*(2704/315+e*(2323/945))))),this.cbg[1]=t*(5/3+e*(-16/15+e*(-13/9+e*(904/315+e*(-1522/945))))),t=t*e,this.cgb[2]=t*(56/15+e*(-136/35+e*(-1262/105+e*(73814/2835)))),this.cbg[2]=t*(-26/15+e*(34/21+e*(8/5+e*(-12686/2835)))),t=t*e,this.cgb[3]=t*(4279/630+e*(-332/35+e*(-399572/14175))),this.cbg[3]=t*(1237/630+e*(-12/5+e*(-24832/14175))),t=t*e,this.cgb[4]=t*(4174/315+e*(-144838/6237)),this.cbg[4]=t*(-734/315+e*(109598/31185)),t=t*e,this.cgb[5]=t*(601676/22275),this.cbg[5]=t*(444337/155925),t=Math.pow(e,2),this.Qn=this.k0/(1+e)*(1+t*(1/4+t*(1/64+t/256))),this.utg[0]=e*(-.5+e*(2/3+e*(-37/96+e*(1/360+e*(81/512+e*(-96199/604800)))))),this.gtu[0]=e*(.5+e*(-2/3+e*(5/16+e*(41/180+e*(-127/288+e*(7891/37800)))))),this.utg[1]=t*(-1/48+e*(-1/15+e*(437/1440+e*(-46/105+e*(1118711/3870720))))),this.gtu[1]=t*(13/48+e*(-3/5+e*(557/1440+e*(281/630+e*(-1983433/1935360))))),t=t*e,this.utg[2]=t*(-17/480+e*(37/840+e*(209/4480+e*(-5569/90720)))),this.gtu[2]=t*(61/240+e*(-103/140+e*(15061/26880+e*(167603/181440)))),t=t*e,this.utg[3]=t*(-4397/161280+e*(11/504+e*(830251/7257600))),this.gtu[3]=t*(49561/161280+e*(-179/168+e*(6601661/7257600))),t=t*e,this.utg[4]=t*(-4583/161280+e*(108847/3991680)),this.gtu[4]=t*(34729/80640+e*(-3418889/1995840)),t=t*e,this.utg[5]=t*(-20648693/638668800),this.gtu[5]=t*(212378941/319334400);var i=Qi(this.cbg,this.lat0);this.Zb=-this.Qn*(i+Lv(this.gtu,2*i))}function Dv(n){var e=R(n.x-this.long0),t=n.y;t=Qi(this.cbg,t);var i=Math.sin(t),r=Math.cos(t),a=Math.sin(e),o=Math.cos(e);t=Math.atan2(i,o*r),e=Math.atan2(a*r,Jn(i,r*o)),e=Av(Math.tan(e));var s=No(this.gtu,2*t,2*e);t=t+s[0],e=e+s[1];var h,l;return Math.abs(e)<=2.623395162778?(h=this.a*(this.Qn*e)+this.x0,l=this.a*(this.Qn*t+this.Zb)+this.y0):(h=1/0,l=1/0),n.x=h,n.y=l,n}function Fv(n){var e=(n.x-this.x0)*(1/this.a),t=(n.y-this.y0)*(1/this.a);t=(t-this.Zb)/this.Qn,e=e/this.Qn;var i,r;if(Math.abs(e)<=2.623395162778){var a=No(this.utg,2*t,2*e);t=t+a[0],e=e+a[1],e=Math.atan(Lo(e));var o=Math.sin(t),s=Math.cos(t),h=Math.sin(e),l=Math.cos(e);t=Math.atan2(o*l,Jn(h,l*s)),e=Math.atan2(h,l*s),i=R(e+this.long0),r=Qi(this.cgb,t)}else i=1/0,r=1/0;return n.x=i,n.y=r,n}var Gv=["Extended_Transverse_Mercator","Extended Transverse Mercator","etmerc","Transverse_Mercator","Transverse Mercator","tmerc"],ti={init:bv,forward:Dv,inverse:Fv,names:Gv};function jv(n,e){if(n===void 0){if(n=Math.floor((R(e)+Math.PI)*30/Math.PI)+1,n<0)return 0;if(n>60)return 60}return n}var $v="etmerc";function zv(){var n=jv(this.zone,this.long0);if(n===void 0)throw new Error("unknown utm zone");this.lat0=0,this.long0=(6*Math.abs(n)-183)*et,this.x0=5e5,this.y0=this.utmSouth?1e7:0,this.k0=.9996,ti.init.apply(this),this.forward=ti.forward,this.inverse=ti.inverse}var Uv=["Universal Transverse Mercator System","utm"],kv={init:zv,names:Uv,dependsOn:$v};function Ji(n,e){return Math.pow((1-n)/(1+n),e)}var Kv=20;function qv(){var n=Math.sin(this.lat0),e=Math.cos(this.lat0);e*=e,this.rc=Math.sqrt(1-this.es)/(1-this.es*n*n),this.C=Math.sqrt(1+this.es*e*e/(1-this.es)),this.phic0=Math.asin(n/this.C),this.ratexp=.5*this.C*this.e,this.K=Math.tan(.5*this.phic0+F)/(Math.pow(Math.tan(.5*this.lat0+F),this.C)*Ji(this.e*n,this.ratexp))}function Xv(n){var e=n.x,t=n.y;return n.y=2*Math.atan(this.K*Math.pow(Math.tan(.5*t+F),this.C)*Ji(this.e*Math.sin(t),this.ratexp))-E,n.x=this.C*e,n}function Zv(n){for(var e=1e-14,t=n.x/this.C,i=n.y,r=Math.pow(Math.tan(.5*i+F)/this.K,1/this.C),a=Kv;a>0&&(i=2*Math.atan(r*Ji(this.e*Math.sin(n.y),-.5*this.e))-E,!(Math.abs(i-n.y)<e));--a)n.y=i;return a?(n.x=t,n.y=i,n):null}var Bv=["gauss"],tr={init:qv,forward:Xv,inverse:Zv,names:Bv};function Vv(){tr.init.apply(this),!!this.rc&&(this.sinc0=Math.sin(this.phic0),this.cosc0=Math.cos(this.phic0),this.R2=2*this.rc,this.title||(this.title="Oblique Stereographic Alternative"))}function Wv(n){var e,t,i,r;return n.x=R(n.x-this.long0),tr.forward.apply(this,[n]),e=Math.sin(n.y),t=Math.cos(n.y),i=Math.cos(n.x),r=this.k0*this.R2/(1+this.sinc0*e+this.cosc0*t*i),n.x=r*t*Math.sin(n.x),n.y=r*(this.cosc0*e-this.sinc0*t*i),n.x=this.a*n.x+this.x0,n.y=this.a*n.y+this.y0,n}function Hv(n){var e,t,i,r,a;if(n.x=(n.x-this.x0)/this.a,n.y=(n.y-this.y0)/this.a,n.x/=this.k0,n.y/=this.k0,a=Math.sqrt(n.x*n.x+n.y*n.y)){var o=2*Math.atan2(a,this.R2);e=Math.sin(o),t=Math.cos(o),r=Math.asin(t*this.sinc0+n.y*e*this.cosc0/a),i=Math.atan2(n.x*e,a*this.cosc0*t-n.y*this.sinc0*e)}else r=this.phic0,i=0;return n.x=i,n.y=r,tr.inverse.apply(this,[n]),n.x=R(n.x+this.long0),n}var Yv=["Stereographic_North_Pole","Oblique_Stereographic","Polar_Stereographic","sterea","Oblique Stereographic Alternative","Double_Stereographic"],Qv={init:Vv,forward:Wv,inverse:Hv,names:Yv};function Jv(n,e,t){return e*=t,Math.tan(.5*(E+n))*Math.pow((1-e)/(1+e),.5*t)}function td(){this.coslat0=Math.cos(this.lat0),this.sinlat0=Math.sin(this.lat0),this.sphere?this.k0===1&&!isNaN(this.lat_ts)&&Math.abs(this.coslat0)<=C&&(this.k0=.5*(1+rn(this.lat0)*Math.sin(this.lat_ts))):(Math.abs(this.coslat0)<=C&&(this.lat0>0?this.con=1:this.con=-1),this.cons=Math.sqrt(Math.pow(1+this.e,1+this.e)*Math.pow(1-this.e,1-this.e)),this.k0===1&&!isNaN(this.lat_ts)&&Math.abs(this.coslat0)<=C&&(this.k0=.5*this.cons*Nt(this.e,Math.sin(this.lat_ts),Math.cos(this.lat_ts))/Pt(this.e,this.con*this.lat_ts,this.con*Math.sin(this.lat_ts))),this.ms1=Nt(this.e,this.sinlat0,this.coslat0),this.X0=2*Math.atan(this.ssfn_(this.lat0,this.sinlat0,this.e))-E,this.cosX0=Math.cos(this.X0),this.sinX0=Math.sin(this.X0))}function ed(n){var e=n.x,t=n.y,i=Math.sin(t),r=Math.cos(t),a,o,s,h,l,u,f=R(e-this.long0);return Math.abs(Math.abs(e-this.long0)-Math.PI)<=C&&Math.abs(t+this.lat0)<=C?(n.x=NaN,n.y=NaN,n):this.sphere?(a=2*this.k0/(1+this.sinlat0*i+this.coslat0*r*Math.cos(f)),n.x=this.a*a*r*Math.sin(f)+this.x0,n.y=this.a*a*(this.coslat0*i-this.sinlat0*r*Math.cos(f))+this.y0,n):(o=2*Math.atan(this.ssfn_(t,i,this.e))-E,h=Math.cos(o),s=Math.sin(o),Math.abs(this.coslat0)<=C?(l=Pt(this.e,t*this.con,this.con*i),u=2*this.a*this.k0*l/this.cons,n.x=this.x0+u*Math.sin(e-this.long0),n.y=this.y0-this.con*u*Math.cos(e-this.long0),n):(Math.abs(this.sinlat0)<C?(a=2*this.a*this.k0/(1+h*Math.cos(f)),n.y=a*s):(a=2*this.a*this.k0*this.ms1/(this.cosX0*(1+this.sinX0*s+this.cosX0*h*Math.cos(f))),n.y=a*(this.cosX0*s-this.sinX0*h*Math.cos(f))+this.y0),n.x=a*h*Math.sin(f)+this.x0,n))}function nd(n){n.x-=this.x0,n.y-=this.y0;var e,t,i,r,a,o=Math.sqrt(n.x*n.x+n.y*n.y);if(this.sphere){var s=2*Math.atan(o/(2*this.a*this.k0));return e=this.long0,t=this.lat0,o<=C?(n.x=e,n.y=t,n):(t=Math.asin(Math.cos(s)*this.sinlat0+n.y*Math.sin(s)*this.coslat0/o),Math.abs(this.coslat0)<C?this.lat0>0?e=R(this.long0+Math.atan2(n.x,-1*n.y)):e=R(this.long0+Math.atan2(n.x,n.y)):e=R(this.long0+Math.atan2(n.x*Math.sin(s),o*this.coslat0*Math.cos(s)-n.y*this.sinlat0*Math.sin(s))),n.x=e,n.y=t,n)}else if(Math.abs(this.coslat0)<=C){if(o<=C)return t=this.lat0,e=this.long0,n.x=e,n.y=t,n;n.x*=this.con,n.y*=this.con,i=o*this.cons/(2*this.a*this.k0),t=this.con*an(this.e,i),e=this.con*R(this.con*this.long0+Math.atan2(n.x,-1*n.y))}else r=2*Math.atan(o*this.cosX0/(2*this.a*this.k0*this.ms1)),e=this.long0,o<=C?a=this.X0:(a=Math.asin(Math.cos(r)*this.sinX0+n.y*Math.sin(r)*this.cosX0/o),e=R(this.long0+Math.atan2(n.x*Math.sin(r),o*this.cosX0*Math.cos(r)-n.y*this.sinX0*Math.sin(r)))),t=-1*an(this.e,Math.tan(.5*(E+a)));return n.x=e,n.y=t,n}var id=["stere","Stereographic_South_Pole","Polar Stereographic (variant B)"],rd={init:td,forward:ed,inverse:nd,names:id,ssfn_:Jv};function ad(){var n=this.lat0;this.lambda0=this.long0;var e=Math.sin(n),t=this.a,i=this.rf,r=1/i,a=2*r-Math.pow(r,2),o=this.e=Math.sqrt(a);this.R=this.k0*t*Math.sqrt(1-a)/(1-a*Math.pow(e,2)),this.alpha=Math.sqrt(1+a/(1-a)*Math.pow(Math.cos(n),4)),this.b0=Math.asin(e/this.alpha);var s=Math.log(Math.tan(Math.PI/4+this.b0/2)),h=Math.log(Math.tan(Math.PI/4+n/2)),l=Math.log((1+o*e)/(1-o*e));this.K=s-this.alpha*h+this.alpha*o/2*l}function od(n){var e=Math.log(Math.tan(Math.PI/4-n.y/2)),t=this.e/2*Math.log((1+this.e*Math.sin(n.y))/(1-this.e*Math.sin(n.y))),i=-this.alpha*(e+t)+this.K,r=2*(Math.atan(Math.exp(i))-Math.PI/4),a=this.alpha*(n.x-this.lambda0),o=Math.atan(Math.sin(a)/(Math.sin(this.b0)*Math.tan(r)+Math.cos(this.b0)*Math.cos(a))),s=Math.asin(Math.cos(this.b0)*Math.sin(r)-Math.sin(this.b0)*Math.cos(r)*Math.cos(a));return n.y=this.R/2*Math.log((1+Math.sin(s))/(1-Math.sin(s)))+this.y0,n.x=this.R*o+this.x0,n}function sd(n){for(var e=n.x-this.x0,t=n.y-this.y0,i=e/this.R,r=2*(Math.atan(Math.exp(t/this.R))-Math.PI/4),a=Math.asin(Math.cos(this.b0)*Math.sin(r)+Math.sin(this.b0)*Math.cos(r)*Math.cos(i)),o=Math.atan(Math.sin(i)/(Math.cos(this.b0)*Math.cos(i)-Math.sin(this.b0)*Math.tan(r))),s=this.lambda0+o/this.alpha,h=0,l=a,u=-1e3,f=0;Math.abs(l-u)>1e-7;){if(++f>20)return;h=1/this.alpha*(Math.log(Math.tan(Math.PI/4+a/2))-this.K)+this.e*Math.log(Math.tan(Math.PI/4+Math.asin(this.e*Math.sin(l))/2)),u=l,l=2*Math.atan(Math.exp(h))-Math.PI/2}return n.x=s,n.y=l,n}var hd=["somerc"],ld={init:ad,forward:od,inverse:sd,names:hd},Ne=1e-7;function ud(n){var e=["Hotine_Oblique_Mercator","Hotine_Oblique_Mercator_Azimuth_Natural_Origin"],t=typeof n.PROJECTION=="object"?Object.keys(n.PROJECTION)[0]:n.PROJECTION;return"no_uoff"in n||"no_off"in n||e.indexOf(t)!==-1}function fd(){var n,e,t,i,r,a,o,s,h,l,u=0,f,c=0,v=0,d=0,p=0,_=0,y=0;this.no_off=ud(this),this.no_rot="no_rot"in this;var m=!1;"alpha"in this&&(m=!0);var g=!1;if("rectified_grid_angle"in this&&(g=!0),m&&(y=this.alpha),g&&(u=this.rectified_grid_angle*et),m||g)c=this.longc;else if(v=this.long1,p=this.lat1,d=this.long2,_=this.lat2,Math.abs(p-_)<=Ne||(n=Math.abs(p))<=Ne||Math.abs(n-E)<=Ne||Math.abs(Math.abs(this.lat0)-E)<=Ne||Math.abs(Math.abs(_)-E)<=Ne)throw new Error;var M=1-this.es;e=Math.sqrt(M),Math.abs(this.lat0)>C?(s=Math.sin(this.lat0),t=Math.cos(this.lat0),n=1-this.es*s*s,this.B=t*t,this.B=Math.sqrt(1+this.es*this.B*this.B/M),this.A=this.B*this.k0*e/n,i=this.B*e/(t*Math.sqrt(n)),r=i*i-1,r<=0?r=0:(r=Math.sqrt(r),this.lat0<0&&(r=-r)),this.E=r+=i,this.E*=Math.pow(Pt(this.e,this.lat0,s),this.B)):(this.B=1/e,this.A=this.k0,this.E=i=r=1),m||g?(m?(f=Math.asin(Math.sin(y)/i),g||(u=y)):(f=u,y=Math.asin(i*Math.sin(f))),this.lam0=c-Math.asin(.5*(r-1/r)*Math.tan(f))/this.B):(a=Math.pow(Pt(this.e,p,Math.sin(p)),this.B),o=Math.pow(Pt(this.e,_,Math.sin(_)),this.B),r=this.E/a,h=(o-a)/(o+a),l=this.E*this.E,l=(l-o*a)/(l+o*a),n=v-d,n<-Math.pi?d-=en:n>Math.pi&&(d+=en),this.lam0=R(.5*(v+d)-Math.atan(l*Math.tan(.5*this.B*(v-d))/h)/this.B),f=Math.atan(2*Math.sin(this.B*R(v-this.lam0))/(r-1/r)),u=y=Math.asin(i*Math.sin(f))),this.singam=Math.sin(f),this.cosgam=Math.cos(f),this.sinrot=Math.sin(u),this.cosrot=Math.cos(u),this.rB=1/this.B,this.ArB=this.A*this.rB,this.BrA=1/this.ArB,this.A*this.B,this.no_off?this.u_0=0:(this.u_0=Math.abs(this.ArB*Math.atan(Math.sqrt(i*i-1)/Math.cos(y))),this.lat0<0&&(this.u_0=-this.u_0)),r=.5*f,this.v_pole_n=this.ArB*Math.log(Math.tan(F-r)),this.v_pole_s=this.ArB*Math.log(Math.tan(F+r))}function cd(n){var e={},t,i,r,a,o,s,h,l;if(n.x=n.x-this.lam0,Math.abs(Math.abs(n.y)-E)>C){if(o=this.E/Math.pow(Pt(this.e,n.y,Math.sin(n.y)),this.B),s=1/o,t=.5*(o-s),i=.5*(o+s),a=Math.sin(this.B*n.x),r=(t*this.singam-a*this.cosgam)/i,Math.abs(Math.abs(r)-1)<C)throw new Error;l=.5*this.ArB*Math.log((1-r)/(1+r)),s=Math.cos(this.B*n.x),Math.abs(s)<Ne?h=this.A*n.x:h=this.ArB*Math.atan2(t*this.cosgam+a*this.singam,s)}else l=n.y>0?this.v_pole_n:this.v_pole_s,h=this.ArB*n.y;return this.no_rot?(e.x=h,e.y=l):(h-=this.u_0,e.x=l*this.cosrot+h*this.sinrot,e.y=h*this.cosrot-l*this.sinrot),e.x=this.a*e.x+this.x0,e.y=this.a*e.y+this.y0,e}function vd(n){var e,t,i,r,a,o,s,h={};if(n.x=(n.x-this.x0)*(1/this.a),n.y=(n.y-this.y0)*(1/this.a),this.no_rot?(t=n.y,e=n.x):(t=n.x*this.cosrot-n.y*this.sinrot,e=n.y*this.cosrot+n.x*this.sinrot+this.u_0),i=Math.exp(-this.BrA*t),r=.5*(i-1/i),a=.5*(i+1/i),o=Math.sin(this.BrA*e),s=(o*this.cosgam+r*this.singam)/a,Math.abs(Math.abs(s)-1)<C)h.x=0,h.y=s<0?-E:E;else{if(h.y=this.E/Math.sqrt((1+s)/(1-s)),h.y=an(this.e,Math.pow(h.y,1/this.B)),h.y===1/0)throw new Error;h.x=-this.rB*Math.atan2(r*this.cosgam-o*this.singam,Math.cos(this.BrA*e))}return h.x+=this.lam0,h}var dd=["Hotine_Oblique_Mercator","Hotine Oblique Mercator","Hotine_Oblique_Mercator_Azimuth_Natural_Origin","Hotine_Oblique_Mercator_Two_Point_Natural_Origin","Hotine_Oblique_Mercator_Azimuth_Center","Oblique_Mercator","omerc"],pd={init:fd,forward:cd,inverse:vd,names:dd};function _d(){if(this.lat2||(this.lat2=this.lat1),this.k0||(this.k0=1),this.x0=this.x0||0,this.y0=this.y0||0,!(Math.abs(this.lat1+this.lat2)<C)){var n=this.b/this.a;this.e=Math.sqrt(1-n*n);var e=Math.sin(this.lat1),t=Math.cos(this.lat1),i=Nt(this.e,e,t),r=Pt(this.e,this.lat1,e),a=Math.sin(this.lat2),o=Math.cos(this.lat2),s=Nt(this.e,a,o),h=Pt(this.e,this.lat2,a),l=Pt(this.e,this.lat0,Math.sin(this.lat0));Math.abs(this.lat1-this.lat2)>C?this.ns=Math.log(i/s)/Math.log(r/h):this.ns=e,isNaN(this.ns)&&(this.ns=e),this.f0=i/(this.ns*Math.pow(r,this.ns)),this.rh=this.a*this.f0*Math.pow(l,this.ns),this.title||(this.title="Lambert Conformal Conic")}}function yd(n){var e=n.x,t=n.y;Math.abs(2*Math.abs(t)-Math.PI)<=C&&(t=rn(t)*(E-2*C));var i=Math.abs(Math.abs(t)-E),r,a;if(i>C)r=Pt(this.e,t,Math.sin(t)),a=this.a*this.f0*Math.pow(r,this.ns);else{if(i=t*this.ns,i<=0)return null;a=0}var o=this.ns*R(e-this.long0);return n.x=this.k0*(a*Math.sin(o))+this.x0,n.y=this.k0*(this.rh-a*Math.cos(o))+this.y0,n}function gd(n){var e,t,i,r,a,o=(n.x-this.x0)/this.k0,s=this.rh-(n.y-this.y0)/this.k0;this.ns>0?(e=Math.sqrt(o*o+s*s),t=1):(e=-Math.sqrt(o*o+s*s),t=-1);var h=0;if(e!==0&&(h=Math.atan2(t*o,t*s)),e!==0||this.ns>0){if(t=1/this.ns,i=Math.pow(e/(this.a*this.f0),t),r=an(this.e,i),r===-9999)return null}else r=-E;return a=R(h/this.ns+this.long0),n.x=a,n.y=r,n}var md=["Lambert Tangential Conformal Conic Projection","Lambert_Conformal_Conic","Lambert_Conformal_Conic_1SP","Lambert_Conformal_Conic_2SP","lcc"],Md={init:_d,forward:yd,inverse:gd,names:md};function Ed(){this.a=6377397155e-3,this.es=.006674372230614,this.e=Math.sqrt(this.es),this.lat0||(this.lat0=.863937979737193),this.long0||(this.long0=.7417649320975901-.308341501185665),this.k0||(this.k0=.9999),this.s45=.785398163397448,this.s90=2*this.s45,this.fi0=this.lat0,this.e2=this.es,this.e=Math.sqrt(this.e2),this.alfa=Math.sqrt(1+this.e2*Math.pow(Math.cos(this.fi0),4)/(1-this.e2)),this.uq=1.04216856380474,this.u0=Math.asin(Math.sin(this.fi0)/this.alfa),this.g=Math.pow((1+this.e*Math.sin(this.fi0))/(1-this.e*Math.sin(this.fi0)),this.alfa*this.e/2),this.k=Math.tan(this.u0/2+this.s45)/Math.pow(Math.tan(this.fi0/2+this.s45),this.alfa)*this.g,this.k1=this.k0,this.n0=this.a*Math.sqrt(1-this.e2)/(1-this.e2*Math.pow(Math.sin(this.fi0),2)),this.s0=1.37008346281555,this.n=Math.sin(this.s0),this.ro0=this.k1*this.n0/Math.tan(this.s0),this.ad=this.s90-this.uq}function xd(n){var e,t,i,r,a,o,s,h=n.x,l=n.y,u=R(h-this.long0);return e=Math.pow((1+this.e*Math.sin(l))/(1-this.e*Math.sin(l)),this.alfa*this.e/2),t=2*(Math.atan(this.k*Math.pow(Math.tan(l/2+this.s45),this.alfa)/e)-this.s45),i=-u*this.alfa,r=Math.asin(Math.cos(this.ad)*Math.sin(t)+Math.sin(this.ad)*Math.cos(t)*Math.cos(i)),a=Math.asin(Math.cos(t)*Math.sin(i)/Math.cos(r)),o=this.n*a,s=this.ro0*Math.pow(Math.tan(this.s0/2+this.s45),this.n)/Math.pow(Math.tan(r/2+this.s45),this.n),n.y=s*Math.cos(o)/1,n.x=s*Math.sin(o)/1,this.czech||(n.y*=-1,n.x*=-1),n}function Td(n){var e,t,i,r,a,o,s,h,l=n.x;n.x=n.y,n.y=l,this.czech||(n.y*=-1,n.x*=-1),o=Math.sqrt(n.x*n.x+n.y*n.y),a=Math.atan2(n.y,n.x),r=a/Math.sin(this.s0),i=2*(Math.atan(Math.pow(this.ro0/o,1/this.n)*Math.tan(this.s0/2+this.s45))-this.s45),e=Math.asin(Math.cos(this.ad)*Math.sin(i)-Math.sin(this.ad)*Math.cos(i)*Math.cos(r)),t=Math.asin(Math.cos(i)*Math.sin(r)/Math.cos(e)),n.x=this.long0-t/this.alfa,s=e,h=0;var u=0;do n.y=2*(Math.atan(Math.pow(this.k,-1/this.alfa)*Math.pow(Math.tan(e/2+this.s45),1/this.alfa)*Math.pow((1+this.e*Math.sin(s))/(1-this.e*Math.sin(s)),this.e/2))-this.s45),Math.abs(s-n.y)<1e-10&&(h=1),s=n.y,u+=1;while(h===0&&u<15);return u>=15?null:n}var Cd=["Krovak","krovak"],Od={init:Ed,forward:xd,inverse:Td,names:Cd};function ht(n,e,t,i,r){return n*r-e*Math.sin(2*r)+t*Math.sin(4*r)-i*Math.sin(6*r)}function hn(n){return 1-.25*n*(1+n/16*(3+1.25*n))}function ln(n){return .375*n*(1+.25*n*(1+.46875*n))}function un(n){return .05859375*n*n*(1+.75*n)}function fn(n){return n*n*n*(35/3072)}function be(n,e,t){var i=e*t;return n/Math.sqrt(1-i*i)}function De(n){return Math.abs(n)<E?n:n-rn(n)*Math.PI}function ei(n,e,t,i,r){var a,o;a=n/e;for(var s=0;s<15;s++)if(o=(n-(e*a-t*Math.sin(2*a)+i*Math.sin(4*a)-r*Math.sin(6*a)))/(e-2*t*Math.cos(2*a)+4*i*Math.cos(4*a)-6*r*Math.cos(6*a)),a+=o,Math.abs(o)<=1e-10)return a;return NaN}function Rd(){this.sphere||(this.e0=hn(this.es),this.e1=ln(this.es),this.e2=un(this.es),this.e3=fn(this.es),this.ml0=this.a*ht(this.e0,this.e1,this.e2,this.e3,this.lat0))}function Pd(n){var e,t,i=n.x,r=n.y;if(i=R(i-this.long0),this.sphere)e=this.a*Math.asin(Math.cos(r)*Math.sin(i)),t=this.a*(Math.atan2(Math.tan(r),Math.cos(i))-this.lat0);else{var a=Math.sin(r),o=Math.cos(r),s=be(this.a,this.e,a),h=Math.tan(r)*Math.tan(r),l=i*Math.cos(r),u=l*l,f=this.es*o*o/(1-this.es),c=this.a*ht(this.e0,this.e1,this.e2,this.e3,r);e=s*l*(1-u*h*(1/6-(8-h+8*f)*u/120)),t=c-this.ml0+s*a/o*u*(.5+(5-h+6*f)*u/24)}return n.x=e+this.x0,n.y=t+this.y0,n}function wd(n){n.x-=this.x0,n.y-=this.y0;var e=n.x/this.a,t=n.y/this.a,i,r;if(this.sphere){var a=t+this.lat0;i=Math.asin(Math.sin(a)*Math.cos(e)),r=Math.atan2(Math.tan(e),Math.cos(a))}else{var o=this.ml0/this.a+t,s=ei(o,this.e0,this.e1,this.e2,this.e3);if(Math.abs(Math.abs(s)-E)<=C)return n.x=this.long0,n.y=E,t<0&&(n.y*=-1),n;var h=be(this.a,this.e,Math.sin(s)),l=h*h*h/this.a/this.a*(1-this.es),u=Math.pow(Math.tan(s),2),f=e*this.a/h,c=f*f;i=s-h*Math.tan(s)/l*f*f*(.5-(1+3*u)*f*f/24),r=f*(1-c*(u/3+(1+3*u)*u*c/15))/Math.cos(s)}return n.x=R(r+this.long0),n.y=De(i),n}var Id=["Cassini","Cassini_Soldner","cass"],Sd={init:Rd,forward:Pd,inverse:wd,names:Id};function Wt(n,e){var t;return n>1e-7?(t=n*e,(1-n*n)*(e/(1-t*t)-.5/n*Math.log((1-t)/(1+t)))):2*e}var Ad=1,Ld=2,Nd=3,bd=4;function Dd(){var n=Math.abs(this.lat0);if(Math.abs(n-E)<C?this.mode=this.lat0<0?this.S_POLE:this.N_POLE:Math.abs(n)<C?this.mode=this.EQUIT:this.mode=this.OBLIQ,this.es>0){var e;switch(this.qp=Wt(this.e,1),this.mmf=.5/(1-this.es),this.apa=qd(this.es),this.mode){case this.N_POLE:this.dd=1;break;case this.S_POLE:this.dd=1;break;case this.EQUIT:this.rq=Math.sqrt(.5*this.qp),this.dd=1/this.rq,this.xmf=1,this.ymf=.5*this.qp;break;case this.OBLIQ:this.rq=Math.sqrt(.5*this.qp),e=Math.sin(this.lat0),this.sinb1=Wt(this.e,e)/this.qp,this.cosb1=Math.sqrt(1-this.sinb1*this.sinb1),this.dd=Math.cos(this.lat0)/(Math.sqrt(1-this.es*e*e)*this.rq*this.cosb1),this.ymf=(this.xmf=this.rq)/this.dd,this.xmf*=this.dd;break}}else this.mode===this.OBLIQ&&(this.sinph0=Math.sin(this.lat0),this.cosph0=Math.cos(this.lat0))}function Fd(n){var e,t,i,r,a,o,s,h,l,u,f=n.x,c=n.y;if(f=R(f-this.long0),this.sphere){if(a=Math.sin(c),u=Math.cos(c),i=Math.cos(f),this.mode===this.OBLIQ||this.mode===this.EQUIT){if(t=this.mode===this.EQUIT?1+u*i:1+this.sinph0*a+this.cosph0*u*i,t<=C)return null;t=Math.sqrt(2/t),e=t*u*Math.sin(f),t*=this.mode===this.EQUIT?a:this.cosph0*a-this.sinph0*u*i}else if(this.mode===this.N_POLE||this.mode===this.S_POLE){if(this.mode===this.N_POLE&&(i=-i),Math.abs(c+this.lat0)<C)return null;t=F-c*.5,t=2*(this.mode===this.S_POLE?Math.cos(t):Math.sin(t)),e=t*Math.sin(f),t*=i}}else{switch(s=0,h=0,l=0,i=Math.cos(f),r=Math.sin(f),a=Math.sin(c),o=Wt(this.e,a),(this.mode===this.OBLIQ||this.mode===this.EQUIT)&&(s=o/this.qp,h=Math.sqrt(1-s*s)),this.mode){case this.OBLIQ:l=1+this.sinb1*s+this.cosb1*h*i;break;case this.EQUIT:l=1+h*i;break;case this.N_POLE:l=E+c,o=this.qp-o;break;case this.S_POLE:l=c-E,o=this.qp+o;break}if(Math.abs(l)<C)return null;switch(this.mode){case this.OBLIQ:case this.EQUIT:l=Math.sqrt(2/l),this.mode===this.OBLIQ?t=this.ymf*l*(this.cosb1*s-this.sinb1*h*i):t=(l=Math.sqrt(2/(1+h*i)))*s*this.ymf,e=this.xmf*l*h*r;break;case this.N_POLE:case this.S_POLE:o>=0?(e=(l=Math.sqrt(o))*r,t=i*(this.mode===this.S_POLE?l:-l)):e=t=0;break}}return n.x=this.a*e+this.x0,n.y=this.a*t+this.y0,n}function Gd(n){n.x-=this.x0,n.y-=this.y0;var e=n.x/this.a,t=n.y/this.a,i,r,a,o,s,h,l;if(this.sphere){var u=0,f,c=0;if(f=Math.sqrt(e*e+t*t),r=f*.5,r>1)return null;switch(r=2*Math.asin(r),(this.mode===this.OBLIQ||this.mode===this.EQUIT)&&(c=Math.sin(r),u=Math.cos(r)),this.mode){case this.EQUIT:r=Math.abs(f)<=C?0:Math.asin(t*c/f),e*=c,t=u*f;break;case this.OBLIQ:r=Math.abs(f)<=C?this.lat0:Math.asin(u*this.sinph0+t*c*this.cosph0/f),e*=c*this.cosph0,t=(u-Math.sin(r)*this.sinph0)*f;break;case this.N_POLE:t=-t,r=E-r;break;case this.S_POLE:r-=E;break}i=t===0&&(this.mode===this.EQUIT||this.mode===this.OBLIQ)?0:Math.atan2(e,t)}else{if(l=0,this.mode===this.OBLIQ||this.mode===this.EQUIT){if(e/=this.dd,t*=this.dd,h=Math.sqrt(e*e+t*t),h<C)return n.x=this.long0,n.y=this.lat0,n;o=2*Math.asin(.5*h/this.rq),a=Math.cos(o),e*=o=Math.sin(o),this.mode===this.OBLIQ?(l=a*this.sinb1+t*o*this.cosb1/h,s=this.qp*l,t=h*this.cosb1*a-t*this.sinb1*o):(l=t*o/h,s=this.qp*l,t=h*a)}else if(this.mode===this.N_POLE||this.mode===this.S_POLE){if(this.mode===this.N_POLE&&(t=-t),s=e*e+t*t,!s)return n.x=this.long0,n.y=this.lat0,n;l=1-s/this.qp,this.mode===this.S_POLE&&(l=-l)}i=Math.atan2(e,t),r=Xd(Math.asin(l),this.apa)}return n.x=R(this.long0+i),n.y=r,n}var jd=.3333333333333333,$d=.17222222222222222,zd=.10257936507936508,Ud=.06388888888888888,kd=.0664021164021164,Kd=.016415012942191543;function qd(n){var e,t=[];return t[0]=n*jd,e=n*n,t[0]+=e*$d,t[1]=e*Ud,e*=n,t[0]+=e*zd,t[1]+=e*kd,t[2]=e*Kd,t}function Xd(n,e){var t=n+n;return n+e[0]*Math.sin(t)+e[1]*Math.sin(t+t)+e[2]*Math.sin(t+t+t)}var Zd=["Lambert Azimuthal Equal Area","Lambert_Azimuthal_Equal_Area","laea"],Bd={init:Dd,forward:Fd,inverse:Gd,names:Zd,S_POLE:Ad,N_POLE:Ld,EQUIT:Nd,OBLIQ:bd};function Ht(n){return Math.abs(n)>1&&(n=n>1?1:-1),Math.asin(n)}function Vd(){Math.abs(this.lat1+this.lat2)<C||(this.temp=this.b/this.a,this.es=1-Math.pow(this.temp,2),this.e3=Math.sqrt(this.es),this.sin_po=Math.sin(this.lat1),this.cos_po=Math.cos(this.lat1),this.t1=this.sin_po,this.con=this.sin_po,this.ms1=Nt(this.e3,this.sin_po,this.cos_po),this.qs1=Wt(this.e3,this.sin_po,this.cos_po),this.sin_po=Math.sin(this.lat2),this.cos_po=Math.cos(this.lat2),this.t2=this.sin_po,this.ms2=Nt(this.e3,this.sin_po,this.cos_po),this.qs2=Wt(this.e3,this.sin_po,this.cos_po),this.sin_po=Math.sin(this.lat0),this.cos_po=Math.cos(this.lat0),this.t3=this.sin_po,this.qs0=Wt(this.e3,this.sin_po,this.cos_po),Math.abs(this.lat1-this.lat2)>C?this.ns0=(this.ms1*this.ms1-this.ms2*this.ms2)/(this.qs2-this.qs1):this.ns0=this.con,this.c=this.ms1*this.ms1+this.ns0*this.qs1,this.rh=this.a*Math.sqrt(this.c-this.ns0*this.qs0)/this.ns0)}function Wd(n){var e=n.x,t=n.y;this.sin_phi=Math.sin(t),this.cos_phi=Math.cos(t);var i=Wt(this.e3,this.sin_phi,this.cos_phi),r=this.a*Math.sqrt(this.c-this.ns0*i)/this.ns0,a=this.ns0*R(e-this.long0),o=r*Math.sin(a)+this.x0,s=this.rh-r*Math.cos(a)+this.y0;return n.x=o,n.y=s,n}function Hd(n){var e,t,i,r,a,o;return n.x-=this.x0,n.y=this.rh-n.y+this.y0,this.ns0>=0?(e=Math.sqrt(n.x*n.x+n.y*n.y),i=1):(e=-Math.sqrt(n.x*n.x+n.y*n.y),i=-1),r=0,e!==0&&(r=Math.atan2(i*n.x,i*n.y)),i=e*this.ns0/this.a,this.sphere?o=Math.asin((this.c-i*i)/(2*this.ns0)):(t=(this.c-i*i)/this.ns0,o=this.phi1z(this.e3,t)),a=R(r/this.ns0+this.long0),n.x=a,n.y=o,n}function Yd(n,e){var t,i,r,a,o,s=Ht(.5*e);if(n<C)return s;for(var h=n*n,l=1;l<=25;l++)if(t=Math.sin(s),i=Math.cos(s),r=n*t,a=1-r*r,o=.5*a*a/i*(e/(1-h)-t/a+.5/n*Math.log((1-r)/(1+r))),s=s+o,Math.abs(o)<=1e-7)return s;return null}var Qd=["Albers_Conic_Equal_Area","Albers","aea"],Jd={init:Vd,forward:Wd,inverse:Hd,names:Qd,phi1z:Yd};function t0(){this.sin_p14=Math.sin(this.lat0),this.cos_p14=Math.cos(this.lat0),this.infinity_dist=1e3*this.a,this.rc=1}function e0(n){var e,t,i,r,a,o,s,h,l=n.x,u=n.y;return i=R(l-this.long0),e=Math.sin(u),t=Math.cos(u),r=Math.cos(i),o=this.sin_p14*e+this.cos_p14*t*r,a=1,o>0||Math.abs(o)<=C?(s=this.x0+this.a*a*t*Math.sin(i)/o,h=this.y0+this.a*a*(this.cos_p14*e-this.sin_p14*t*r)/o):(s=this.x0+this.infinity_dist*t*Math.sin(i),h=this.y0+this.infinity_dist*(this.cos_p14*e-this.sin_p14*t*r)),n.x=s,n.y=h,n}function n0(n){var e,t,i,r,a,o;return n.x=(n.x-this.x0)/this.a,n.y=(n.y-this.y0)/this.a,n.x/=this.k0,n.y/=this.k0,(e=Math.sqrt(n.x*n.x+n.y*n.y))?(r=Math.atan2(e,this.rc),t=Math.sin(r),i=Math.cos(r),o=Ht(i*this.sin_p14+n.y*t*this.cos_p14/e),a=Math.atan2(n.x*t,e*this.cos_p14*i-n.y*this.sin_p14*t),a=R(this.long0+a)):(o=this.phic0,a=0),n.x=a,n.y=o,n}var i0=["gnom"],r0={init:t0,forward:e0,inverse:n0,names:i0};function a0(n,e){var t=1-(1-n*n)/(2*n)*Math.log((1-n)/(1+n));if(Math.abs(Math.abs(e)-t)<1e-6)return e<0?-1*E:E;for(var i=Math.asin(.5*e),r,a,o,s,h=0;h<30;h++)if(a=Math.sin(i),o=Math.cos(i),s=n*a,r=Math.pow(1-s*s,2)/(2*o)*(e/(1-n*n)-a/(1-s*s)+.5/n*Math.log((1-s)/(1+s))),i+=r,Math.abs(r)<=1e-10)return i;return NaN}function o0(){this.sphere||(this.k0=Nt(this.e,Math.sin(this.lat_ts),Math.cos(this.lat_ts)))}function s0(n){var e=n.x,t=n.y,i,r,a=R(e-this.long0);if(this.sphere)i=this.x0+this.a*a*Math.cos(this.lat_ts),r=this.y0+this.a*Math.sin(t)/Math.cos(this.lat_ts);else{var o=Wt(this.e,Math.sin(t));i=this.x0+this.a*this.k0*a,r=this.y0+this.a*o*.5/this.k0}return n.x=i,n.y=r,n}function h0(n){n.x-=this.x0,n.y-=this.y0;var e,t;return this.sphere?(e=R(this.long0+n.x/this.a/Math.cos(this.lat_ts)),t=Math.asin(n.y/this.a*Math.cos(this.lat_ts))):(t=a0(this.e,2*n.y*this.k0/this.a),e=R(this.long0+n.x/(this.a*this.k0))),n.x=e,n.y=t,n}var l0=["cea"],u0={init:o0,forward:s0,inverse:h0,names:l0};function f0(){this.x0=this.x0||0,this.y0=this.y0||0,this.lat0=this.lat0||0,this.long0=this.long0||0,this.lat_ts=this.lat_ts||0,this.title=this.title||"Equidistant Cylindrical (Plate Carre)",this.rc=Math.cos(this.lat_ts)}function c0(n){var e=n.x,t=n.y,i=R(e-this.long0),r=De(t-this.lat0);return n.x=this.x0+this.a*i*this.rc,n.y=this.y0+this.a*r,n}function v0(n){var e=n.x,t=n.y;return n.x=R(this.long0+(e-this.x0)/(this.a*this.rc)),n.y=De(this.lat0+(t-this.y0)/this.a),n}var d0=["Equirectangular","Equidistant_Cylindrical","eqc"],p0={init:f0,forward:c0,inverse:v0,names:d0},bo=20;function _0(){this.temp=this.b/this.a,this.es=1-Math.pow(this.temp,2),this.e=Math.sqrt(this.es),this.e0=hn(this.es),this.e1=ln(this.es),this.e2=un(this.es),this.e3=fn(this.es),this.ml0=this.a*ht(this.e0,this.e1,this.e2,this.e3,this.lat0)}function y0(n){var e=n.x,t=n.y,i,r,a,o=R(e-this.long0);if(a=o*Math.sin(t),this.sphere)Math.abs(t)<=C?(i=this.a*o,r=-1*this.a*this.lat0):(i=this.a*Math.sin(a)/Math.tan(t),r=this.a*(De(t-this.lat0)+(1-Math.cos(a))/Math.tan(t)));else if(Math.abs(t)<=C)i=this.a*o,r=-1*this.ml0;else{var s=be(this.a,this.e,Math.sin(t))/Math.tan(t);i=s*Math.sin(a),r=this.a*ht(this.e0,this.e1,this.e2,this.e3,t)-this.ml0+s*(1-Math.cos(a))}return n.x=i+this.x0,n.y=r+this.y0,n}function g0(n){var e,t,i,r,a,o,s,h,l;if(i=n.x-this.x0,r=n.y-this.y0,this.sphere)if(Math.abs(r+this.a*this.lat0)<=C)e=R(i/this.a+this.long0),t=0;else{o=this.lat0+r/this.a,s=i*i/this.a/this.a+o*o,h=o;var u;for(a=bo;a;--a)if(u=Math.tan(h),l=-1*(o*(h*u+1)-h-.5*(h*h+s)*u)/((h-o)/u-1),h+=l,Math.abs(l)<=C){t=h;break}e=R(this.long0+Math.asin(i*Math.tan(h)/this.a)/Math.sin(t))}else if(Math.abs(r+this.ml0)<=C)t=0,e=R(this.long0+i/this.a);else{o=(this.ml0+r)/this.a,s=i*i/this.a/this.a+o*o,h=o;var f,c,v,d,p;for(a=bo;a;--a)if(p=this.e*Math.sin(h),f=Math.sqrt(1-p*p)*Math.tan(h),c=this.a*ht(this.e0,this.e1,this.e2,this.e3,h),v=this.e0-2*this.e1*Math.cos(2*h)+4*this.e2*Math.cos(4*h)-6*this.e3*Math.cos(6*h),d=c/this.a,l=(o*(f*d+1)-d-.5*f*(d*d+s))/(this.es*Math.sin(2*h)*(d*d+s-2*o*d)/(4*f)+(o-d)*(f*v-2/Math.sin(2*h))-v),h-=l,Math.abs(l)<=C){t=h;break}f=Math.sqrt(1-this.es*Math.pow(Math.sin(t),2))*Math.tan(t),e=R(this.long0+Math.asin(i*f/this.a)/Math.sin(t))}return n.x=e,n.y=t,n}var m0=["Polyconic","poly"],M0={init:_0,forward:y0,inverse:g0,names:m0};function E0(){this.A=[],this.A[1]=.6399175073,this.A[2]=-.1358797613,this.A[3]=.063294409,this.A[4]=-.02526853,this.A[5]=.0117879,this.A[6]=-.0055161,this.A[7]=.0026906,this.A[8]=-.001333,this.A[9]=67e-5,this.A[10]=-34e-5,this.B_re=[],this.B_im=[],this.B_re[1]=.7557853228,this.B_im[1]=0,this.B_re[2]=.249204646,this.B_im[2]=.003371507,this.B_re[3]=-.001541739,this.B_im[3]=.04105856,this.B_re[4]=-.10162907,this.B_im[4]=.01727609,this.B_re[5]=-.26623489,this.B_im[5]=-.36249218,this.B_re[6]=-.6870983,this.B_im[6]=-1.1651967,this.C_re=[],this.C_im=[],this.C_re[1]=1.3231270439,this.C_im[1]=0,this.C_re[2]=-.577245789,this.C_im[2]=-.007809598,this.C_re[3]=.508307513,this.C_im[3]=-.112208952,this.C_re[4]=-.15094762,this.C_im[4]=.18200602,this.C_re[5]=1.01418179,this.C_im[5]=1.64497696,this.C_re[6]=1.9660549,this.C_im[6]=2.5127645,this.D=[],this.D[1]=1.5627014243,this.D[2]=.5185406398,this.D[3]=-.03333098,this.D[4]=-.1052906,this.D[5]=-.0368594,this.D[6]=.007317,this.D[7]=.0122,this.D[8]=.00394,this.D[9]=-.0013}function x0(n){var e,t=n.x,i=n.y,r=i-this.lat0,a=t-this.long0,o=r/tn*1e-5,s=a,h=1,l=0;for(e=1;e<=10;e++)h=h*o,l=l+this.A[e]*h;var u=l,f=s,c=1,v=0,d,p,_=0,y=0;for(e=1;e<=6;e++)d=c*u-v*f,p=v*u+c*f,c=d,v=p,_=_+this.B_re[e]*c-this.B_im[e]*v,y=y+this.B_im[e]*c+this.B_re[e]*v;return n.x=y*this.a+this.x0,n.y=_*this.a+this.y0,n}function T0(n){var e,t=n.x,i=n.y,r=t-this.x0,a=i-this.y0,o=a/this.a,s=r/this.a,h=1,l=0,u,f,c=0,v=0;for(e=1;e<=6;e++)u=h*o-l*s,f=l*o+h*s,h=u,l=f,c=c+this.C_re[e]*h-this.C_im[e]*l,v=v+this.C_im[e]*h+this.C_re[e]*l;for(var d=0;d<this.iterations;d++){var p=c,_=v,y,m,g=o,M=s;for(e=2;e<=6;e++)y=p*c-_*v,m=_*c+p*v,p=y,_=m,g=g+(e-1)*(this.B_re[e]*p-this.B_im[e]*_),M=M+(e-1)*(this.B_im[e]*p+this.B_re[e]*_);p=1,_=0;var x=this.B_re[1],P=this.B_im[1];for(e=2;e<=6;e++)y=p*c-_*v,m=_*c+p*v,p=y,_=m,x=x+e*(this.B_re[e]*p-this.B_im[e]*_),P=P+e*(this.B_im[e]*p+this.B_re[e]*_);var T=x*x+P*P;c=(g*x+M*P)/T,v=(M*x-g*P)/T}var O=c,L=v,b=1,j=0;for(e=1;e<=9;e++)b=b*O,j=j+this.D[e]*b;var W=this.lat0+j*tn*1e5,ot=this.long0+L;return n.x=ot,n.y=W,n}var C0=["New_Zealand_Map_Grid","nzmg"],O0={init:E0,forward:x0,inverse:T0,names:C0};function R0(){}function P0(n){var e=n.x,t=n.y,i=R(e-this.long0),r=this.x0+this.a*i,a=this.y0+this.a*Math.log(Math.tan(Math.PI/4+t/2.5))*1.25;return n.x=r,n.y=a,n}function w0(n){n.x-=this.x0,n.y-=this.y0;var e=R(this.long0+n.x/this.a),t=2.5*(Math.atan(Math.exp(.8*n.y/this.a))-Math.PI/4);return n.x=e,n.y=t,n}var I0=["Miller_Cylindrical","mill"],S0={init:R0,forward:P0,inverse:w0,names:I0},A0=20;function L0(){this.sphere?(this.n=1,this.m=0,this.es=0,this.C_y=Math.sqrt((this.m+1)/this.n),this.C_x=this.C_y/(this.m+1)):this.en=So(this.es)}function N0(n){var e,t,i=n.x,r=n.y;if(i=R(i-this.long0),this.sphere){if(!this.m)r=this.n!==1?Math.asin(this.n*Math.sin(r)):r;else for(var a=this.n*Math.sin(r),o=A0;o;--o){var s=(this.m*r+Math.sin(r)-a)/(this.m+Math.cos(r));if(r-=s,Math.abs(s)<C)break}e=this.a*this.C_x*i*(this.m+Math.cos(r)),t=this.a*this.C_y*r}else{var h=Math.sin(r),l=Math.cos(r);t=this.a*Yn(r,h,l,this.en),e=this.a*i*l/Math.sqrt(1-this.es*h*h)}return n.x=e,n.y=t,n}function b0(n){var e,t,i,r;return n.x-=this.x0,i=n.x/this.a,n.y-=this.y0,e=n.y/this.a,this.sphere?(e/=this.C_y,i=i/(this.C_x*(this.m+Math.cos(e))),this.m?e=Ht((this.m*e+Math.sin(e))/this.n):this.n!==1&&(e=Ht(Math.sin(e)/this.n)),i=R(i+this.long0),e=De(e)):(e=Ao(n.y/this.a,this.es,this.en),r=Math.abs(e),r<E?(r=Math.sin(e),t=this.long0+n.x*Math.sqrt(1-this.es*r*r)/(this.a*Math.cos(e)),i=R(t)):r-C<E&&(i=this.long0)),n.x=i,n.y=e,n}var D0=["Sinusoidal","sinu"],F0={init:L0,forward:N0,inverse:b0,names:D0};function G0(){}function j0(n){for(var e=n.x,t=n.y,i=R(e-this.long0),r=t,a=Math.PI*Math.sin(t);;){var o=-(r+Math.sin(r)-a)/(1+Math.cos(r));if(r+=o,Math.abs(o)<C)break}r/=2,Math.PI/2-Math.abs(t)<C&&(i=0);var s=.900316316158*this.a*i*Math.cos(r)+this.x0,h=1.4142135623731*this.a*Math.sin(r)+this.y0;return n.x=s,n.y=h,n}function $0(n){var e,t;n.x-=this.x0,n.y-=this.y0,t=n.y/(1.4142135623731*this.a),Math.abs(t)>.999999999999&&(t=.999999999999),e=Math.asin(t);var i=R(this.long0+n.x/(.900316316158*this.a*Math.cos(e)));i<-Math.PI&&(i=-Math.PI),i>Math.PI&&(i=Math.PI),t=(2*e+Math.sin(2*e))/Math.PI,Math.abs(t)>1&&(t=1);var r=Math.asin(t);return n.x=i,n.y=r,n}var z0=["Mollweide","moll"],U0={init:G0,forward:j0,inverse:$0,names:z0};function k0(){Math.abs(this.lat1+this.lat2)<C||(this.lat2=this.lat2||this.lat1,this.temp=this.b/this.a,this.es=1-Math.pow(this.temp,2),this.e=Math.sqrt(this.es),this.e0=hn(this.es),this.e1=ln(this.es),this.e2=un(this.es),this.e3=fn(this.es),this.sinphi=Math.sin(this.lat1),this.cosphi=Math.cos(this.lat1),this.ms1=Nt(this.e,this.sinphi,this.cosphi),this.ml1=ht(this.e0,this.e1,this.e2,this.e3,this.lat1),Math.abs(this.lat1-this.lat2)<C?this.ns=this.sinphi:(this.sinphi=Math.sin(this.lat2),this.cosphi=Math.cos(this.lat2),this.ms2=Nt(this.e,this.sinphi,this.cosphi),this.ml2=ht(this.e0,this.e1,this.e2,this.e3,this.lat2),this.ns=(this.ms1-this.ms2)/(this.ml2-this.ml1)),this.g=this.ml1+this.ms1/this.ns,this.ml0=ht(this.e0,this.e1,this.e2,this.e3,this.lat0),this.rh=this.a*(this.g-this.ml0))}function K0(n){var e=n.x,t=n.y,i;if(this.sphere)i=this.a*(this.g-t);else{var r=ht(this.e0,this.e1,this.e2,this.e3,t);i=this.a*(this.g-r)}var a=this.ns*R(e-this.long0),o=this.x0+i*Math.sin(a),s=this.y0+this.rh-i*Math.cos(a);return n.x=o,n.y=s,n}function q0(n){n.x-=this.x0,n.y=this.rh-n.y+this.y0;var e,t,i,r;this.ns>=0?(t=Math.sqrt(n.x*n.x+n.y*n.y),e=1):(t=-Math.sqrt(n.x*n.x+n.y*n.y),e=-1);var a=0;if(t!==0&&(a=Math.atan2(e*n.x,e*n.y)),this.sphere)return r=R(this.long0+a/this.ns),i=De(this.g-t/this.a),n.x=r,n.y=i,n;var o=this.g-t/this.a;return i=ei(o,this.e0,this.e1,this.e2,this.e3),r=R(this.long0+a/this.ns),n.x=r,n.y=i,n}var X0=["Equidistant_Conic","eqdc"],Z0={init:k0,forward:K0,inverse:q0,names:X0};function B0(){this.R=this.a}function V0(n){var e=n.x,t=n.y,i=R(e-this.long0),r,a;Math.abs(t)<=C&&(r=this.x0+this.R*i,a=this.y0);var o=Ht(2*Math.abs(t/Math.PI));(Math.abs(i)<=C||Math.abs(Math.abs(t)-E)<=C)&&(r=this.x0,t>=0?a=this.y0+Math.PI*this.R*Math.tan(.5*o):a=this.y0+Math.PI*this.R*-Math.tan(.5*o));var s=.5*Math.abs(Math.PI/i-i/Math.PI),h=s*s,l=Math.sin(o),u=Math.cos(o),f=u/(l+u-1),c=f*f,v=f*(2/l-1),d=v*v,p=Math.PI*this.R*(s*(f-d)+Math.sqrt(h*(f-d)*(f-d)-(d+h)*(c-d)))/(d+h);i<0&&(p=-p),r=this.x0+p;var _=h+f;return p=Math.PI*this.R*(v*_-s*Math.sqrt((d+h)*(h+1)-_*_))/(d+h),t>=0?a=this.y0+p:a=this.y0-p,n.x=r,n.y=a,n}function W0(n){var e,t,i,r,a,o,s,h,l,u,f,c,v;return n.x-=this.x0,n.y-=this.y0,f=Math.PI*this.R,i=n.x/f,r=n.y/f,a=i*i+r*r,o=-Math.abs(r)*(1+a),s=o-2*r*r+i*i,h=-2*o+1+2*r*r+a*a,v=r*r/h+(2*s*s*s/h/h/h-9*o*s/h/h)/27,l=(o-s*s/3/h)/h,u=2*Math.sqrt(-l/3),f=3*v/l/u,Math.abs(f)>1&&(f>=0?f=1:f=-1),c=Math.acos(f)/3,n.y>=0?t=(-u*Math.cos(c+Math.PI/3)-s/3/h)*Math.PI:t=-(-u*Math.cos(c+Math.PI/3)-s/3/h)*Math.PI,Math.abs(i)<C?e=this.long0:e=R(this.long0+Math.PI*(a-1+Math.sqrt(1+2*(i*i-r*r)+a*a))/2/i),n.x=e,n.y=t,n}var H0=["Van_der_Grinten_I","VanDerGrinten","vandg"],Y0={init:B0,forward:V0,inverse:W0,names:H0};function Q0(){this.sin_p12=Math.sin(this.lat0),this.cos_p12=Math.cos(this.lat0)}function J0(n){var e=n.x,t=n.y,i=Math.sin(n.y),r=Math.cos(n.y),a=R(e-this.long0),o,s,h,l,u,f,c,v,d,p,_,y,m,g,M,x,P,T,O,L,b,j,W;return this.sphere?Math.abs(this.sin_p12-1)<=C?(n.x=this.x0+this.a*(E-t)*Math.sin(a),n.y=this.y0-this.a*(E-t)*Math.cos(a),n):Math.abs(this.sin_p12+1)<=C?(n.x=this.x0+this.a*(E+t)*Math.sin(a),n.y=this.y0+this.a*(E+t)*Math.cos(a),n):(T=this.sin_p12*i+this.cos_p12*r*Math.cos(a),x=Math.acos(T),P=x?x/Math.sin(x):1,n.x=this.x0+this.a*P*r*Math.sin(a),n.y=this.y0+this.a*P*(this.cos_p12*i-this.sin_p12*r*Math.cos(a)),n):(o=hn(this.es),s=ln(this.es),h=un(this.es),l=fn(this.es),Math.abs(this.sin_p12-1)<=C?(u=this.a*ht(o,s,h,l,E),f=this.a*ht(o,s,h,l,t),n.x=this.x0+(u-f)*Math.sin(a),n.y=this.y0-(u-f)*Math.cos(a),n):Math.abs(this.sin_p12+1)<=C?(u=this.a*ht(o,s,h,l,E),f=this.a*ht(o,s,h,l,t),n.x=this.x0+(u+f)*Math.sin(a),n.y=this.y0+(u+f)*Math.cos(a),n):(c=i/r,v=be(this.a,this.e,this.sin_p12),d=be(this.a,this.e,i),p=Math.atan((1-this.es)*c+this.es*v*this.sin_p12/(d*r)),_=Math.atan2(Math.sin(a),this.cos_p12*Math.tan(p)-this.sin_p12*Math.cos(a)),_===0?O=Math.asin(this.cos_p12*Math.sin(p)-this.sin_p12*Math.cos(p)):Math.abs(Math.abs(_)-Math.PI)<=C?O=-Math.asin(this.cos_p12*Math.sin(p)-this.sin_p12*Math.cos(p)):O=Math.asin(Math.sin(a)*Math.cos(p)/Math.sin(_)),y=this.e*this.sin_p12/Math.sqrt(1-this.es),m=this.e*this.cos_p12*Math.cos(_)/Math.sqrt(1-this.es),g=y*m,M=m*m,L=O*O,b=L*O,j=b*O,W=j*O,x=v*O*(1-L*M*(1-M)/6+b/8*g*(1-2*M)+j/120*(M*(4-7*M)-3*y*y*(1-7*M))-W/48*g),n.x=this.x0+x*Math.sin(_),n.y=this.y0+x*Math.cos(_),n))}function tp(n){n.x-=this.x0,n.y-=this.y0;var e,t,i,r,a,o,s,h,l,u,f,c,v,d,p,_,y,m,g,M,x,P,T,O;return this.sphere?(e=Math.sqrt(n.x*n.x+n.y*n.y),e>2*E*this.a?void 0:(t=e/this.a,i=Math.sin(t),r=Math.cos(t),a=this.long0,Math.abs(e)<=C?o=this.lat0:(o=Ht(r*this.sin_p12+n.y*i*this.cos_p12/e),s=Math.abs(this.lat0)-E,Math.abs(s)<=C?this.lat0>=0?a=R(this.long0+Math.atan2(n.x,-n.y)):a=R(this.long0-Math.atan2(-n.x,n.y)):a=R(this.long0+Math.atan2(n.x*i,e*this.cos_p12*r-n.y*this.sin_p12*i))),n.x=a,n.y=o,n)):(h=hn(this.es),l=ln(this.es),u=un(this.es),f=fn(this.es),Math.abs(this.sin_p12-1)<=C?(c=this.a*ht(h,l,u,f,E),e=Math.sqrt(n.x*n.x+n.y*n.y),v=c-e,o=ei(v/this.a,h,l,u,f),a=R(this.long0+Math.atan2(n.x,-1*n.y)),n.x=a,n.y=o,n):Math.abs(this.sin_p12+1)<=C?(c=this.a*ht(h,l,u,f,E),e=Math.sqrt(n.x*n.x+n.y*n.y),v=e-c,o=ei(v/this.a,h,l,u,f),a=R(this.long0+Math.atan2(n.x,n.y)),n.x=a,n.y=o,n):(e=Math.sqrt(n.x*n.x+n.y*n.y),_=Math.atan2(n.x,n.y),d=be(this.a,this.e,this.sin_p12),y=Math.cos(_),m=this.e*this.cos_p12*y,g=-m*m/(1-this.es),M=3*this.es*(1-g)*this.sin_p12*this.cos_p12*y/(1-this.es),x=e/d,P=x-g*(1+g)*Math.pow(x,3)/6-M*(1+3*g)*Math.pow(x,4)/24,T=1-g*P*P/2-x*P*P*P/6,p=Math.asin(this.sin_p12*Math.cos(P)+this.cos_p12*Math.sin(P)*y),a=R(this.long0+Math.asin(Math.sin(_)*Math.sin(P)/Math.cos(p))),O=Math.sin(p),o=Math.atan2((O-this.es*T*this.sin_p12)*Math.tan(p),O*(1-this.es)),n.x=a,n.y=o,n))}var ep=["Azimuthal_Equidistant","aeqd"],np={init:Q0,forward:J0,inverse:tp,names:ep};function ip(){this.sin_p14=Math.sin(this.lat0),this.cos_p14=Math.cos(this.lat0)}function rp(n){var e,t,i,r,a,o,s,h,l=n.x,u=n.y;return i=R(l-this.long0),e=Math.sin(u),t=Math.cos(u),r=Math.cos(i),o=this.sin_p14*e+this.cos_p14*t*r,a=1,(o>0||Math.abs(o)<=C)&&(s=this.a*a*t*Math.sin(i),h=this.y0+this.a*a*(this.cos_p14*e-this.sin_p14*t*r)),n.x=s,n.y=h,n}function ap(n){var e,t,i,r,a,o,s;return n.x-=this.x0,n.y-=this.y0,e=Math.sqrt(n.x*n.x+n.y*n.y),t=Ht(e/this.a),i=Math.sin(t),r=Math.cos(t),o=this.long0,Math.abs(e)<=C?(s=this.lat0,n.x=o,n.y=s,n):(s=Ht(r*this.sin_p14+n.y*i*this.cos_p14/e),a=Math.abs(this.lat0)-E,Math.abs(a)<=C?(this.lat0>=0?o=R(this.long0+Math.atan2(n.x,-n.y)):o=R(this.long0-Math.atan2(-n.x,n.y)),n.x=o,n.y=s,n):(o=R(this.long0+Math.atan2(n.x*i,e*this.cos_p14*r-n.y*this.sin_p14*i)),n.x=o,n.y=s,n))}var op=["ortho"],sp={init:ip,forward:rp,inverse:ap,names:op},Z={FRONT:1,RIGHT:2,BACK:3,LEFT:4,TOP:5,BOTTOM:6},G={AREA_0:1,AREA_1:2,AREA_2:3,AREA_3:4};function hp(){this.x0=this.x0||0,this.y0=this.y0||0,this.lat0=this.lat0||0,this.long0=this.long0||0,this.lat_ts=this.lat_ts||0,this.title=this.title||"Quadrilateralized Spherical Cube",this.lat0>=E-F/2?this.face=Z.TOP:this.lat0<=-(E-F/2)?this.face=Z.BOTTOM:Math.abs(this.long0)<=F?this.face=Z.FRONT:Math.abs(this.long0)<=E+F?this.face=this.long0>0?Z.RIGHT:Z.LEFT:this.face=Z.BACK,this.es!==0&&(this.one_minus_f=1-(this.a-this.b)/this.a,this.one_minus_f_squared=this.one_minus_f*this.one_minus_f)}function lp(n){var e={x:0,y:0},t,i,r,a,o,s,h={value:0};if(n.x-=this.long0,this.es!==0?t=Math.atan(this.one_minus_f_squared*Math.tan(n.y)):t=n.y,i=n.x,this.face===Z.TOP)a=E-t,i>=F&&i<=E+F?(h.value=G.AREA_0,r=i-E):i>E+F||i<=-(E+F)?(h.value=G.AREA_1,r=i>0?i-V:i+V):i>-(E+F)&&i<=-F?(h.value=G.AREA_2,r=i+E):(h.value=G.AREA_3,r=i);else if(this.face===Z.BOTTOM)a=E+t,i>=F&&i<=E+F?(h.value=G.AREA_0,r=-i+E):i<F&&i>=-F?(h.value=G.AREA_1,r=-i):i<-F&&i>=-(E+F)?(h.value=G.AREA_2,r=-i-E):(h.value=G.AREA_3,r=i>0?-i+V:-i-V);else{var l,u,f,c,v,d,p;this.face===Z.RIGHT?i=Fe(i,+E):this.face===Z.BACK?i=Fe(i,+V):this.face===Z.LEFT&&(i=Fe(i,-E)),c=Math.sin(t),v=Math.cos(t),d=Math.sin(i),p=Math.cos(i),l=v*p,u=v*d,f=c,this.face===Z.FRONT?(a=Math.acos(l),r=ni(a,f,u,h)):this.face===Z.RIGHT?(a=Math.acos(u),r=ni(a,f,-l,h)):this.face===Z.BACK?(a=Math.acos(-l),r=ni(a,f,-u,h)):this.face===Z.LEFT?(a=Math.acos(-u),r=ni(a,f,l,h)):(a=r=0,h.value=G.AREA_0)}return s=Math.atan(12/V*(r+Math.acos(Math.sin(r)*Math.cos(F))-E)),o=Math.sqrt((1-Math.cos(a))/(Math.cos(s)*Math.cos(s))/(1-Math.cos(Math.atan(1/Math.cos(r))))),h.value===G.AREA_1?s+=E:h.value===G.AREA_2?s+=V:h.value===G.AREA_3&&(s+=1.5*V),e.x=o*Math.cos(s),e.y=o*Math.sin(s),e.x=e.x*this.a+this.x0,e.y=e.y*this.a+this.y0,n.x=e.x,n.y=e.y,n}function up(n){var e={lam:0,phi:0},t,i,r,a,o,s,h,l,u,f={value:0};if(n.x=(n.x-this.x0)/this.a,n.y=(n.y-this.y0)/this.a,i=Math.atan(Math.sqrt(n.x*n.x+n.y*n.y)),t=Math.atan2(n.y,n.x),n.x>=0&&n.x>=Math.abs(n.y)?f.value=G.AREA_0:n.y>=0&&n.y>=Math.abs(n.x)?(f.value=G.AREA_1,t-=E):n.x<0&&-n.x>=Math.abs(n.y)?(f.value=G.AREA_2,t=t<0?t+V:t-V):(f.value=G.AREA_3,t+=E),u=V/12*Math.tan(t),o=Math.sin(u)/(Math.cos(u)-1/Math.sqrt(2)),s=Math.atan(o),r=Math.cos(t),a=Math.tan(i),h=1-r*r*a*a*(1-Math.cos(Math.atan(1/Math.cos(s)))),h<-1?h=-1:h>1&&(h=1),this.face===Z.TOP)l=Math.acos(h),e.phi=E-l,f.value===G.AREA_0?e.lam=s+E:f.value===G.AREA_1?e.lam=s<0?s+V:s-V:f.value===G.AREA_2?e.lam=s-E:e.lam=s;else if(this.face===Z.BOTTOM)l=Math.acos(h),e.phi=l-E,f.value===G.AREA_0?e.lam=-s+E:f.value===G.AREA_1?e.lam=-s:f.value===G.AREA_2?e.lam=-s-E:e.lam=s<0?-s-V:-s+V;else{var c,v,d;c=h,u=c*c,u>=1?d=0:d=Math.sqrt(1-u)*Math.sin(s),u+=d*d,u>=1?v=0:v=Math.sqrt(1-u),f.value===G.AREA_1?(u=v,v=-d,d=u):f.value===G.AREA_2?(v=-v,d=-d):f.value===G.AREA_3&&(u=v,v=d,d=-u),this.face===Z.RIGHT?(u=c,c=-v,v=u):this.face===Z.BACK?(c=-c,v=-v):this.face===Z.LEFT&&(u=c,c=v,v=-u),e.phi=Math.acos(-d)-E,e.lam=Math.atan2(v,c),this.face===Z.RIGHT?e.lam=Fe(e.lam,-E):this.face===Z.BACK?e.lam=Fe(e.lam,-V):this.face===Z.LEFT&&(e.lam=Fe(e.lam,+E))}if(this.es!==0){var p,_,y;p=e.phi<0?1:0,_=Math.tan(e.phi),y=this.b/Math.sqrt(_*_+this.one_minus_f_squared),e.phi=Math.atan(Math.sqrt(this.a*this.a-y*y)/(this.one_minus_f*y)),p&&(e.phi=-e.phi)}return e.lam+=this.long0,n.x=e.lam,n.y=e.phi,n}function ni(n,e,t,i){var r;return n<C?(i.value=G.AREA_0,r=0):(r=Math.atan2(e,t),Math.abs(r)<=F?i.value=G.AREA_0:r>F&&r<=E+F?(i.value=G.AREA_1,r-=E):r>E+F||r<=-(E+F)?(i.value=G.AREA_2,r=r>=0?r-V:r+V):(i.value=G.AREA_3,r+=E)),r}function Fe(n,e){var t=n+e;return t<-V?t+=en:t>+V&&(t-=en),t}var fp=["Quadrilateralized Spherical Cube","Quadrilateralized_Spherical_Cube","qsc"],cp={init:hp,forward:lp,inverse:up,names:fp},er=[[1,22199e-21,-715515e-10,31103e-10],[.9986,-482243e-9,-24897e-9,-13309e-10],[.9954,-83103e-8,-448605e-10,-986701e-12],[.99,-.00135364,-59661e-9,36777e-10],[.9822,-.00167442,-449547e-11,-572411e-11],[.973,-.00214868,-903571e-10,18736e-12],[.96,-.00305085,-900761e-10,164917e-11],[.9427,-.00382792,-653386e-10,-26154e-10],[.9216,-.00467746,-10457e-8,481243e-11],[.8962,-.00536223,-323831e-10,-543432e-11],[.8679,-.00609363,-113898e-9,332484e-11],[.835,-.00698325,-640253e-10,934959e-12],[.7986,-.00755338,-500009e-10,935324e-12],[.7597,-.00798324,-35971e-9,-227626e-11],[.7186,-.00851367,-701149e-10,-86303e-10],[.6732,-.00986209,-199569e-9,191974e-10],[.6213,-.010418,883923e-10,624051e-11],[.5722,-.00906601,182e-6,624051e-11],[.5322,-.00677797,275608e-9,624051e-11]],cn=[[-520417e-23,.0124,121431e-23,-845284e-16],[.062,.0124,-126793e-14,422642e-15],[.124,.0124,507171e-14,-160604e-14],[.186,.0123999,-190189e-13,600152e-14],[.248,.0124002,710039e-13,-224e-10],[.31,.0123992,-264997e-12,835986e-13],[.372,.0124029,988983e-12,-311994e-12],[.434,.0123893,-369093e-11,-435621e-12],[.4958,.0123198,-102252e-10,-345523e-12],[.5571,.0121916,-154081e-10,-582288e-12],[.6176,.0119938,-241424e-10,-525327e-12],[.6769,.011713,-320223e-10,-516405e-12],[.7346,.0113541,-397684e-10,-609052e-12],[.7903,.0109107,-489042e-10,-104739e-11],[.8435,.0103431,-64615e-9,-140374e-14],[.8936,.00969686,-64636e-9,-8547e-9],[.9394,.00840947,-192841e-9,-42106e-10],[.9761,.00616527,-256e-6,-42106e-10],[1,.00328947,-319159e-9,-42106e-10]],Do=.8487,Fo=1.3523,Go=Lt/5,vp=1/Go,Ge=18,ii=function(n,e){return n[0]+e*(n[1]+e*(n[2]+e*n[3]))},dp=function(n,e){return n[1]+e*(2*n[2]+e*3*n[3])};function pp(n,e,t,i){for(var r=e;i;--i){var a=n(r);if(r-=a,Math.abs(a)<t)break}return r}function _p(){this.x0=this.x0||0,this.y0=this.y0||0,this.long0=this.long0||0,this.es=0,this.title=this.title||"Robinson"}function yp(n){var e=R(n.x-this.long0),t=Math.abs(n.y),i=Math.floor(t*Go);i<0?i=0:i>=Ge&&(i=Ge-1),t=Lt*(t-vp*i);var r={x:ii(er[i],t)*e,y:ii(cn[i],t)};return n.y<0&&(r.y=-r.y),r.x=r.x*this.a*Do+this.x0,r.y=r.y*this.a*Fo+this.y0,r}function gp(n){var e={x:(n.x-this.x0)/(this.a*Do),y:Math.abs(n.y-this.y0)/(this.a*Fo)};if(e.y>=1)e.x/=er[Ge][0],e.y=n.y<0?-E:E;else{var t=Math.floor(e.y*Ge);for(t<0?t=0:t>=Ge&&(t=Ge-1);;)if(cn[t][0]>e.y)--t;else if(cn[t+1][0]<=e.y)++t;else break;var i=cn[t],r=5*(e.y-i[0])/(cn[t+1][0]-i[0]);r=pp(function(a){return(ii(i,a)-e.y)/dp(i,a)},r,C,100),e.x/=ii(er[t],r),e.y=(5*t+r)*et,n.y<0&&(e.y=-e.y)}return e.x=R(e.x+this.long0),e}var mp=["Robinson","robin"],Mp={init:_p,forward:yp,inverse:gp,names:mp};function Ep(){this.name="geocent"}function xp(n){var e=lo(n,this.es,this.a);return e}function Tp(n){var e=uo(n,this.es,this.a,this.b);return e}var Cp=["Geocentric","geocentric","geocent","Geocent"],Op={init:Ep,forward:xp,inverse:Tp,names:Cp},at={N_POLE:0,S_POLE:1,EQUIT:2,OBLIQ:3},vn={h:{def:1e5,num:!0},azi:{def:0,num:!0,degrees:!0},tilt:{def:0,num:!0,degrees:!0},long0:{def:0,num:!0},lat0:{def:0,num:!0}};function Rp(){if(Object.keys(vn).forEach(function(t){if(typeof this[t]=="undefined")this[t]=vn[t].def;else{if(vn[t].num&&isNaN(this[t]))throw new Error("Invalid parameter value, must be numeric "+t+" = "+this[t]);vn[t].num&&(this[t]=parseFloat(this[t]))}vn[t].degrees&&(this[t]=this[t]*et)}.bind(this)),Math.abs(Math.abs(this.lat0)-E)<C?this.mode=this.lat0<0?at.S_POLE:at.N_POLE:Math.abs(this.lat0)<C?this.mode=at.EQUIT:(this.mode=at.OBLIQ,this.sinph0=Math.sin(this.lat0),this.cosph0=Math.cos(this.lat0)),this.pn1=this.h/this.a,this.pn1<=0||this.pn1>1e10)throw new Error("Invalid height");this.p=1+this.pn1,this.rp=1/this.p,this.h1=1/this.pn1,this.pfact=(this.p+1)*this.h1,this.es=0;var n=this.tilt,e=this.azi;this.cg=Math.cos(e),this.sg=Math.sin(e),this.cw=Math.cos(n),this.sw=Math.sin(n)}function Pp(n){n.x-=this.long0;var e=Math.sin(n.y),t=Math.cos(n.y),i=Math.cos(n.x),r,a;switch(this.mode){case at.OBLIQ:a=this.sinph0*e+this.cosph0*t*i;break;case at.EQUIT:a=t*i;break;case at.S_POLE:a=-e;break;case at.N_POLE:a=e;break}switch(a=this.pn1/(this.p-a),r=a*t*Math.sin(n.x),this.mode){case at.OBLIQ:a*=this.cosph0*e-this.sinph0*t*i;break;case at.EQUIT:a*=e;break;case at.N_POLE:a*=-(t*i);break;case at.S_POLE:a*=t*i;break}var o,s;return o=a*this.cg+r*this.sg,s=1/(o*this.sw*this.h1+this.cw),r=(r*this.cg-a*this.sg)*this.cw*s,a=o*s,n.x=r*this.a,n.y=a*this.a,n}function wp(n){n.x/=this.a,n.y/=this.a;var e={x:n.x,y:n.y},t,i,r;r=1/(this.pn1-n.y*this.sw),t=this.pn1*n.x*r,i=this.pn1*n.y*this.cw*r,n.x=t*this.cg+i*this.sg,n.y=i*this.cg-t*this.sg;var a=Jn(n.x,n.y);if(Math.abs(a)<C)e.x=0,e.y=n.y;else{var o,s;switch(s=1-a*a*this.pfact,s=(this.p-Math.sqrt(s))/(this.pn1/a+a/this.pn1),o=Math.sqrt(1-s*s),this.mode){case at.OBLIQ:e.y=Math.asin(o*this.sinph0+n.y*s*this.cosph0/a),n.y=(o-this.sinph0*Math.sin(e.y))*a,n.x*=s*this.cosph0;break;case at.EQUIT:e.y=Math.asin(n.y*s/a),n.y=o*a,n.x*=s;break;case at.N_POLE:e.y=Math.asin(o),n.y=-n.y;break;case at.S_POLE:e.y=-Math.asin(o);break}e.x=Math.atan2(n.x,n.y)}return n.x=e.x+this.long0,n.y=e.y,n}var Ip=["Tilted_Perspective","tpers"],Sp={init:Rp,forward:Pp,inverse:wp,names:Ip};function Ap(n){n.Proj.projections.add(Qn),n.Proj.projections.add(ti),n.Proj.projections.add(kv),n.Proj.projections.add(Qv),n.Proj.projections.add(rd),n.Proj.projections.add(ld),n.Proj.projections.add(pd),n.Proj.projections.add(Md),n.Proj.projections.add(Od),n.Proj.projections.add(Sd),n.Proj.projections.add(Bd),n.Proj.projections.add(Jd),n.Proj.projections.add(r0),n.Proj.projections.add(u0),n.Proj.projections.add(p0),n.Proj.projections.add(M0),n.Proj.projections.add(O0),n.Proj.projections.add(S0),n.Proj.projections.add(F0),n.Proj.projections.add(U0),n.Proj.projections.add(Z0),n.Proj.projections.add(Y0),n.Proj.projections.add(np),n.Proj.projections.add(sp),n.Proj.projections.add(cp),n.Proj.projections.add(Mp),n.Proj.projections.add(Op),n.Proj.projections.add(Sp)}Et.defaultDatum="WGS84";Et.Proj=bt;Et.WGS84=new Et.Proj("WGS84");Et.Point=Le;Et.toPoint=po;Et.defs=st;Et.nadgrid=qc;Et.transform=Hn;Et.mgrs=ov;Et.version="__VERSION__";Ap(Et);export{Dp as M,bp as O,Fp as T,re as V,Gp as a,jp as b,Np as c,Lp as f,Je as o,Et as p,$p as r};
//# sourceMappingURL=vendor.3727dd50.js.map
